[{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(admin)\\admin\\consent\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(admin)\\admin\\contact\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(admin)\\admin\\flags\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(admin)\\admin\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(admin)\\admin\\rbac\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(admin)\\admin\\verification\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(admin)\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(chat)\\chat\\[peerid]\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(chat)\\chat\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(chat)\\chat\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(communities)\\communities\\events\\[eventId]\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(communities)\\communities\\events\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(communities)\\communities\\feed\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(communities)\\communities\\groups\\[groupId]\\about\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(communities)\\communities\\groups\\[groupId]\\events\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(communities)\\communities\\groups\\[groupId]\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(communities)\\communities\\groups\\[groupId]\\loading.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(communities)\\communities\\groups\\[groupId]\\members\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(communities)\\communities\\groups\\[groupId]\\not-found.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(communities)\\communities\\groups\\[groupId]\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(communities)\\communities\\groups\\[groupId]\\settings\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(communities)\\communities\\groups\\loading.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(communities)\\communities\\groups\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(communities)\\communities\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(communities)\\communities\\notifications\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(communities)\\communities\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(communities)\\communities\\search\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(identity)\\forgot-password\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(identity)\\forgot-username\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(identity)\\login\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(identity)\\onboarding\\courses\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(identity)\\onboarding\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(identity)\\reset-password\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(identity)\\settings\\account\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(identity)\\settings\\accounts\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(identity)\\settings\\consent\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(identity)\\settings\\contact-discovery\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(identity)\\settings\\education\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(identity)\\settings\\interests\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(identity)\\settings\\links\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(identity)\\settings\\notifications\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(identity)\\settings\\passkeys\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(identity)\\settings\\privacy\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(identity)\\settings\\profile\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(identity)\\settings\\security\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(identity)\\settings\\sessions\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(identity)\\settings\\skills\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(identity)\\settings\\verification\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(identity)\\verify\\[token]\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(identity)\\verify\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(legal)\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(legal)\\privacy\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(legal)\\terms\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(onboarding)\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(onboarding)\\major-year\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(onboarding)\\passions\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(onboarding)\\photos\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(onboarding)\\select-courses\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(onboarding)\\select-university\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(onboarding)\\set-profile\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(onboarding)\\welcome\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(profiles)\\profiles\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(profiles)\\u\\[handle]\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(rooms)\\rooms\\[roomId]\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(rooms)\\rooms\\create\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(rooms)\\rooms\\join\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(rooms)\\rooms\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(social)\\friends\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(social)\\invites\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(social)\\match\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(social)\\social\\friends\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(social)\\social\\invitations\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(social)\\social\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(social)\\social\\nearby\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(social)\\social\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(staff)\\admin\\mod\\audit\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(staff)\\admin\\mod\\cases\\[caseId]\\appeal\\client-page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(staff)\\admin\\mod\\cases\\[caseId]\\appeal\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(staff)\\admin\\mod\\cases\\[caseId]\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(staff)\\admin\\mod\\cases\\[caseId]\\timeline\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(staff)\\admin\\mod\\cases\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(staff)\\admin\\mod\\jobs\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(staff)\\admin\\mod\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(staff)\\admin\\mod\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(staff)\\admin\\mod\\quarantine\\[attachmentId]\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(staff)\\admin\\mod\\quarantine\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(staff)\\admin\\mod\\safety\\hashes\\import\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(staff)\\admin\\mod\\safety\\hashes\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(staff)\\admin\\mod\\safety\\thresholds\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(staff)\\admin\\mod\\safety\\urls\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(staff)\\admin\\mod\\tools\\bundles\\bundles-client.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(staff)\\admin\\mod\\tools\\bundles\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(staff)\\admin\\mod\\tools\\catalog\\catalog-client.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(staff)\\admin\\mod\\tools\\catalog\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(staff)\\admin\\mod\\tools\\jobs\\jobs-client.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(staff)\\admin\\mod\\tools\\jobs\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(staff)\\admin\\mod\\tools\\macro\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(staff)\\admin\\mod\\tools\\macros\\macros-client.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(staff)\\admin\\mod\\tools\\macros\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(staff)\\admin\\mod\\tools\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(staff)\\admin\\mod\\tools\\revert\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(staff)\\admin\\mod\\tools\\revert\\revert-client.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(staff)\\admin\\mod\\tools\\unshadow\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(staff)\\admin\\mod\\tools\\unshadow\\unshadow-client.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(staff)\\admin\\mod\\triage\\[queueKey]\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(staff)\\admin\\mod\\triage\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(staff)\\admin\\mod\\users\\[userId]\\client-page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(staff)\\admin\\mod\\users\\[userId]\\linkage\\client-page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(staff)\\admin\\mod\\users\\[userId]\\linkage\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\(staff)\\admin\\mod\\users\\[userId]\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\_harness\\proximity\\golive\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\activities\\quick_trivia\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\activities\\rock_paper_scissors\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\activities\\speed_typing\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\activities\\story\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\activities\\tictactoe\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\api\\idempotency.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\api\\ops\\ingest\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\api\\ops\\ui-metrics\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\components\\ReasonChips.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\components\\ShieldIcon.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\contact\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\discovery\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\features\\activities\\api\\client.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\features\\activities\\components\\ActivitiesQuickCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\features\\activities\\components\\ActivityLobbySummary.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\features\\activities\\components\\ChooseActivityModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\features\\activities\\components\\LiveSessionShell.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\features\\activities\\components\\MyPointsBadge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\features\\activities\\components\\PenaltyBanner.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\features\\activities\\components\\QuickTriviaPanel.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'MyPointsBadge' is defined but never used.","line":7,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":23}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"∩╗┐\"use client\";\n\nimport React, { useCallback, useEffect, useMemo, useRef } from \"react\";\nimport { useQuickTriviaSession, type TriviaState } from \"../hooks/useQuickTriviaSession\";\nimport { useFriendIdentities } from \"@/hooks/social/use-friend-identities\";\nimport { Trophy, Timer, Zap, Users, CheckCircle2, XCircle, AlertCircle, Clock, Lock, LogOut, AlertTriangle } from \"lucide-react\";\nimport { MyPointsBadge } from \"./MyPointsBadge\";\n\ntype QuickTriviaController = {\n  state: TriviaState;\n  selectOption: (idx: number) => void;\n  toggleReady?: (ready: boolean) => void;\n  leave?: () => void;\n  progress: number;\n  countdownRemainingMs?: number;\n  questionMsRemaining?: number;\n  self?: string;\n};\n\ntype QuickTriviaPanelViewProps = {\n  controller: QuickTriviaController;\n  onExpired?: () => void;\n};\n\nexport const QuickTriviaPanelView: React.FC<QuickTriviaPanelViewProps> = ({ controller, onExpired }) => {\n  const { state, selectOption, progress, toggleReady, leave, countdownRemainingMs, questionMsRemaining, self } = controller;\n  const { map: friendIdentities, authUser } = useFriendIdentities();\n\n  const countdownSeconds = countdownRemainingMs ? Math.ceil(countdownRemainingMs / 1000) : null;\n  const blurActive = (state.phase as string) === \"countdown\" || (countdownRemainingMs && countdownRemainingMs > 0);\n  const roundSecondsLeft = typeof questionMsRemaining === \"number\" && questionMsRemaining > 0 ? Math.ceil(questionMsRemaining / 1000) : null;\n  const roundNumber = typeof state.currentRound === \"number\" && state.currentRound >= 0 ? state.currentRound + 1 : null;\n\n  const formatHandle = useCallback((value?: string | null) => {\n    const trimmed = value?.trim();\n    if (!trimmed) return null;\n    return trimmed.startsWith(\"@\") ? trimmed : `@${trimmed}`;\n  }, []);\n\n  const resolveName = useCallback(\n    (userId: string) => {\n      if (authUser?.userId === userId) {\n        const personal = authUser.displayName?.trim();\n        return personal && personal.length > 0 ? personal : \"You\";\n      }\n      if (userId === self) {\n        return \"You\";\n      }\n      const friend = friendIdentities.get(userId);\n      if (friend) {\n        const friendly = friend.displayName?.trim();\n        if (friendly) return friendly;\n        const friendHandle = formatHandle(friend.handle);\n        if (friendHandle) return friendHandle;\n      }\n      return userId;\n    },\n    [authUser?.displayName, authUser?.userId, friendIdentities, formatHandle, self],\n  );\n\n  const resolveSubtitle = useCallback(\n    (userId: string) => {\n      if (authUser?.userId === userId) {\n        return formatHandle(authUser.handle);\n      }\n      const friend = friendIdentities.get(userId);\n      if (friend) {\n        const friendHandle = formatHandle(friend.handle);\n        if (friendHandle) return friendHandle;\n      }\n      return null;\n    },\n    [authUser?.handle, authUser?.userId, friendIdentities, formatHandle],\n  );\n\n  const scoreCards = useMemo(() => {\n    const list: Array<{ userId: string; score?: number }> =\n      (state.scoreboard && state.scoreboard.length > 0\n        ? state.scoreboard\n        : (state.presence || []).map((p) => ({ userId: p.userId, score: 0 }))) || [];\n    return list.map((row) => ({\n      userId: row.userId,\n      label: resolveName(row.userId),\n      subtitle: resolveSubtitle(row.userId),\n      score: typeof row.score === \"number\" ? row.score : 0,\n      isReady: (state.presence || []).find(p => p.userId === row.userId)?.ready ?? false,\n      isSelf: row.userId === self,\n    }));\n  }, [resolveName, resolveSubtitle, state.presence, state.scoreboard, self]);\n\n  const participants = state.presence || [];\n  const readyCount = participants.filter((p) => p.ready).length;\n  const totalParticipants = participants.length || scoreCards.length;\n  const allReady = totalParticipants > 0 && readyCount === totalParticipants;\n  const selfPresence = participants.find((p) => p.userId === self);\n  const lobbyArmed = state.lobbyReady;\n\n  // --- Render Helpers ---\n\n  const renderLobby = () => (\n    <div className=\"space-y-8\">\n      <div className=\"grid gap-4 sm:grid-cols-2\">\n        {scoreCards.map((p) => (\n          <div\n            key={p.userId}\n            className={`relative overflow-hidden rounded-2xl border p-4 transition-all ${p.isReady\n              ? \"border-amber-200 bg-amber-50/50 ring-1 ring-amber-500/20\"\n              : \"border-slate-200 bg-white\"\n              }`}\n          >\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center gap-3\">\n                <div className={`flex h-10 w-10 items-center justify-center rounded-full text-sm font-bold ${p.isReady ? \"bg-amber-100 text-amber-700\" : \"bg-slate-100 text-slate-500\"\n                  }`}>\n                  {p.label.charAt(0).toUpperCase()}\n                </div>\n                <div>\n                  <div className=\"font-bold text-slate-900\">\n                    {p.label} {p.isSelf && <span className=\"text-xs font-normal text-slate-500\">(You)</span>}\n                  </div>\n                  {p.subtitle && <div className=\"text-xs text-slate-500\">{p.subtitle}</div>}\n                </div>\n              </div>\n              {p.isReady ? (\n                <div className=\"flex items-center gap-1.5 rounded-full bg-amber-100 px-2.5 py-1 text-xs font-bold text-amber-700\">\n                  <CheckCircle2 className=\"h-3.5 w-3.5\" />\n                  Ready\n                </div>\n              ) : (\n                <div className=\"flex items-center gap-1.5 rounded-full bg-slate-100 px-2.5 py-1 text-xs font-medium text-slate-500\">\n                  <Timer className=\"h-3.5 w-3.5\" />\n                  Waiting\n                </div>\n              )}\n            </div>\n          </div>\n        ))}\n        {scoreCards.length === 0 && (\n          <div className=\"col-span-full flex flex-col items-center justify-center py-12 text-slate-400\">\n            <Users className=\"mb-2 h-8 w-8 opacity-50\" />\n            <p>Waiting for players to join...</p>\n          </div>\n        )}\n      </div>\n\n      <div className=\"flex flex-col items-center justify-center gap-4 border-t border-slate-100 pt-8\">\n        <div className=\"flex items-center gap-3\">\n          {toggleReady && (\n            <button\n              onClick={() => toggleReady(!selfPresence?.ready)}\n              className={`group relative flex items-center gap-2 overflow-hidden rounded-xl px-8 py-3 font-bold transition-all ${selfPresence?.ready\n                ? \"bg-slate-100 text-slate-600 hover:bg-slate-200\"\n                : \"bg-indigo-600 text-white shadow-lg shadow-indigo-500/30 hover:bg-indigo-500 hover:shadow-indigo-500/40\"\n                }`}\n            >\n              {selfPresence?.ready ? (\n                <>\n                  <XCircle className=\"h-5 w-5\" />\n                  Cancel Ready\n                </>\n              ) : (\n                <>\n                  <CheckCircle2 className=\"h-5 w-5\" />\n                  I&apos;m Ready\n                </>\n              )}\n            </button>\n          )}\n        </div>\n\n        <div className=\"text-xs font-medium text-slate-400\">\n          {lobbyArmed\n            ? \"Game starting in moments...\"\n            : allReady\n              ? \"All players ready! Starting soon...\"\n              : `Waiting for ${totalParticipants - readyCount} player(s) to ready up`\n          }\n        </div>\n\n        {leave && (\n          <button\n            onClick={leave}\n            className=\"flex items-center gap-2 text-sm text-slate-400 hover:text-rose-500 transition-colors mt-2\"\n          >\n            <LogOut className=\"h-4 w-4\" />\n            Leave Game\n          </button>\n        )}\n      </div>\n    </div>\n  );\n\n  const renderCountdown = () => (\n    <div className=\"relative flex flex-col items-center justify-center py-12\">\n      <div className=\"relative z-10 flex h-40 w-40 items-center justify-center rounded-full bg-white shadow-2xl ring-4 ring-amber-50\">\n        <span className=\"text-8xl font-black tracking-tighter text-amber-600\">\n          {Math.max(countdownSeconds ?? 0, 0)}\n        </span>\n      </div>\n      <div className=\"mt-8 text-center\">\n        <h3 className=\"text-2xl font-bold text-slate-900\">\n          {state.countdown?.reason === \"intermission\" ? \"Next Round\" : \"Get Ready!\"}\n        </h3>\n        <p className=\"text-slate-500\">\n          {state.countdown?.reason === \"intermission\" ? \"Prepare for the next question\" : \"The trivia battle is about to begin\"}\n        </p>\n      </div>\n    </div>\n  );\n\n  const renderRunning = () => (\n    <div className=\"grid gap-8 lg:grid-cols-[1fr_300px]\">\n      <div className=\"space-y-6\">\n        {/* Question Card */}\n        <div className=\"relative overflow-hidden rounded-3xl border border-slate-200 bg-white p-8 shadow-lg\">\n          <div className=\"mb-6 flex items-center justify-between\">\n            <div className=\"flex items-center gap-2 rounded-full bg-indigo-50 px-3 py-1 text-xs font-bold text-indigo-600\">\n              <Zap className=\"h-3.5 w-3.5\" />\n              Round {roundNumber}\n            </div>\n            {state.timeLimitMs && (\n              <div className={`flex items-center gap-2 rounded-full px-3 py-1 text-xs font-bold transition-colors ${roundSecondsLeft !== null && roundSecondsLeft <= 3\n                ? \"bg-rose-100 text-rose-600 animate-pulse\"\n                : \"bg-slate-100 text-slate-600\"\n                }`}>\n                <Clock className=\"h-3.5 w-3.5\" />\n                {roundSecondsLeft !== null ? `${roundSecondsLeft}s` : `${Math.round(state.timeLimitMs / 1000)}s`}\n              </div>\n            )}\n          </div>\n\n          <h3 className=\"mb-8 text-2xl font-bold leading-tight text-slate-900 md:text-3xl\">\n            {state.question || \"Loading question...\"}\n          </h3>\n\n          <div className=\"grid gap-3\">\n            {(state.options || []).map((opt, idx) => {\n              const isSelected = state.selectedIndex === idx;\n              const isCorrect = state.correctIndex === idx;\n              const showResult = state.correctIndex !== undefined;\n              const optionLabel = typeof opt === \"string\" && opt.trim().length > 0 ? opt.trim() : `Option ${idx + 1}`;\n\n              let cardClass = \"border-slate-200 bg-slate-50 hover:border-indigo-300 hover:bg-white\";\n              let textClass = \"text-slate-700\";\n              let badge: React.ReactNode = null;\n\n              if (showResult) {\n                if (isCorrect) {\n                  cardClass = \"border-emerald-500 bg-emerald-50 ring-1 ring-emerald-500\";\n                  textClass = \"text-emerald-900 font-bold\";\n                  badge = (\n                    <span className=\"flex items-center gap-1 text-sm font-semibold text-emerald-600\">\n                      <CheckCircle2 className=\"h-5 w-5\" />\n                      Correct\n                    </span>\n                  );\n                } else if (isSelected) {\n                  cardClass = \"border-rose-500 bg-rose-50 ring-1 ring-rose-500\";\n                  textClass = \"text-rose-900 font-bold\";\n                  badge = (\n                    <span className=\"flex items-center gap-1 text-sm font-semibold text-rose-600\">\n                      <XCircle className=\"h-5 w-5\" />\n                      Wrong\n                    </span>\n                  );\n                } else {\n                  cardClass = \"border-slate-100 bg-slate-50 opacity-50\";\n                }\n              } else if (isSelected) {\n                cardClass = \"border-indigo-600 bg-indigo-50 ring-1 ring-indigo-600\";\n                textClass = \"text-indigo-900 font-bold\";\n              }\n\n              return (\n                <button\n                  key={idx}\n                  onClick={() => !state.locked && selectOption(idx)}\n                  disabled={Boolean(state.locked) || Boolean(blurActive)}\n                  aria-label={optionLabel}\n                  className={`group relative flex w-full items-center justify-between rounded-xl border-2 p-4 text-left transition-all ${cardClass}`}\n                >\n                  <span className={`text-lg ${textClass}`}>{opt}</span>\n                  {badge}\n                </button>\n              );\n            })}\n            {state.locked ? (\n              <div className=\"mt-4 inline-flex items-center gap-2 rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-slate-500\">\n                <Lock className=\"h-3.5 w-3.5\" />\n                Locked\n              </div>\n            ) : null}\n          </div>\n\n          {/* Progress Bar */}\n          <meter\n            min={0}\n            max={1}\n            value={progress}\n            className=\"absolute bottom-0 left-0 h-1.5 w-full appearance-none bg-slate-100 [&::-webkit-meter-bar]:bg-slate-100 [&::-webkit-meter-optimum-value]:bg-indigo-600 [&::-webkit-meter-suboptimum-value]:bg-indigo-600 [&::-webkit-meter-even-less-good-value]:bg-indigo-600 [&::-moz-meter-bar]:bg-slate-100 [&:-moz-meter-optimum]:bg-indigo-600\"\n          />\n        </div>\n      </div>\n\n      {/* Live Leaderboard */}\n      <div className=\"rounded-2xl border border-slate-200 bg-slate-50/50 p-4\">\n        <h3 className=\"mb-4 text-xs font-bold uppercase tracking-wider text-slate-500\">Live Standings</h3>\n        <div className=\"space-y-2\">\n          {scoreCards\n            .sort((a, b) => (b.score ?? 0) - (a.score ?? 0))\n            .map((p, i) => (\n              <div key={p.userId} className=\"flex items-center justify-between rounded-xl bg-white p-3 shadow-sm ring-1 ring-slate-900/5\">\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"flex h-6 w-6 items-center justify-center rounded-full bg-slate-100 text-xs font-bold text-slate-600\">\n                    {i + 1}\n                  </div>\n                  <div>\n                    <div className=\"text-sm font-bold text-slate-900\">{p.label}</div>\n                    <div className=\"text-xs text-slate-500\">{p.score} pts</div>\n                  </div>\n                </div>\n                {i === 0 && p.score > 0 && <Trophy className=\"h-4 w-4 text-amber-400\" />}\n              </div>\n            ))}\n        </div>\n      </div>\n    </div>\n  );\n\n  const opponentLeft = state.leaveReason === 'opponent_left';\n\n  const renderResults = () => {\n    const selfUserId = self || authUser?.userId;\n    const didWin = state.winnerUserId === selfUserId || state.tieBreakWinnerUserId === selfUserId;\n    const earnedPoints = (didWin || opponentLeft) ? 200 : 50;\n\n    return (\n      <div className=\"text-center\">\n        {/* Opponent Left Banner */}\n        {opponentLeft && (\n          <div className=\"mb-6 mx-auto max-w-md flex items-center gap-3 p-4 bg-amber-50 border border-amber-200 rounded-xl text-amber-800\">\n            <AlertTriangle className=\"h-5 w-5 text-amber-600 flex-shrink-0\" />\n            <div className=\"text-left\">\n              <p className=\"font-semibold\">Your opponent left the game</p>\n              <p className=\"text-sm text-amber-600\">You win by forfeit!</p>\n            </div>\n          </div>\n        )}\n\n        <div className=\"mb-8 inline-flex h-20 w-20 items-center justify-center rounded-full bg-amber-100 text-amber-600 ring-8 ring-amber-50\">\n          <Trophy className=\"h-10 w-10\" />\n        </div>\n\n        <h2 className=\"text-3xl font-bold text-slate-900\">\n          {opponentLeft ? \"You Win!\" : (didWin ? \"You Won!\" : \"Trivia Complete!\")}\n        </h2>\n\n        {!opponentLeft && state.tieBreakWinnerUserId ? (\n          <div className=\"mt-2 text-lg text-slate-600\">\n            <span className=\"font-bold text-amber-600\">{resolveName(state.tieBreakWinnerUserId)}</span> won by speed!\n            <p className=\"sr-only\">Winner by time advantage: {resolveName(state.tieBreakWinnerUserId)}</p>\n          </div>\n        ) : state.winnerUserId && !didWin ? (\n          <div className=\"mt-2 text-lg text-slate-600\">\n            <span className=\"font-bold text-amber-600\">{resolveName(state.winnerUserId)}</span> won the match!\n          </div>\n        ) : !didWin && !opponentLeft ? (\n          <div className=\"mt-2 text-lg text-slate-600\">It was a tie!</div>\n        ) : null}\n\n        {/* YOUR POINTS EARNED - Large prominent display */}\n        <div className=\"mt-8 mx-auto max-w-sm\">\n          <div className={`rounded-2xl p-6 ${didWin || opponentLeft\n            ? \"bg-gradient-to-br from-emerald-500 to-teal-600\"\n            : \"bg-gradient-to-br from-slate-600 to-slate-700\"\n            } text-white shadow-xl`}>\n            <div className=\"text-sm font-medium uppercase tracking-wider opacity-80\">\n              You Earned\n            </div>\n            <div className=\"mt-2 flex items-baseline justify-center gap-2\">\n              <span className=\"text-5xl font-black\">{earnedPoints}</span>\n              <span className=\"text-xl font-semibold opacity-80\">points</span>\n            </div>\n            <div className=\"mt-3 flex items-center justify-center gap-2 text-sm opacity-90\">\n              {didWin || opponentLeft ? (\n                <>\n                  <CheckCircle2 className=\"h-4 w-4\" />\n                  <span>+1 Win added to your stats</span>\n                </>\n              ) : (\n                <>\n                  <XCircle className=\"h-4 w-4\" />\n                  <span>+1 Game added to your stats</span>\n                </>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* Final Standings */}\n        <div className=\"mx-auto mt-8 max-w-md space-y-3\">\n          <h3 className=\"text-xs font-bold uppercase tracking-wider text-slate-400 mb-4\">Final Standings</h3>\n          {scoreCards\n            .sort((a, b) => (b.score ?? 0) - (a.score ?? 0))\n            .map((p, i) => {\n              const tally = state.tally?.[p.userId];\n              const isWinner = p.userId === state.winnerUserId || p.userId === state.tieBreakWinnerUserId || (opponentLeft && p.isSelf);\n              const fixedPoints = isWinner ? 200 : 50;\n\n              return (\n                <div\n                  key={p.userId}\n                  className={`flex flex-col gap-2 rounded-xl border p-4 ${i === 0 ? \"border-emerald-200 bg-emerald-50/50\" : \"border-slate-200 bg-white\"\n                    } ${p.isSelf ? \"ring-2 ring-indigo-400 ring-offset-1\" : \"\"}`}\n                >\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center gap-4\">\n                      <span className={`text-lg font-bold ${i === 0 ? \"text-emerald-600\" : \"text-slate-400\"}`}>#{i + 1}</span>\n                      <div className=\"text-left\">\n                        <div className=\"font-bold text-slate-900\">\n                          {p.label} {p.isSelf && <span className=\"text-xs font-normal text-indigo-500\">(You)</span>}\n                        </div>\n                        <div className=\"text-xs text-slate-500\">{p.subtitle}</div>\n                      </div>\n                    </div>\n                    <div className=\"text-right\">\n                      <div className=\"font-mono text-lg font-bold text-slate-900\">{fixedPoints}</div>\n                      <div className=\"text-[10px] uppercase tracking-wider text-slate-400\">Points</div>\n                    </div>\n                  </div>\n\n                  {tally && (\n                    <div className=\"flex gap-4 border-t border-slate-200/50 pt-2 text-xs font-medium\">\n                      <span className=\"text-emerald-600\">{tally.correct} Correct</span>\n                      <span className=\"text-rose-600\">{tally.wrong} Wrong</span>\n                    </div>\n                  )}\n                </div>\n              );\n            })}\n        </div>\n\n        {onExpired && (\n          <button\n            onClick={onExpired}\n            className=\"mt-8 rounded-full bg-slate-900 px-6 py-2 text-sm font-bold text-white shadow-lg hover:bg-slate-800\"\n          >\n            Start New Game\n          </button>\n        )}\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Phase Indicator */}\n      <div className=\"flex items-center justify-between border-b border-slate-100 pb-6\">\n        <div className=\"flex items-center gap-2\">\n          <div className={`flex h-2.5 w-2.5 rounded-full ${state.phase === \"running\" ? \"animate-pulse bg-rose-500\" :\n            state.phase === \"countdown\" ? \"bg-amber-500\" :\n              state.phase === \"ended\" ? \"bg-emerald-500\" : \"bg-slate-300\"\n            }`} />\n          <span className=\"text-sm font-bold uppercase tracking-wider text-slate-500\">\n            {state.phase === \"countdown\" ? \"Starting...\" :\n              state.phase === \"running\" ? \"Trivia in Progress\" :\n                state.phase === \"ended\" ? \"Final Results\" : \"Lobby\"}\n          </span>\n        </div>\n\n        {state.phase === \"running\" && (\n          <div className=\"flex items-center gap-2 rounded-full bg-rose-50 px-3 py-1 text-xs font-bold text-rose-600\">\n            <div className=\"h-1.5 w-1.5 rounded-full bg-rose-600 animate-pulse\" />\n            LIVE\n          </div>\n        )}\n      </div>\n\n      {/* Main Content Area */}\n      <div className=\"min-h-[400px]\">\n        {state.phase === \"error\" || state.error ? (\n          <div className=\"flex flex-col items-center justify-center py-12 text-rose-600\">\n            <AlertCircle className=\"mb-4 h-12 w-12 opacity-20\" />\n            <p className=\"font-medium\">Connection Error</p>\n            <p className=\"text-sm opacity-80\">{state.error ?? \"Unknown error occurred\"}</p>\n            {onExpired && (\n              <button\n                onClick={onExpired}\n                className=\"mt-4 rounded-full bg-rose-100 px-4 py-2 text-xs font-bold text-rose-700 hover:bg-rose-200\"\n              >\n                Reset Session\n              </button>\n            )}\n          </div>\n        ) : countdownSeconds && blurActive ? (\n          renderCountdown()\n        ) : state.phase === \"running\" ? (\n          renderRunning()\n        ) : state.phase === \"ended\" ? (\n          renderResults()\n        ) : (\n          renderLobby()\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport const QuickTriviaPanel: React.FC<{ sessionId: string; onExpired?: () => void }> = ({ sessionId, onExpired }) => {\n  const controller = useQuickTriviaSession({ sessionId });\n  const expiredNotifiedRef = useRef(false);\n\n  useEffect(() => {\n    if (!onExpired) return;\n    const message = controller.state.error?.toLowerCase() ?? \"\";\n    const sessionGone = message.includes(\"no longer available\") || message.includes(\"session expired\");\n    if (sessionGone && !expiredNotifiedRef.current) {\n      expiredNotifiedRef.current = true;\n      onExpired();\n    } else if (!sessionGone) {\n      expiredNotifiedRef.current = false;\n    }\n  }, [controller.state.error, onExpired]);\n\n  return <QuickTriviaPanelView controller={controller} onExpired={onExpired} />;\n};\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\features\\activities\\components\\RockPaperScissorsPanel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\features\\activities\\components\\ScoreboardMini.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\features\\activities\\components\\SpeedTypingPanel.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'MyPointsBadge' is defined but never used.","line":8,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'selfScore' is assigned a value but never used.","line":413,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":413,"endColumn":18}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\nimport { UncopyableSnippet } from \"./UncopyableSnippet\";\nimport { useSpeedTypingSession, type LobbyParticipant } from \"../hooks/useSpeedTypingSession\";\nimport { attachTypingBoxGuards } from \"../guards/typingBoxGuards\";\nimport { useFriendIdentities } from \"@/hooks/social/use-friend-identities\";\nimport { readAuthUser, type AuthUser } from \"@/lib/auth-storage\";\nimport { Trophy, Timer, Users, CheckCircle2, XCircle, Play, AlertCircle, LogOut, AlertTriangle } from \"lucide-react\";\nimport { MyPointsBadge } from \"./MyPointsBadge\";\n\nexport const SpeedTypingPanel: React.FC<{ sessionId: string }> = ({ sessionId }) => {\n  const {\n    state,\n    typedText,\n    setTypedText,\n    metrics,\n    submitted,\n    submit,\n    onKeyDown,\n    markPasteDetected,\n    textSample,\n    toast: sessionToast,\n    readyUp,\n    unready,\n    leave,\n    startCountdown,\n    countdown,\n    selfUserId,\n  } = useSpeedTypingSession({ sessionId });\n\n  const { map: friendIdentities, authUser: friendAuthSnapshot } = useFriendIdentities();\n  const [authUser, setAuthUser] = useState<AuthUser | null>(() => friendAuthSnapshot ?? readAuthUser());\n  const [localToast, setLocalToast] = useState<string | null>(null);\n  const textAreaRef = useRef<HTMLTextAreaElement | null>(null);\n  const blockNextChangeRef = useRef(false);\n  const composingRef = useRef(false);\n\n  useEffect(() => {\n    setAuthUser(friendAuthSnapshot ?? readAuthUser());\n  }, [friendAuthSnapshot]);\n\n  useEffect(() => {\n    if (!localToast) return;\n    const id = setTimeout(() => setLocalToast(null), 2000);\n    return () => clearTimeout(id);\n  }, [localToast]);\n\n  useEffect(() => {\n    const ta = textAreaRef.current;\n    if (!ta) return;\n    const detach = attachTypingBoxGuards(ta);\n    return () => detach();\n  }, [markPasteDetected]);\n\n  const formatHandle = useCallback((value?: string | null) => {\n    const trimmed = value?.trim();\n    if (!trimmed) return null;\n    return trimmed.startsWith(\"@\") ? trimmed : `@${trimmed}`;\n  }, []);\n\n  const resolveDisplayName = useCallback(\n    (userId: string, extras?: { displayName?: string | null; handle?: string | null }) => {\n      if (authUser?.userId === userId) {\n        const personal = authUser.displayName?.trim();\n        return personal && personal.length > 0 ? personal : \"You\";\n      }\n      const friend = friendIdentities.get(userId);\n      if (friend) {\n        const friendly = friend.displayName?.trim();\n        if (friendly) return friendly;\n        const friendHandle = formatHandle(friend.handle);\n        if (friendHandle) return friendHandle;\n      }\n      const lobbyDisplay = extras?.displayName?.trim();\n      if (lobbyDisplay) return lobbyDisplay;\n      const lobbyHandle = formatHandle(extras?.handle);\n      if (lobbyHandle) return lobbyHandle;\n      return userId;\n    },\n    [authUser?.displayName, authUser?.userId, friendIdentities, formatHandle],\n  );\n\n  const resolveSubtitle = useCallback(\n    (userId: string, extras?: { handle?: string | null }) => {\n      if (authUser?.userId === userId) {\n        return formatHandle(authUser.handle) ?? undefined;\n      }\n      const friend = friendIdentities.get(userId);\n      const friendHandle = formatHandle(friend?.handle);\n      if (friendHandle) return friendHandle;\n      const fallbackHandle = formatHandle(extras?.handle);\n      return fallbackHandle ?? undefined;\n    },\n    [authUser?.handle, authUser?.userId, friendIdentities, formatHandle],\n  );\n\n  const participants: LobbyParticipant[] = useMemo(\n    () => state.lobby?.participants ?? [],\n    [state.lobby?.participants],\n  );\n\n  const participantMeta = useMemo(() => {\n    const meta = new Map<string, { label: string; subtitle?: string }>();\n    participants.forEach((p) => {\n      meta.set(p.userId, {\n        label: resolveDisplayName(p.userId, p),\n        subtitle: resolveSubtitle(p.userId, p),\n      });\n    });\n    return meta;\n  }, [participants, resolveDisplayName, resolveSubtitle]);\n\n  const hostUserId = participants[0]?.userId;\n  const isHost = hostUserId != null && hostUserId === selfUserId;\n  const readyCount = participants.filter((entry) => entry.ready).length;\n  const totalParticipants = participants.length;\n  const allReady = totalParticipants > 0 && readyCount === totalParticipants;\n  const selfPresence = participants.find((entry) => entry.userId === selfUserId);\n  const readyButtonDisabled =\n    state.phase === \"idle\" || state.phase === \"connecting\" || state.phase === \"ended\" || state.phase === \"error\";\n  const countdownSeconds = countdown?.seconds ?? null;\n  const countdownActive = state.phase === \"countdown\" && countdownSeconds !== null;\n  const lobbyArmed = Boolean(state.lobby?.ready);\n  const isConnecting = state.phase === \"connecting\" || state.phase === \"idle\";\n\n  const participantCards = useMemo(() => {\n    type Entry = { userId: string; score?: number; displayName?: string | null; handle?: string | null };\n    const list: Entry[] =\n      state.scoreboard && state.scoreboard.length > 0\n        ? state.scoreboard\n        : participants.map((p) => ({ userId: p.userId, score: 0 }));\n    return list.map((entry) => ({\n      userId: entry.userId,\n      label: participantMeta.get(entry.userId)?.label ?? resolveDisplayName(entry.userId, entry),\n      subtitle: participantMeta.get(entry.userId)?.subtitle ?? resolveSubtitle(entry.userId, entry),\n      score: entry.score ?? 0,\n      isReady: participants.find(p => p.userId === entry.userId)?.ready ?? false,\n      isSelf: entry.userId === selfUserId,\n    }));\n  }, [participantMeta, participants, resolveDisplayName, resolveSubtitle, state.scoreboard, selfUserId]);\n\n  const winnerEntry = useMemo(() => {\n    if (state.winnerUserId) {\n      return state.scoreboard?.find((entry) => entry.userId === state.winnerUserId) ?? null;\n    }\n    return null;\n  }, [state.scoreboard, state.winnerUserId]);\n\n  const handleReadyClick = () => {\n    if (readyButtonDisabled) return;\n    if (selfPresence?.ready) {\n      void unready();\n    } else {\n      void readyUp();\n    }\n  };\n\n  const handleStartClick = () => {\n    if (!isHost || !allReady || lobbyArmed || state.phase !== \"lobby\") return;\n    void startCountdown();\n  };\n\n  const toast = sessionToast || localToast;\n\n  // --- Render Helpers ---\n\n  const renderLobby = () => (\n    <div className=\"space-y-8\">\n      <div className=\"grid gap-4 sm:grid-cols-2\">\n        {participantCards.map((p) => (\n          <div\n            key={p.userId}\n            className={`relative overflow-hidden rounded-2xl border p-4 transition-all ${p.isReady\n              ? \"border-emerald-200 bg-emerald-50/50 ring-1 ring-emerald-500/20\"\n              : \"border-slate-200 bg-white\"\n              }`}\n          >\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center gap-3\">\n                <div className={`flex h-10 w-10 items-center justify-center rounded-full text-sm font-bold ${p.isReady ? \"bg-emerald-100 text-emerald-700\" : \"bg-slate-100 text-slate-500\"\n                  }`}>\n                  {p.label.charAt(0).toUpperCase()}\n                </div>\n                <div>\n                  <div className=\"font-bold text-slate-900\">\n                    {p.label} {p.isSelf && <span className=\"text-xs font-normal text-slate-500\">(You)</span>}\n                  </div>\n                  {p.subtitle && <div className=\"text-xs text-slate-500\">{p.subtitle}</div>}\n                </div>\n              </div>\n              {p.isReady ? (\n                <div className=\"flex items-center gap-1.5 rounded-full bg-emerald-100 px-2.5 py-1 text-xs font-bold text-emerald-700\">\n                  <CheckCircle2 className=\"h-3.5 w-3.5\" />\n                  Ready\n                </div>\n              ) : (\n                <div className=\"flex items-center gap-1.5 rounded-full bg-slate-100 px-2.5 py-1 text-xs font-medium text-slate-500\">\n                  <Timer className=\"h-3.5 w-3.5\" />\n                  Waiting\n                </div>\n              )}\n            </div>\n          </div>\n        ))}\n        {participantCards.length === 0 && (\n          <div className=\"col-span-full flex flex-col items-center justify-center py-12 text-slate-400\">\n            <Users className=\"mb-2 h-8 w-8 opacity-50\" />\n            <p>Waiting for players to join...</p>\n          </div>\n        )}\n      </div>\n\n      <div className=\"flex flex-col items-center justify-center gap-4 border-t border-slate-100 pt-8\">\n        <div className=\"flex items-center gap-3\">\n          <button\n            onClick={handleReadyClick}\n            disabled={readyButtonDisabled}\n            className={`group relative flex items-center gap-2 overflow-hidden rounded-xl px-8 py-3 font-bold transition-all ${selfPresence?.ready\n              ? \"bg-slate-100 text-slate-600 hover:bg-slate-200\"\n              : \"bg-indigo-600 text-white shadow-lg shadow-indigo-500/30 hover:bg-indigo-500 hover:shadow-indigo-500/40\"\n              }`}\n          >\n            {selfPresence?.ready ? (\n              <>\n                <XCircle className=\"h-5 w-5\" />\n                Cancel Ready\n              </>\n            ) : (\n              <>\n                <CheckCircle2 className=\"h-5 w-5\" />\n                I&apos;m Ready\n              </>\n            )}\n          </button>\n\n          {isHost && (\n            <button\n              onClick={handleStartClick}\n              disabled={!allReady || lobbyArmed}\n              className=\"flex items-center gap-2 rounded-xl bg-emerald-600 px-8 py-3 font-bold text-white shadow-lg shadow-emerald-500/30 transition-all hover:bg-emerald-500 hover:shadow-emerald-500/40 disabled:cursor-not-allowed disabled:bg-slate-200 disabled:text-slate-400 disabled:shadow-none\"\n            >\n              <Play className=\"h-5 w-5 fill-current\" />\n              {lobbyArmed ? \"Starting...\" : \"Start Duel\"}\n            </button>\n          )}\n        </div>\n\n        <div className=\"text-xs font-medium text-slate-400\">\n          {lobbyArmed\n            ? \"Game starting in moments...\"\n            : allReady\n              ? isHost ? \"All players ready! You can start.\" : \"Waiting for host to start...\"\n              : `Waiting for ${totalParticipants - readyCount} player(s) to ready up`\n          }\n        </div>\n\n        <button\n          onClick={leave}\n          className=\"flex items-center gap-2 text-sm text-slate-400 hover:text-rose-500 transition-colors mt-2\"\n        >\n          <LogOut className=\"h-4 w-4\" />\n          Leave Game\n        </button>\n      </div>\n    </div>\n  );\n\n  const renderCountdown = () => (\n    <div className=\"relative flex flex-col items-center justify-center py-12\">\n      <div className=\"relative z-10 flex h-40 w-40 items-center justify-center rounded-full bg-white shadow-2xl ring-4 ring-indigo-50\">\n        <span className=\"text-8xl font-black tracking-tighter text-indigo-600\">\n          {Math.max(countdownSeconds ?? 0, 0)}\n        </span>\n      </div>\n      <div className=\"mt-8 text-center\">\n        <h3 className=\"text-2xl font-bold text-slate-900\">Get Ready!</h3>\n        <p className=\"text-slate-500\">Keep your fingers on the home row.</p>\n      </div>\n\n      {/* Blurred preview of text */}\n      <div className=\"mt-12 w-full max-w-2xl select-none opacity-30 blur-sm filter\">\n        <UncopyableSnippet\n          text={textSample}\n          widthPx={560}\n          font=\"14px ui-monospace, SFMono-Regular, Menlo, Consolas, monospace\"\n          lineHeight={20}\n          padding={12}\n          antiOcrNoise={false}\n        />\n      </div>\n    </div>\n  );\n\n  const renderRunning = () => (\n    <div className=\"grid gap-8 lg:grid-cols-[1fr_300px]\">\n      <div className=\"space-y-6\">\n        <div className=\"rounded-2xl border border-slate-200 bg-white p-1 shadow-sm\">\n          <UncopyableSnippet\n            text={textSample}\n            widthPx={560}\n            font=\"16px ui-monospace, SFMono-Regular, Menlo, Consolas, monospace\"\n            lineHeight={28}\n            padding={24}\n            antiOcrNoise={false}\n          />\n        </div>\n\n        <div className=\"relative\">\n          <textarea\n            ref={textAreaRef}\n            value={typedText}\n            id=\"typing-box\"\n            placeholder=\"Start typing...\"\n            className=\"h-40 w-full resize-none rounded-2xl border-2 border-indigo-100 bg-indigo-50/30 p-6 font-mono text-lg leading-relaxed text-slate-900 placeholder:text-slate-400 focus:border-indigo-500 focus:bg-white focus:outline-none focus:ring-4 focus:ring-indigo-500/10\"\n            onCompositionStart={() => { composingRef.current = true; }}\n            onCompositionEnd={() => { composingRef.current = false; }}\n            onChange={(e) => {\n              if (blockNextChangeRef.current) {\n                blockNextChangeRef.current = false;\n                e.currentTarget.value = typedText;\n                return;\n              }\n              const next = e.currentTarget.value;\n              const delta = next.length - typedText.length;\n              if (!composingRef.current) {\n                if (delta > 1 || (delta === 0 && next !== typedText)) {\n                  setLocalToast(\"Paste blocked\");\n                  markPasteDetected();\n                  e.currentTarget.value = typedText;\n                  return;\n                }\n              }\n              setTypedText(next);\n            }}\n            onKeyDown={(e) => {\n              if ((e.ctrlKey || e.metaKey) && (e.key === \"v\" || e.key === \"V\" || e.key === \"Insert\")) {\n                e.preventDefault();\n                setLocalToast(\"Paste blocked\");\n                markPasteDetected();\n                blockNextChangeRef.current = true;\n              }\n              onKeyDown(e);\n            }}\n            onPaste={(e) => {\n              e.preventDefault();\n              markPasteDetected();\n              setLocalToast(\"Paste blocked\");\n              blockNextChangeRef.current = true;\n            }}\n            disabled={submitted}\n            spellCheck={false}\n            autoComplete=\"off\"\n            autoCorrect=\"off\"\n            autoCapitalize=\"off\"\n            data-gramm=\"false\"\n            data-gramm_editor=\"false\"\n          />\n\n          <div className=\"mt-4 flex items-center justify-between\">\n            <div className=\"flex gap-6 text-sm font-medium text-slate-600\">\n              <div className=\"flex flex-col\">\n                <span className=\"text-[10px] uppercase tracking-wider text-slate-400\">WPM</span>\n                <span className=\"text-xl font-bold text-slate-900\">{metrics.wpm.toFixed(1)}</span>\n              </div>\n              <div className=\"flex flex-col\">\n                <span className=\"text-[10px] uppercase tracking-wider text-slate-400\">Accuracy</span>\n                <span className=\"text-xl font-bold text-slate-900\">{(metrics.accuracy * 100).toFixed(0)}%</span>\n              </div>\n              <div className=\"flex flex-col\">\n                <span className=\"text-[10px] uppercase tracking-wider text-slate-400\">Progress</span>\n                <span className=\"text-xl font-bold text-slate-900\">{(metrics.progress * 100).toFixed(0)}%</span>\n              </div>\n            </div>\n\n            <button\n              onClick={submit}\n              disabled={submitted}\n              className=\"rounded-xl bg-indigo-600 px-6 py-2.5 text-sm font-bold text-white shadow-lg shadow-indigo-500/20 transition-all hover:bg-indigo-500 hover:shadow-indigo-500/30 disabled:cursor-not-allowed disabled:bg-slate-200 disabled:text-slate-400 disabled:shadow-none\"\n            >\n              {submitted ? \"Submitted\" : \"Submit Result\"}\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Live Leaderboard */}\n      <div className=\"rounded-2xl border border-slate-200 bg-slate-50/50 p-4\">\n        <h3 className=\"mb-4 text-xs font-bold uppercase tracking-wider text-slate-500\">Live Standings</h3>\n        <div className=\"space-y-2\">\n          {participantCards\n            .sort((a, b) => (b.score ?? 0) - (a.score ?? 0))\n            .map((p, i) => (\n              <div key={p.userId} className=\"flex items-center justify-between rounded-xl bg-white p-3 shadow-sm ring-1 ring-slate-900/5\">\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"flex h-6 w-6 items-center justify-center rounded-full bg-slate-100 text-xs font-bold text-slate-600\">\n                    {i + 1}\n                  </div>\n                  <div>\n                    <div className=\"text-sm font-bold text-slate-900\">{p.label}</div>\n                    <div className=\"text-xs text-slate-500\">{p.score} pts</div>\n                  </div>\n                </div>\n                {i === 0 && p.score > 0 && <Trophy className=\"h-4 w-4 text-amber-400\" />}\n              </div>\n            ))}\n        </div>\n      </div>\n    </div>\n  );\n\n  const opponentLeft = state.leaveReason === 'opponent_left';\n\n  // Find the current user's score from the results\n  const selfScore = useMemo(() => {\n    const selfEntry = participantCards.find(p => p.isSelf);\n    return selfEntry?.score ?? 0;\n  }, [participantCards]);\n\n  const didWin = useMemo(() => {\n    if (!state.winnerUserId) return false;\n    return state.winnerUserId === selfUserId;\n  }, [state.winnerUserId, selfUserId]);\n\n  // Fixed points for leaderboard: 200 for winner (50 played + 150 win bonus), 50 for loser\n  const earnedPoints = (didWin || opponentLeft) ? 200 : 50;\n\n  const renderResults = () => (\n    <div className=\"text-center\">\n      {/* Opponent Left Banner */}\n      {opponentLeft && (\n        <div className=\"mb-6 mx-auto max-w-md flex items-center gap-3 p-4 bg-amber-50 border border-amber-200 rounded-xl text-amber-800\">\n          <AlertTriangle className=\"h-5 w-5 text-amber-600 flex-shrink-0\" />\n          <div className=\"text-left\">\n            <p className=\"font-semibold\">Your opponent left the game</p>\n            <p className=\"text-sm text-amber-600\">You win by forfeit!</p>\n          </div>\n        </div>\n      )}\n\n      {/* Trophy Icon */}\n      <div className={`mb-4 inline-flex h-20 w-20 items-center justify-center rounded-full ring-8 ${didWin || opponentLeft\n        ? \"bg-emerald-100 text-emerald-600 ring-emerald-50\"\n        : \"bg-rose-100 text-rose-600 ring-rose-50\"\n        }`}>\n        <Trophy className=\"h-10 w-10\" />\n      </div>\n\n      {/* Win/Loss Status */}\n      <h2 className=\"text-3xl font-bold text-slate-900\">\n        {opponentLeft ? \"You Win!\" : didWin ? \"Victory!\" : \"Game Over\"}\n      </h2>\n\n      {!opponentLeft && winnerEntry ? (\n        <div className=\"mt-2 text-lg text-slate-600\">\n          <span className=\"font-bold text-emerald-600\">{resolveDisplayName(winnerEntry.userId, winnerEntry)}</span> won the match!\n        </div>\n      ) : !opponentLeft && !didWin ? (\n        <div className=\"mt-2 text-lg text-slate-600\">Better luck next time!</div>\n      ) : null}\n\n      {/* YOUR POINTS EARNED - Large prominent display */}\n      <div className=\"mt-8 mx-auto max-w-sm\">\n        <div className={`rounded-2xl p-6 ${didWin || opponentLeft\n          ? \"bg-gradient-to-br from-emerald-500 to-teal-600\"\n          : \"bg-gradient-to-br from-slate-600 to-slate-700\"\n          } text-white shadow-xl`}>\n          <div className=\"text-sm font-medium uppercase tracking-wider opacity-80\">\n            You Earned\n          </div>\n          <div className=\"mt-2 flex items-baseline justify-center gap-2\">\n            <span className=\"text-5xl font-black\">{earnedPoints}</span>\n            <span className=\"text-xl font-semibold opacity-80\">points</span>\n          </div>\n          <div className=\"mt-3 flex items-center justify-center gap-2 text-sm opacity-90\">\n            {didWin || opponentLeft ? (\n              <>\n                <CheckCircle2 className=\"h-4 w-4\" />\n                <span>+1 Win added to your stats</span>\n              </>\n            ) : (\n              <>\n                <XCircle className=\"h-4 w-4\" />\n                <span>+1 Game played</span>\n              </>\n            )}\n          </div>\n        </div>\n      </div>\n\n      {/* All Participants Scores */}\n      <div className=\"mx-auto mt-8 max-w-md space-y-3\">\n        <h3 className=\"text-xs font-bold uppercase tracking-wider text-slate-400 mb-4\">Final Standings</h3>\n        {participantCards\n          .sort((a, b) => (b.score ?? 0) - (a.score ?? 0))\n          .map((p, i) => {\n            // Calculate fixed leaderboard points for each participant\n            const isWinner = p.userId === state.winnerUserId || (opponentLeft && p.isSelf);\n            const fixedPoints = isWinner ? 200 : 50;\n\n            return (\n              <div\n                key={p.userId}\n                className={`flex items-center justify-between rounded-xl border p-4 ${i === 0\n                  ? \"border-emerald-200 bg-emerald-50/50\"\n                  : \"border-slate-200 bg-white\"\n                  } ${p.isSelf ? \"ring-2 ring-indigo-400 ring-offset-1\" : \"\"}`}\n              >\n                <div className=\"flex items-center gap-4\">\n                  <span className={`text-lg font-bold ${i === 0 ? \"text-emerald-600\" : \"text-slate-400\"}`}>#{i + 1}</span>\n                  <div className=\"text-left\">\n                    <div className=\"font-bold text-slate-900\">\n                      {p.label} {p.isSelf && <span className=\"text-xs font-normal text-indigo-500\">(You)</span>}\n                    </div>\n                    <div className=\"text-xs text-slate-500\">{p.subtitle}</div>\n                  </div>\n                </div>\n                <div className=\"text-right\">\n                  <div className=\"font-mono text-lg font-bold text-slate-900\">{fixedPoints}</div>\n                  <div className=\"text-[10px] uppercase tracking-wider text-slate-400\">Points</div>\n                </div>\n              </div>\n            );\n          })}\n      </div>\n    </div>\n  );\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Phase Indicator */}\n      <div className=\"flex items-center justify-between border-b border-slate-100 pb-6\">\n        <div className=\"flex items-center gap-2\">\n          <div className={`flex h-2.5 w-2.5 rounded-full ${state.phase === \"running\" ? \"animate-pulse bg-rose-500\" :\n            state.phase === \"countdown\" ? \"bg-amber-500\" :\n              state.phase === \"ended\" ? \"bg-emerald-500\" :\n                isConnecting ? \"animate-pulse bg-slate-400\" : \"bg-slate-300\"\n            }`} />\n          <span className=\"text-sm font-bold uppercase tracking-wider text-slate-500\">\n            {isConnecting\n              ? \"Connecting...\"\n              : state.phase === \"countdown\"\n                ? \"Starting...\"\n                : state.phase === \"running\"\n                  ? \"Duel in Progress\"\n                  : state.phase === \"ended\"\n                    ? \"Final Results\"\n                    : \"Lobby\"}\n          </span>\n        </div>\n\n        {state.phase === \"running\" && (\n          <div className=\"flex items-center gap-2 rounded-full bg-rose-50 px-3 py-1 text-xs font-bold text-rose-600\">\n            <div className=\"h-1.5 w-1.5 rounded-full bg-rose-600 animate-pulse\" />\n            LIVE\n          </div>\n        )}\n      </div>\n\n      {/* Main Content Area */}\n      <div className=\"min-h-[400px]\">\n        {state.phase === \"error\" ? (\n          <div className=\"flex flex-col items-center justify-center py-12 text-rose-600\">\n            <AlertCircle className=\"mb-4 h-12 w-12 opacity-20\" />\n            <p className=\"font-medium\">Connection Error</p>\n            <p className=\"text-sm opacity-80\">{state.error ?? \"Unknown error occurred\"}</p>\n          </div>\n        ) : isConnecting ? (\n          <div className=\"flex flex-col items-center justify-center py-12 text-slate-500\">\n            <div className=\"mb-4 inline-flex h-12 w-12 items-center justify-center rounded-full bg-slate-100 text-slate-500\">\n              <Timer className=\"h-5 w-5\" />\n            </div>\n            <p className=\"text-base font-semibold text-slate-700\">Connecting to session...</p>\n            <p className=\"text-sm text-slate-500\">Hang tight while we sync your duel lobby.</p>\n          </div>\n        ) : countdownActive ? (\n          renderCountdown()\n        ) : state.phase === \"running\" ? (\n          renderRunning()\n        ) : state.phase === \"ended\" ? (\n          renderResults()\n        ) : (\n          renderLobby()\n        )}\n      </div>\n\n      {toast && (\n        <div className=\"fixed bottom-8 left-1/2 -translate-x-1/2 transform rounded-full bg-slate-900/90 px-6 py-3 text-sm font-medium text-white shadow-xl backdrop-blur-sm transition-all animate-in fade-in slide-in-from-bottom-4\">\n          {toast}\n        </div>\n      )}\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\features\\activities\\components\\StoryBuilderPanel.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'MyPointsBadge' is defined but never used.","line":11,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'winnerUserId' is assigned a value but never used.","line":25,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":25,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState, useEffect, useRef } from \"react\";\r\nimport { Loader2, User, Send, BookOpen, PenTool, Star, Trophy, Check, Heart, LogOut, AlertTriangle } from \"lucide-react\";\r\nimport { useStoryBuilderSession } from \"@/app/features/activities/hooks/useStoryBuilderSession\";\r\nimport { fetchFriends } from \"@/lib/social\";\r\nimport { readAuthUser } from \"@/lib/auth-storage\";\r\nimport { getDemoUserId } from \"@/lib/env\";\r\nimport { motion } from \"framer-motion\";\r\nimport clsx from \"clsx\";\r\nimport { MyPointsBadge } from \"./MyPointsBadge\";\r\n\r\nexport function StoryBuilderPanel({ sessionId }: { sessionId: string }) {\r\n    const { state, toggleReady, submitParagraph, voteParagraph, leave, selfId } = useStoryBuilderSession(sessionId);\r\n    const [inputText, setInputText] = useState(\"\");\r\n    const [userNames, setUserNames] = useState<Record<string, string>>({});\r\n    const [showGenderModal, setShowGenderModal] = useState(false);\r\n    const scrollRef = useRef<HTMLDivElement>(null);\r\n\r\n    const {\r\n        status,\r\n        participants,\r\n        paragraphs,\r\n        currentTurnUserId,\r\n        winnerUserId,\r\n        connected,\r\n        error,\r\n        leaveReason\r\n    } = state;\r\n\r\n    const handleReadyClick = () => {\r\n        const me = participants.find(p => p.userId === selfId);\r\n        if (me?.ready) {\r\n            toggleReady(); // Un-ready\r\n        } else {\r\n            setShowGenderModal(true);\r\n        }\r\n    };\r\n\r\n    const handleGenderSelect = (gender: 'boy' | 'girl') => {\r\n        toggleReady(gender);\r\n        setShowGenderModal(false);\r\n    };\r\n\r\n    // Fetch friends to resolve names\r\n    useEffect(() => {\r\n        const loadNames = async () => {\r\n            try {\r\n                const user = readAuthUser();\r\n                const userId = user?.userId || getDemoUserId();\r\n                const friends = await fetchFriends(userId, user?.campusId || null, \"accepted\");\r\n\r\n                const names: Record<string, string> = {};\r\n                friends.forEach(f => {\r\n                    names[f.friend_id] = f.friend_display_name || f.friend_handle || `User ${f.friend_id.slice(0, 4)}`;\r\n                });\r\n\r\n                // Also set self name if available\r\n                if (user?.displayName) {\r\n                    names[userId] = user.displayName;\r\n                }\r\n\r\n                setUserNames(names);\r\n            } catch (e) {\r\n                console.error(\"Failed to load friend names\", e);\r\n            }\r\n        };\r\n        loadNames();\r\n    }, []);\r\n\r\n    const getDisplayName = (userId: string) => {\r\n        if (userId === selfId) return \"You\";\r\n        return userNames[userId] || `User ${userId.slice(0, 4)}`;\r\n    };\r\n\r\n    // Auto-scroll to bottom when paragraphs change\r\n    useEffect(() => {\r\n        if (scrollRef.current) {\r\n            scrollRef.current.scrollTop = scrollRef.current.scrollHeight;\r\n        }\r\n    }, [paragraphs]);\r\n\r\n    if (!connected) {\r\n        return (\r\n            <div className=\"flex h-96 items-center justify-center\">\r\n                <div className=\"flex flex-col items-center gap-3 text-slate-500\">\r\n                    <Loader2 className=\"h-8 w-8 animate-spin text-violet-600\" />\r\n                    <p className=\"text-sm font-medium\">Connecting to story...</p>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (error) {\r\n        return (\r\n            <div className=\"flex h-96 items-center justify-center\">\r\n                <div className=\"rounded-lg bg-rose-50 p-4 text-center text-rose-600\">\r\n                    <p className=\"font-semibold\">Something went wrong</p>\r\n                    <p className=\"text-sm\">{error}</p>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const me = participants.find(p => p.userId === selfId);\r\n    const isMyTurn = currentTurnUserId === selfId;\r\n\r\n    // Lobby Phase\r\n    if (status === 'pending' || status === 'countdown') {\r\n        const storyPrompt = state.storyPrompt;\r\n\r\n        return (\r\n            <div className=\"flex flex-col items-center justify-center gap-8 py-12 text-center max-w-2xl mx-auto\">\r\n                <div className=\"flex h-24 w-24 items-center justify-center rounded-full bg-violet-50 text-violet-600 shadow-inner\">\r\n                    <BookOpen className=\"h-12 w-12\" />\r\n                </div>\r\n\r\n                <div className=\"space-y-2\">\r\n                    <h2 className=\"text-3xl font-bold text-slate-900\">Story Builder</h2>\r\n                    <p className=\"text-slate-600\">Collaboratively write a story, then vote on the best parts!</p>\r\n                </div>\r\n\r\n                <div className=\"w-full grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n                    {participants.map(p => (\r\n                        <div key={p.userId} className={clsx(\r\n                            \"flex items-center justify-between p-4 rounded-xl border transition-all\",\r\n                            p.ready ? \"bg-emerald-50 border-emerald-200\" : \"bg-white border-slate-200\"\r\n                        )}>\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <div className=\"h-10 w-10 rounded-full bg-slate-100 flex items-center justify-center\">\r\n                                    <User className=\"h-5 w-5 text-slate-500\" />\r\n                                </div>\r\n                                <span className=\"font-medium text-slate-900\">\r\n                                    {getDisplayName(p.userId)}\r\n                                </span>\r\n                            </div>\r\n                            {p.ready && <Check className=\"h-5 w-5 text-emerald-600\" />}\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n\r\n                {\r\n                    status === 'countdown' ? (\r\n                        <div className=\"flex flex-col gap-6 items-center\">\r\n                            <div className=\"text-2xl font-bold text-violet-600 animate-pulse\">\r\n                                Starting soon...\r\n                            </div>\r\n                            {storyPrompt && (\r\n                                <div className=\"w-full p-6 rounded-2xl bg-gradient-to-br from-violet-50 to-rose-50 border border-violet-100 text-left animate-in fade-in slide-in-from-bottom duration-500\">\r\n                                    <div className=\"flex items-center gap-2 mb-3\">\r\n                                        <Heart className=\"h-4 w-4 text-rose-500\" />\r\n                                        <span className=\"text-xs font-bold uppercase tracking-wider text-violet-600\">Today&apos;s Theme</span>\r\n                                    </div>\r\n                                    <h3 className=\"text-xl font-bold text-slate-900 mb-2\">{storyPrompt.title}</h3>\r\n                                    <p className=\"text-sm font-serif text-slate-600 italic leading-relaxed\">\r\n                                        &ldquo;{storyPrompt.opening}&rdquo;\r\n                                    </p>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"flex flex-col gap-3 items-center\">\r\n                            <button\r\n                                onClick={handleReadyClick}\r\n                                className={clsx(\r\n                                    \"rounded-2xl px-8 py-4 text-lg font-bold text-white shadow-lg transition-all transform hover:scale-105 active:scale-95\",\r\n                                    me?.ready ? \"bg-slate-400 hover:bg-slate-500\" : \"bg-violet-600 hover:bg-violet-500\"\r\n                                )}\r\n                            >\r\n                                {me?.ready ? \"Waiting for others...\" : \"I'm Ready!\"}\r\n                            </button>\r\n                            <button\r\n                                onClick={leave}\r\n                                className=\"flex items-center gap-2 text-sm text-slate-500 hover:text-rose-600 transition-colors\"\r\n                            >\r\n                                <LogOut className=\"h-4 w-4\" />\r\n                                Leave Story\r\n                            </button>\r\n                        </div>\r\n                    )\r\n                }\r\n\r\n                {/* Gender Selection Modal */}\r\n                {\r\n                    showGenderModal && (\r\n                        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4\">\r\n                            <div className=\"w-full max-w-md rounded-3xl bg-white p-8 shadow-2xl animate-in fade-in zoom-in duration-200\">\r\n                                <h3 className=\"text-2xl font-bold text-slate-900 mb-2 text-center\">Choose Your Character</h3>\r\n                                <p className=\"text-slate-600 text-center mb-8\">This helps us pick the perfect story theme for you!</p>\r\n\r\n                                <div className=\"grid grid-cols-2 gap-4 mb-6\">\r\n                                    <button\r\n                                        onClick={() => handleGenderSelect('boy')}\r\n                                        className=\"flex flex-col items-center gap-4 p-6 rounded-2xl border-2 border-slate-100 hover:border-blue-500 hover:bg-blue-50 transition-all group\"\r\n                                    >\r\n                                        <div className=\"h-16 w-16 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 group-hover:scale-110 transition-transform\">\r\n                                            <User className=\"h-8 w-8\" />\r\n                                        </div>\r\n                                        <span className=\"font-bold text-slate-900 group-hover:text-blue-700\">Boy</span>\r\n                                    </button>\r\n\r\n                                    <button\r\n                                        onClick={() => handleGenderSelect('girl')}\r\n                                        className=\"flex flex-col items-center gap-4 p-6 rounded-2xl border-2 border-slate-100 hover:border-pink-500 hover:bg-pink-50 transition-all group\"\r\n                                    >\r\n                                        <div className=\"h-16 w-16 rounded-full bg-pink-100 flex items-center justify-center text-pink-600 group-hover:scale-110 transition-transform\">\r\n                                            <User className=\"h-8 w-8\" />\r\n                                        </div>\r\n                                        <span className=\"font-bold text-slate-900 group-hover:text-pink-700\">Girl</span>\r\n                                    </button>\r\n                                </div>\r\n\r\n                                <button\r\n                                    onClick={() => setShowGenderModal(false)}\r\n                                    className=\"w-full py-3 text-slate-500 font-medium hover:text-slate-800 transition-colors\"\r\n                                >\r\n                                    Cancel\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    )\r\n                }\r\n            </div >\r\n        );\r\n    }\r\n\r\n    // Writing Phase\r\n    if (status === 'writing') {\r\n        const storyPrompt = state.storyPrompt;\r\n\r\n        return (\r\n            <div className=\"flex flex-col h-[80vh] max-w-3xl mx-auto bg-white rounded-3xl shadow-xl overflow-hidden border border-slate-200\">\r\n                {/* Header */}\r\n                <div className=\"p-6 border-b border-slate-100 bg-slate-50/50 flex justify-between items-center\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <div className=\"p-2 bg-violet-100 rounded-lg text-violet-600\">\r\n                            <PenTool className=\"h-5 w-5\" />\r\n                        </div>\r\n                        <div>\r\n                            <h3 className=\"font-bold text-slate-900\">{storyPrompt?.title || \"Writing Phase\"}</h3>\r\n                            {storyPrompt?.opening && (\r\n                                <p className=\"text-xs text-slate-500 italic mb-1 max-w-md\">\r\n                                    &ldquo;{storyPrompt.opening}&rdquo;\r\n                                </p>\r\n                            )}\r\n                            <p className=\"text-xs font-medium text-violet-600\">\r\n                                {isMyTurn ? \"It's your turn to write!\" : `Waiting for ${getDisplayName(currentTurnUserId || \"\")}...`}\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-4\">\r\n                        <div className=\"text-sm font-medium text-slate-500\">\r\n                            Turn {paragraphs.length + 1} of {state.maxParagraphsPerUser * participants.length}\r\n                        </div>\r\n                        <button\r\n                            onClick={leave}\r\n                            className=\"flex items-center gap-1.5 text-xs text-slate-400 hover:text-rose-600 transition-colors px-2 py-1 rounded hover:bg-rose-50\"\r\n                        >\r\n                            <LogOut className=\"h-3.5 w-3.5\" />\r\n                            Leave\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Story Content */}\r\n                <div ref={scrollRef} className=\"flex-1 overflow-y-auto p-8 space-y-6 bg-slate-50/30\">\r\n                    {/* Story Opening Prompt */}\r\n                    {storyPrompt && (\r\n                        <div className=\"p-6 rounded-2xl bg-gradient-to-br from-violet-50 to-rose-50 border border-violet-100 shadow-sm\">\r\n                            <div className=\"flex items-center gap-2 mb-3\">\r\n                                <BookOpen className=\"h-4 w-4 text-violet-500\" />\r\n                                <span className=\"text-xs font-bold uppercase tracking-wider text-violet-600\">Story Prompt</span>\r\n                            </div>\r\n                            <p className=\"text-lg font-serif text-slate-800 leading-relaxed italic\">\r\n                                &ldquo;{storyPrompt.opening}&rdquo;\r\n                            </p>\r\n                            <p className=\"mt-3 text-xs text-slate-500\">Continue the story from here...</p>\r\n                        </div>\r\n                    )}\r\n\r\n                    {paragraphs.length === 0 && !storyPrompt && (\r\n                        <div className=\"text-center text-slate-400 italic py-10\">\r\n                            The page is blank. Start the story...\r\n                        </div>\r\n                    )}\r\n                    {paragraphs.map((p, idx) => (\r\n                        <motion.div\r\n                            key={idx}\r\n                            initial={{ opacity: 0, y: 20 }}\r\n                            animate={{ opacity: 1, y: 0 }}\r\n                            className={clsx(\r\n                                \"p-6 rounded-2xl border shadow-sm\",\r\n                                p.userId === selfId ? \"bg-violet-50 border-violet-100 ml-12\" : \"bg-white border-slate-100 mr-12\"\r\n                            )}\r\n                        >\r\n                            <p className=\"text-slate-800 leading-relaxed text-lg font-serif\">{p.text}</p>\r\n                            <div className=\"mt-3 flex justify-end\">\r\n                                <span className=\"text-xs font-medium text-slate-400 uppercase tracking-wider\">\r\n                                    {getDisplayName(p.userId)}\r\n                                </span>\r\n                            </div>\r\n                        </motion.div>\r\n                    ))}\r\n                </div>\r\n\r\n                {/* Input Area */}\r\n                <div className=\"p-6 bg-white border-t border-slate-100\">\r\n                    {isMyTurn ? (\r\n                        <div className=\"flex gap-4\">\r\n                            <textarea\r\n                                value={inputText}\r\n                                onChange={(e) => setInputText(e.target.value)}\r\n                                placeholder=\"Write the next part of the story...\"\r\n                                className=\"flex-1 p-4 rounded-xl border border-slate-200 focus:ring-2 focus:ring-violet-500 focus:border-transparent resize-none h-32 font-serif text-lg\"\r\n                                autoFocus\r\n                            />\r\n                            <button\r\n                                onClick={() => {\r\n                                    if (inputText.trim()) {\r\n                                        submitParagraph(inputText);\r\n                                        setInputText(\"\");\r\n                                    }\r\n                                }}\r\n                                disabled={!inputText.trim()}\r\n                                className=\"px-6 rounded-xl bg-violet-600 text-white font-bold hover:bg-violet-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex flex-col items-center justify-center gap-2\"\r\n                            >\r\n                                <Send className=\"h-5 w-5\" />\r\n                                <span>Send</span>\r\n                            </button>\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"flex items-center justify-center h-20 text-slate-400 italic bg-slate-50 rounded-xl border border-dashed border-slate-200\">\r\n                            Waiting for the next chapter...\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // Voting Phase\r\n    if (status === 'voting') {\r\n        return (\r\n            <div className=\"max-w-3xl mx-auto py-8 space-y-8\">\r\n                <div className=\"text-center space-y-2\">\r\n                    <h2 className=\"text-3xl font-bold text-slate-900\">Time to Vote!</h2>\r\n                    <p className=\"text-slate-600\">Rate each paragraph from 0 to 10.</p>\r\n                </div>\r\n\r\n                <div className=\"space-y-6\">\r\n                    {paragraphs.map((p, idx) => {\r\n                        const isMine = p.userId === selfId;\r\n                        const myVote = p.votes[selfId];\r\n\r\n                        return (\r\n                            <motion.div\r\n                                key={idx}\r\n                                initial={{ opacity: 0, y: 20 }}\r\n                                animate={{ opacity: 1, y: 0 }}\r\n                                transition={{ delay: idx * 0.1 }}\r\n                                className=\"bg-white p-6 rounded-2xl shadow-sm border border-slate-200\"\r\n                            >\r\n                                <p className=\"text-lg font-serif text-slate-800 mb-4\">{p.text}</p>\r\n\r\n                                <div className=\"flex items-center justify-between pt-4 border-t border-slate-100\">\r\n                                    <span className=\"text-xs font-bold text-slate-400 uppercase\">\r\n                                        {isMine ? \"Your Paragraph\" : `By ${getDisplayName(p.userId)}`}\r\n                                    </span>\r\n\r\n                                    {isMine ? (\r\n                                        <div className=\"text-sm text-slate-400 italic\">\r\n                                            You cannot vote on your own paragraph\r\n                                        </div>\r\n                                    ) : (\r\n                                        <div className=\"flex items-center gap-4\">\r\n                                            <span className=\"text-sm font-medium text-slate-600\">Score: {myVote ?? \"-\"}</span>\r\n                                            <div className=\"flex gap-1\">\r\n                                                {[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((score) => (\r\n                                                    <button\r\n                                                        key={score}\r\n                                                        onClick={() => voteParagraph(idx, score)}\r\n                                                        className={clsx(\r\n                                                            \"w-8 h-8 rounded-full text-xs font-bold transition-all\",\r\n                                                            myVote === score\r\n                                                                ? \"bg-violet-600 text-white scale-110 shadow-md\"\r\n                                                                : \"bg-slate-100 text-slate-600 hover:bg-slate-200\"\r\n                                                        )}\r\n                                                    >\r\n                                                        {score}\r\n                                                    </button>\r\n                                                ))}\r\n                                            </div>\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            </motion.div>\r\n                        );\r\n                    })}\r\n                </div>\r\n\r\n                <div className=\"text-center text-slate-500 text-sm\">\r\n                    Waiting for everyone to finish voting...\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // Ended Phase\r\n    // Ended Phase\r\n    if (status === 'ended') {\r\n        const sorted = [...participants].sort((a, b) => b.score - a.score);\r\n        const maxScore = sorted[0]?.score ?? 0;\r\n        const winners = participants.filter(p => p.score === maxScore && maxScore > 0);\r\n        const isWinner = winners.some(w => w.userId === selfId);\r\n\r\n        const storyPrompt = state.storyPrompt;\r\n        const opponentLeft = leaveReason === 'opponent_left';\r\n\r\n        return (\r\n            <div className=\"max-w-3xl mx-auto py-12 space-y-10\">\r\n                {/* Opponent Left Banner */}\r\n                {opponentLeft && (\r\n                    <motion.div\r\n                        initial={{ opacity: 0, y: -20 }}\r\n                        animate={{ opacity: 1, y: 0 }}\r\n                        className=\"flex items-center gap-3 p-4 bg-amber-50 border border-amber-200 rounded-xl text-amber-800\"\r\n                    >\r\n                        <AlertTriangle className=\"h-5 w-5 text-amber-600 flex-shrink-0\" />\r\n                        <div>\r\n                            <p className=\"font-semibold\">Your partner left the story</p>\r\n                            <p className=\"text-sm text-amber-600\">You win by forfeit!</p>\r\n                        </div>\r\n                    </motion.div>\r\n                )}\r\n\r\n                <div className=\"text-center space-y-4\">\r\n                    <div className=\"inline-flex p-4 rounded-full bg-yellow-100 text-yellow-600 mb-4\">\r\n                        <Trophy className=\"h-12 w-12\" />\r\n                    </div>\r\n                    <h2 className=\"text-4xl font-bold text-slate-900\">\r\n                        {opponentLeft ? \"You Win!\" : (isWinner ? (winners.length > 1 ? \"It's a Tie - You Won!\" : \"You Won!\") : \"Story Complete!\")}\r\n                    </h2>\r\n                    {!opponentLeft && (\r\n                        <p className=\"text-xl text-slate-600\">\r\n                            {winners.length > 1 ? \"Winners: \" : \"Winner: \"}\r\n                            {winners.map((w, i) => (\r\n                                <span key={w.userId}>\r\n                                    <span className=\"font-bold text-violet-600\">{getDisplayName(w.userId)}</span>\r\n                                    {i < winners.length - 1 ? \" & \" : \"\"}\r\n                                </span>\r\n                            ))}\r\n                        </p>\r\n                    )}\r\n                </div>\r\n\r\n                {/* YOUR POINTS EARNED - Large prominent display */}\r\n                <div className=\"mx-auto max-w-sm\">\r\n                    <div className={`rounded-2xl p-6 ${isWinner || opponentLeft\r\n                        ? \"bg-gradient-to-br from-emerald-500 to-teal-600\"\r\n                        : \"bg-gradient-to-br from-slate-600 to-slate-700\"\r\n                        } text-white shadow-xl`}>\r\n                        <div className=\"text-sm font-medium uppercase tracking-wider opacity-80\">\r\n                            You Earned\r\n                        </div>\r\n                        <div className=\"mt-2 flex items-baseline justify-center gap-2\">\r\n                            <span className=\"text-5xl font-black\">{isWinner || opponentLeft ? 200 : 50}</span>\r\n                            <span className=\"text-xl font-semibold opacity-80\">points</span>\r\n                        </div>\r\n                        <div className=\"mt-3 flex items-center justify-center gap-2 text-sm opacity-90\">\r\n                            {isWinner || opponentLeft ? (\r\n                                <>\r\n                                    <Check className=\"h-4 w-4\" />\r\n                                    <span>+1 Win added to your stats</span>\r\n                                </>\r\n                            ) : (\r\n                                <>\r\n                                    <Star className=\"h-4 w-4\" />\r\n                                    <span>+1 Game added to your stats</span>\r\n                                </>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"bg-white rounded-3xl shadow-xl overflow-hidden border border-slate-200\">\r\n                    <div className=\"p-8 bg-gradient-to-br from-violet-50 to-rose-50 border-b border-slate-200\">\r\n                        <h3 className=\"text-2xl font-serif font-bold text-slate-800 text-center\">\r\n                            {storyPrompt?.title || \"The Final Story\"}\r\n                        </h3>\r\n                    </div>\r\n                    <div className=\"p-10 space-y-6\">\r\n                        {/* Opening prompt as the story beginning */}\r\n                        {storyPrompt && (\r\n                            <div className=\"relative pl-6 border-l-4 border-rose-200\">\r\n                                <p className=\"text-lg font-serif text-slate-600 leading-relaxed italic\">\r\n                                    {storyPrompt.opening}\r\n                                </p>\r\n                                <div className=\"mt-2\">\r\n                                    <span className=\"text-xs font-bold text-rose-400 uppercase\">Opening</span>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                        {paragraphs.map((p, idx) => (\r\n                            <div key={idx} className=\"relative pl-6 border-l-4 border-violet-200\">\r\n                                <p className=\"text-lg font-serif text-slate-800 leading-relaxed\">{p.text}</p>\r\n                                <div className=\"mt-2 flex items-center gap-2\">\r\n                                    <span className=\"text-xs font-bold text-slate-400 uppercase\">\r\n                                        {getDisplayName(p.userId)}\r\n                                    </span>\r\n                                    <div className=\"flex items-center gap-1 text-xs font-medium text-emerald-600 bg-emerald-50 px-2 py-0.5 rounded-full\">\r\n                                        <Star className=\"h-3 w-3 fill-current\" />\r\n                                        {Object.values(p.votes).reduce((a, b) => a + b, 0)} pts\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n                    {participants.sort((a, b) => b.score - a.score).map((p, idx) => (\r\n                        <div key={p.userId} className=\"flex items-center justify-between p-4 bg-white rounded-xl border border-slate-200 shadow-sm\">\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <div className={clsx(\r\n                                    \"h-8 w-8 rounded-full flex items-center justify-center font-bold text-sm\",\r\n                                    idx === 0 ? \"bg-yellow-100 text-yellow-700\" : \"bg-slate-100 text-slate-600\"\r\n                                )}>\r\n                                    {idx + 1}\r\n                                </div>\r\n                                <span className=\"font-medium text-slate-900\">\r\n                                    {getDisplayName(p.userId)}\r\n                                </span>\r\n                            </div>\r\n                            <span className=\"font-bold text-violet-600\">{p.score} pts</span>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return null;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\features\\activities\\components\\StoryPanel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\features\\activities\\components\\SummaryView.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\features\\activities\\components\\TicTacToeBoard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\features\\activities\\components\\UncopyableSnippet.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\features\\activities\\guards\\typingBoxGuards.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\features\\activities\\hooks\\outcome-recorder.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\features\\activities\\hooks\\useActivitySocket.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\features\\activities\\hooks\\useMyPoints.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\features\\activities\\hooks\\useQuickTriviaSession.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'maybeRecordOutcome' is defined but never used.","line":4,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":28}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"∩╗┐import { useEffect, useRef, useState, useCallback } from \"react\";\nimport { readAuthSnapshot } from \"@/lib/auth-storage\";\nimport { getSelf, joinSession, leaveSession, setSessionReady } from \"../api/client\";\nimport { maybeRecordOutcome, resetOutcomeGuard } from \"./outcome-recorder\";\n\nexport interface TriviaState {\n  phase: \"idle\" | \"connecting\" | \"lobby\" | \"running\" | \"ended\" | \"error\" | \"countdown\";\n  sessionId?: string;\n  activityKey?: \"quick_trivia\";\n  currentRound?: number;\n  timeLimitMs?: number;\n  question?: string;\n  options?: string[];\n  selectedIndex?: number;\n  correctIndex?: number;\n  locked?: boolean;\n  winnerUserId?: string;\n  scoreboard: Array<{ userId: string; score: number }>;\n  tieBreakWinnerUserId?: string;\n  presence?: Array<{ userId: string; joined: boolean; ready: boolean }>;\n  lobbyReady?: boolean;\n  countdown?: {\n    startedAt: number;\n    durationMs: number;\n    endsAt: number;\n    reason?: \"lobby\" | \"intermission\";\n    nextRoundIndex?: number;\n  };\n  tally?: Record<string, { correct: number; wrong: number }>;\n  error?: string;\n  leaveReason?: string;\n}\n\nconst CORE_BASE = (process.env.NEXT_PUBLIC_ACTIVITIES_CORE_URL || \"/api\").replace(/\\/$/, \"\");\ntype QuickTriviaLogLevel = \"info\" | \"warn\" | \"error\";\nconst QUICK_TRIVIA_LOGGERS: Record<QuickTriviaLogLevel, (...args: unknown[]) => void> = {\n  info: console.info.bind(console),\n  warn: console.warn.bind(console),\n  error: console.error.bind(console),\n};\nconst QUICK_TRIVIA_FALLBACK_LOGGER = console.info.bind(console);\nconst logQuickTrivia = (level: QuickTriviaLogLevel, message: string, meta?: Record<string, unknown>) => {\n  if (typeof window === \"undefined\") return;\n  if (process.env.NODE_ENV === \"production\") return;\n  const ts = new Date().toISOString();\n  const payload = meta ?? {};\n  const logger = QUICK_TRIVIA_LOGGERS[level] ?? QUICK_TRIVIA_FALLBACK_LOGGER;\n  logger(`[quick_trivia] ${ts} ${message}`, payload);\n};\n\nexport function useQuickTriviaSession(opts: { sessionId?: string }) {\n  const [state, setState] = useState<TriviaState>({ phase: \"idle\", scoreboard: [] });\n  const stateRef = useRef(state);\n  const [, forceTick] = useState(0);\n  const wsRef = useRef<WebSocket | null>(null);\n  const roundStartMsRef = useRef<number | null>(null);\n  const selfRef = useRef<string>(getSelf());\n  const sessionIdRef = useRef<string | null>(null);\n  const joinedRef = useRef(false);\n  const expiredRef = useRef(false);\n  const socketCleanupRef = useRef<(() => void) | null>(null);\n  const outcomeRecordedRef = useRef(false);\n\n  const isSessionGone = useCallback((error: unknown) => {\n    const message = error instanceof Error ? error.message : String(error ?? \"\");\n    return (\n      message.includes(\"410\") ||\n      message.toLowerCase().includes(\"gone\") ||\n      message.includes(\"session_not_found\") ||\n      message.includes(\"session_state_missing\")\n    );\n  }, []);\n\n  useEffect(() => {\n    stateRef.current = state;\n  }, [state]);\n\n  const markSessionExpired = useCallback((message: string) => {\n    joinedRef.current = false;\n    sessionIdRef.current = null;\n    expiredRef.current = true;\n    logQuickTrivia(\"info\", \"marking session expired\", { reason: message });\n    socketCleanupRef.current?.();\n    socketCleanupRef.current = null;\n    const socket = wsRef.current;\n    if (socket) {\n      try {\n        socket.close();\n      } catch {\n        // ignore\n      }\n      wsRef.current = null;\n    }\n    setState((s) => ({\n      ...s,\n      sessionId: undefined,\n      phase: \"ended\",\n      error: message,\n      countdown: undefined,\n      presence: [],\n      scoreboard: [],\n    }));\n  }, []);\n\n  useEffect(() => {\n    if (!opts.sessionId) {\n      sessionIdRef.current = null;\n      joinedRef.current = false;\n      expiredRef.current = false;\n      setState({ phase: \"idle\", scoreboard: [] });\n    }\n  }, [opts.sessionId]);\n\n  useEffect(() => {\n    if (!opts.sessionId) return;\n    let cancelled = false;\n    sessionIdRef.current = opts.sessionId;\n    joinedRef.current = false;\n    expiredRef.current = false;\n    setState((s) => ({ ...s, phase: \"connecting\", sessionId: opts.sessionId, error: undefined }));\n    const self = getSelf();\n    selfRef.current = self;\n\n    const joinWithRetry = async () => {\n      const maxAttempts = 5;\n      let attempt = 0;\n      let lastError: unknown = null;\n      while (attempt < maxAttempts && !cancelled) {\n        try {\n          if (expiredRef.current || !sessionIdRef.current) {\n            throw new Error(\"session_expired\");\n          }\n          await joinSession(opts.sessionId!, self);\n          joinedRef.current = true;\n          logQuickTrivia(\"info\", \"joined quick trivia session\", { sessionId: opts.sessionId, attempt: attempt + 1 });\n          return true;\n        } catch (error) {\n          lastError = error;\n          const message = error instanceof Error ? error.message : \"\";\n          if (isSessionGone(error)) {\n            throw new Error(\"session_expired\");\n          }\n          if (!message.includes(\"participant_not_found\")) {\n            throw error;\n          }\n          const delay = 200 * Math.pow(2, attempt);\n          await new Promise((resolve) => setTimeout(resolve, delay));\n          attempt += 1;\n        }\n      }\n      if (lastError) {\n        throw lastError;\n      }\n      throw new Error(\"join_failed\");\n    };\n\n    const openStream = async () => {\n      try {\n        await joinWithRetry();\n        if (cancelled || expiredRef.current) return;\n        const auth = readAuthSnapshot();\n        const token = auth?.access_token;\n        const streamUrl = resolveStreamUrl(opts.sessionId!, token, self);\n        const ws = new WebSocket(streamUrl);\n        wsRef.current = ws;\n\n        const handleOpen = () => {\n          logQuickTrivia(\"info\", \"websocket opened\", { sessionId: opts.sessionId });\n          setState((s) => ({ ...s, phase: \"lobby\" }));\n        };\n\n        const handleMessage = (evt: MessageEvent) => {\n          try {\n            const msg = JSON.parse(evt.data);\n            const type = msg?.type;\n            if (!type) return;\n            const sessionId = sessionIdRef.current;\n            const inboundSessionId: string | undefined = msg.sessionId || msg.payload?.sessionId;\n            if (sessionId && inboundSessionId && inboundSessionId !== sessionId) {\n              logQuickTrivia(\"warn\", \"ignoring websocket event for stale session\", { expected: sessionId, got: inboundSessionId, type });\n              return;\n            }\n            if (expiredRef.current && (type === \"activity.round.started\" || type === \"activity.session.started\")) {\n              logQuickTrivia(\"warn\", \"ignoring round/session start after expiration\", { sessionId, type });\n              return;\n            }\n\n            if (type === \"session.snapshot\") {\n              const payload = msg.payload || {};\n              const snapshotParticipants = Array.isArray(payload?.scoreboard?.participants)\n                ? payload.scoreboard.participants\n                : Array.isArray(payload?.participants)\n                  ? payload.participants\n                  : undefined;\n              const tieBreakWinnerUserId = payload?.tieBreak?.winnerUserId || payload?.tieBreakWinnerUserId;\n              const winnerFromSnapshot = tieBreakWinnerUserId || payload?.winnerUserId || payload?.scoreboard?.winnerUserId;\n              setState((s) => ({\n                ...s,\n                phase: payload.lobbyPhase ? \"lobby\" : payload.status === \"running\" ? \"running\" : payload.status === \"ended\" ? \"ended\" : s.phase,\n                presence: payload.presence || s.presence,\n                lobbyReady: payload.lobbyReady ?? s.lobbyReady,\n                countdown: payload.countdown || undefined,\n                scoreboard:\n                  snapshotParticipants && snapshotParticipants.length > 0\n                    ? mergeSnapshot([], snapshotParticipants)\n                    : s.scoreboard,\n                tally: payload.tally || s.tally,\n                currentRound: typeof payload.currentRoundIndex === \"number\" ? payload.currentRoundIndex : s.currentRound,\n                winnerUserId: winnerFromSnapshot ?? s.winnerUserId,\n                tieBreakWinnerUserId: tieBreakWinnerUserId ?? s.tieBreakWinnerUserId,\n              }));\n              if (payload.status === \"ended\") {\n                logQuickTrivia(\"warn\", \"received snapshot for ended session\", { sessionId });\n                const shouldExpire = !expiredRef.current && stateRef.current.phase !== \"ended\";\n                if (shouldExpire) {\n                  markSessionExpired(\"Session expired, please start a new one.\");\n                }\n              }\n              return;\n            }\n\n            if (type === \"activity.session.presence\") {\n              setState((s) => ({\n                ...s,\n                presence: msg.payload?.participants || s.presence,\n                lobbyReady: msg.payload?.lobbyReady ?? s.lobbyReady,\n                phase: s.phase === \"idle\" ? \"lobby\" : s.phase,\n              }));\n              return;\n            }\n\n            if (type === \"activity.session.countdown\") {\n              const payload = msg.payload || {};\n              logQuickTrivia(\"info\", \"received countdown\", { sessionId, endsAt: payload.endsAt });\n              setState((s): TriviaState => ({\n                ...s,\n                phase: \"lobby\",\n                countdown: { startedAt: payload.startedAt, durationMs: payload.durationMs, endsAt: payload.endsAt },\n              }));\n              return;\n            }\n\n            if (type === \"activity.session.countdown.cancelled\") {\n              logQuickTrivia(\"info\", \"countdown cancelled\", { sessionId });\n              setState((s): TriviaState => ({ ...s, phase: \"lobby\", countdown: undefined }));\n              return;\n            }\n\n            if (type === \"activity.session.started\") {\n              logQuickTrivia(\"info\", \"session started\", { sessionId, currentRound: msg.payload?.currentRound });\n              setState((s) => ({\n                ...s,\n                phase: \"running\",\n                currentRound: typeof msg.payload?.currentRound === \"number\" ? msg.payload.currentRound : s.currentRound,\n                countdown: undefined,\n              }));\n              return;\n            }\n\n            if (type === \"activity.round.started\") {\n              const payload = msg.payload?.payload || msg.payload;\n              const index = msg.payload?.index ?? payload?.index;\n              roundStartMsRef.current = Date.now();\n              logQuickTrivia(\"info\", \"round started\", { sessionId, roundIndex: index });\n              setState((s) => ({\n                ...s,\n                phase: \"running\",\n                activityKey: \"quick_trivia\",\n                currentRound: index,\n                timeLimitMs: payload?.timeLimitMs,\n                question: payload?.question,\n                options: payload?.options || [],\n                selectedIndex: undefined,\n                correctIndex: undefined,\n                locked: false,\n                countdown: undefined,\n              }));\n              return;\n            }\n\n            if (type === \"activity.score.updated\") {\n              const { userId, total } = msg.payload;\n              setState((s) => ({ ...s, scoreboard: mergeScore(s.scoreboard, userId, total) }));\n              return;\n            }\n\n            if (type === \"activity.round.ended\") {\n              const correctIndex = msg.payload?.correctIndex;\n              const roundBoard = msg.payload?.scoreboard?.participants;\n              logQuickTrivia(\"info\", \"round ended\", { sessionId, roundIndex: msg.payload?.index });\n              setState((s) => ({\n                ...s,\n                correctIndex,\n                locked: true,\n                scoreboard: Array.isArray(roundBoard) && roundBoard.length > 0 ? mergeSnapshot(s.scoreboard, roundBoard) : s.scoreboard,\n              }));\n              return;\n            }\n\n            if (type === \"activity.session.ended\") {\n              logQuickTrivia(\"info\", \"session ended\", { sessionId });\n              const finalBoard = msg.payload?.finalScoreboard?.participants;\n              const winnerFromBoard = msg.payload?.finalScoreboard?.winnerUserId;\n              const directWinner = msg.payload?.winnerUserId;\n              const tieBreakWinnerUserId = msg.payload?.tieBreak?.winnerUserId || msg.payload?.tieBreakWinnerUserId;\n              const resolvedWinner = tieBreakWinnerUserId || directWinner || winnerFromBoard;\n              const leaveReason = msg.payload?.reason === 'opponent_left' ? 'opponent_left' : undefined;\n              const shouldShowExpiredMessage = (() => {\n                const snapshot = stateRef.current;\n                return snapshot.phase === \"idle\" || snapshot.phase === \"lobby\" || (snapshot.phase as string) === \"countdown\";\n              })();\n              if (shouldShowExpiredMessage) {\n                markSessionExpired(\"Session expired, please start a new one.\");\n                return;\n              }\n              setState((s) => ({\n                ...s,\n                phase: \"ended\",\n                winnerUserId: resolvedWinner,\n                tieBreakWinnerUserId,\n                tally: msg.payload?.tally || s.tally,\n                scoreboard: Array.isArray(finalBoard) && finalBoard.length > 0 ? mergeSnapshot(s.scoreboard, finalBoard) : s.scoreboard,\n                leaveReason,\n              }));\n              return;\n            }\n          } catch (err) {\n            logQuickTrivia(\"warn\", \"failed to process websocket message\", { error: err instanceof Error ? err.message : err });\n          }\n        };\n\n        const handleError = () => {\n          if (expiredRef.current) return;\n          logQuickTrivia(\"warn\", \"websocket error\", { sessionId: opts.sessionId });\n          setState((s) => ({ ...s, phase: \"ended\" }));\n        };\n\n        const handleClose = () => {\n          if (expiredRef.current) return;\n          logQuickTrivia(\"info\", \"websocket closed\", { sessionId: opts.sessionId });\n          setState((s) => ({ ...s, phase: \"ended\" }));\n        };\n\n        ws.addEventListener(\"open\", handleOpen);\n        ws.addEventListener(\"message\", handleMessage);\n        ws.addEventListener(\"error\", handleError);\n        ws.addEventListener(\"close\", handleClose);\n\n        socketCleanupRef.current = () => {\n          ws.removeEventListener(\"open\", handleOpen);\n          ws.removeEventListener(\"message\", handleMessage);\n          ws.removeEventListener(\"error\", handleError);\n          ws.removeEventListener(\"close\", handleClose);\n        };\n      } catch (error) {\n        if (cancelled) return;\n        const message = error instanceof Error ? error.message : \"join_failed\";\n        if (message === \"session_expired\" || isSessionGone(error)) {\n          markSessionExpired(\"Session expired, please start a new one.\");\n          return;\n        }\n        setState((s) => ({ ...s, phase: \"error\", error: message }));\n      }\n    };\n\n    void openStream();\n\n    return () => {\n      cancelled = true;\n      socketCleanupRef.current?.();\n      socketCleanupRef.current = null;\n      const socket = wsRef.current;\n      if (socket) {\n        try {\n          socket.close();\n        } catch {\n          // ignore close issues\n        }\n      }\n      wsRef.current = null;\n      const currentSessionId = sessionIdRef.current;\n      if (currentSessionId && joinedRef.current && !expiredRef.current) {\n        joinedRef.current = false;\n        void leaveSession(currentSessionId, selfRef.current).catch(() => undefined);\n      }\n      sessionIdRef.current = null;\n    };\n  }, [opts.sessionId, isSessionGone, markSessionExpired]);\n\n  const selectOption = useCallback((idx: number) => {\n    setState((s) => {\n      if (s.locked || s.phase !== \"running\" || s.selectedIndex !== undefined) return s;\n      const ws = wsRef.current;\n      if (ws && ws.readyState === 1) {\n        ws.send(JSON.stringify({ type: \"submit\", payload: { choiceIndex: idx, userId: selfRef.current, tClientMs: Date.now() } }));\n      }\n      return { ...s, selectedIndex: idx, locked: true };\n    });\n  }, []);\n\n  const toggleReady = useCallback(\n    (ready: boolean) => {\n      if (!state.sessionId) return;\n      const self = selfRef.current;\n      logQuickTrivia(\"info\", \"toggle ready\", { sessionId: state.sessionId, ready });\n      void setSessionReady(state.sessionId, self, ready).catch(() => { });\n      setState((s) => ({ ...s, presence: updatePresenceReady(s.presence, self, ready), lobbyReady: ready ? s.lobbyReady : false }));\n    },\n    [state.sessionId],\n  );\n\n  useEffect(() => {\n    if (state.phase !== \"running\" || !state.timeLimitMs || !roundStartMsRef.current) return;\n    const id = setInterval(() => {\n      const elapsed = Date.now() - (roundStartMsRef.current || 0);\n      if (elapsed >= (state.timeLimitMs || 0) && !state.locked) {\n        setState((s) => ({ ...s, locked: true }));\n      }\n    }, 250);\n    return () => clearInterval(id);\n  }, [state.phase, state.timeLimitMs, state.locked]);\n\n  useEffect(() => {\n    if (state.phase !== \"running\" && !state.countdown) return;\n    const id = setInterval(() => {\n      forceTick((tick) => (tick + 1) % 1_000_000);\n    }, 250);\n    return () => clearInterval(id);\n  }, [state.phase, state.countdown, state.countdown?.endsAt, state.countdown?.startedAt, state.currentRound]);\n\n  const remainingMs = state.phase === \"running\" && state.timeLimitMs && roundStartMsRef.current\n    ? Math.max(state.timeLimitMs - (Date.now() - roundStartMsRef.current), 0)\n    : 0;\n  const progress = state.timeLimitMs ? 1 - remainingMs / state.timeLimitMs : 0;\n  const countdownRemainingMs = state.countdown ? Math.max(state.countdown.endsAt - Date.now(), 0) : 0;\n\n  const leave = useCallback(async () => {\n    const sessionId = state.sessionId;\n    const self = selfRef.current;\n    if (!sessionId || !self) return;\n    const ws = wsRef.current;\n    if (ws && ws.readyState === WebSocket.OPEN) {\n      try {\n        ws.send(JSON.stringify({ type: \"leave\", payload: { userId: self } }));\n      } catch {\n        // ignore send errors\n      }\n    }\n\n    try {\n      await leaveSession(sessionId, self);\n    } catch {\n      // ignore errors; websocket path should handle leave\n    }\n  }, [state.sessionId]);\n\n  // NOTE: Game outcome is recorded by the backend activities-core service via WebSocket\n  // Do NOT record from frontend to avoid double-counting stats\n  // The useEffect that called maybeRecordOutcome has been removed\n\n  useEffect(() => {\n    resetOutcomeGuard(outcomeRecordedRef);\n  }, [state.sessionId]);\n\n  return { state, selectOption, toggleReady, leave, progress, countdownRemainingMs, questionMsRemaining: remainingMs, self: selfRef.current };\n}\n\nfunction mergeScore(list: Array<{ userId: string; score: number }>, userId: string, score: number) {\n  const next = list.map((entry) => (entry.userId === userId ? { ...entry, score } : entry));\n  if (next.some((entry) => entry.userId === userId)) {\n    return next;\n  }\n  return [...next, { userId, score }];\n}\n\nfunction mergeSnapshot(list: Array<{ userId: string; score: number }>, snapshot: Array<{ userId: string; score: number }>) {\n  const merged = new Map<string, number>();\n  for (const entry of list) {\n    merged.set(entry.userId, entry.score);\n  }\n  for (const entry of snapshot) {\n    merged.set(entry.userId, entry.score);\n  }\n  return Array.from(merged.entries()).map(([userId, score]) => ({ userId, score }));\n}\n\nfunction updatePresenceReady(\n  presence: Array<{ userId: string; joined: boolean; ready: boolean }> | undefined,\n  userId: string,\n  ready: boolean,\n) {\n  if (!presence) return presence;\n  return presence.map((entry) => (entry.userId === userId ? { ...entry, ready: ready || false, joined: true } : entry));\n}\n\nfunction resolveStreamUrl(sessionId: string, token?: string, userId?: string): string {\n  const isAbsolute = CORE_BASE.startsWith(\"http://\") || CORE_BASE.startsWith(\"https://\");\n  let origin: string;\n  if (isAbsolute) {\n    origin = CORE_BASE.replace(/^http:/, \"ws:\").replace(/^https:/, \"wss:\");\n  } else if (typeof window !== \"undefined\") {\n    const { origin: currentOrigin } = window.location;\n    const wsOrigin = currentOrigin.startsWith(\"https://\")\n      ? `wss://${currentOrigin.slice(\"https://\".length)}`\n      : currentOrigin.startsWith(\"http://\")\n        ? `ws://${currentOrigin.slice(\"http://\".length)}`\n        : `ws://${currentOrigin}`;\n    const prefix = CORE_BASE ? (CORE_BASE.startsWith(\"/\") ? CORE_BASE : `/${CORE_BASE}`) : \"\";\n    origin = `${wsOrigin}${prefix}`;\n  } else {\n    const prefix = CORE_BASE ? (CORE_BASE.startsWith(\"/\") ? CORE_BASE : `/${CORE_BASE}`) : \"\";\n    origin = `ws://localhost${prefix}`;\n  }\n  const base = `${origin}/activities/session/${sessionId}/stream`;\n  const params: Record<string, string> = {};\n  if (token) {\n    params.authToken = token;\n  }\n  if (userId) {\n    params.userId = userId;\n  }\n  const keys = Object.keys(params);\n  if (keys.length === 0) {\n    return base;\n  }\n  const query = keys.map((key) => `${encodeURIComponent(key)}=${encodeURIComponent(params[key])}`).join(\"&\");\n  const glue = base.includes(\"?\") ? (base.endsWith(\"?\") ? \"\" : \"&\") : \"?\";\n  return `${base}${glue}${query}`;\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\features\\activities\\hooks\\useRockPaperScissorsSession.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'maybeRecordOutcome' is defined but never used.","line":7,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":28}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\n\nimport { readAuthSnapshot } from \"@/lib/auth-storage\";\nimport { getSelf, joinSession, leaveSession, setSessionReady } from \"../api/client\";\nimport { maybeRecordOutcome, resetOutcomeGuard } from \"./outcome-recorder\";\n\nexport type RpsChoice = \"rock\" | \"paper\" | \"scissors\";\ntype ScoreEntry = { userId: string; score: number };\nconst compareScoreDesc = (a: ScoreEntry, b: ScoreEntry) => b.score - a.score;\n\nfunction resolveLeaveReason(reason?: string | null): RockPaperScissorsState['leaveReason'] {\n  if (!reason) return null;\n  if (reason === 'opponent_left') return 'opponent_left';\n  return reason as RockPaperScissorsState['leaveReason'];\n}\n\nexport type RockPaperScissorsPhase = \"idle\" | \"connecting\" | \"lobby\" | \"countdown\" | \"running\" | \"ended\" | \"error\";\n\nexport interface RockPaperScissorsState {\n  phase: RockPaperScissorsPhase;\n  sessionId?: string;\n  countdown?: { startedAt: number; durationMs: number; endsAt: number; reason?: string };\n  presence: Array<{ userId: string; joined: boolean; ready: boolean }>;\n  scoreboard: ScoreEntry[];\n  currentRound?: number;\n  winnerUserId?: string;\n  lastRoundWinner?: string;\n  lastRoundMoves?: Array<{ userId: string; move?: RpsChoice | null }>;\n  lastRoundReason?: string;\n  submittedMove?: RpsChoice | null;\n  error?: string;\n  leaveReason?: 'opponent_left' | 'forfeit' | null;\n}\n\nconst CORE_BASE = (process.env.NEXT_PUBLIC_ACTIVITIES_CORE_URL || \"/api\").replace(/\\/$/, \"\");\n\nconst initialState: RockPaperScissorsState = {\n  phase: \"idle\",\n  presence: [],\n  scoreboard: [],\n};\n\nfunction resolveStreamUrl(sessionId: string, token?: string, userId?: string): string {\n  const isAbsolute = CORE_BASE.startsWith(\"http://\") || CORE_BASE.startsWith(\"https://\");\n  let origin: string;\n  if (isAbsolute) {\n    origin = CORE_BASE.replace(/^http:/, \"ws:\").replace(/^https:/, \"wss:\");\n  } else if (typeof window !== \"undefined\") {\n    const { origin: currentOrigin } = window.location;\n    const wsOrigin = currentOrigin.startsWith(\"https://\")\n      ? `wss://${currentOrigin.slice(\"https://\".length)}`\n      : currentOrigin.startsWith(\"http://\")\n        ? `ws://${currentOrigin.slice(\"http://\".length)}`\n        : `ws://${currentOrigin}`;\n    const prefix = CORE_BASE ? (CORE_BASE.startsWith(\"/\") ? CORE_BASE : `/${CORE_BASE}`) : \"\";\n    origin = `${wsOrigin}${prefix}`;\n  } else {\n    const prefix = CORE_BASE ? (CORE_BASE.startsWith(\"/\") ? CORE_BASE : `/${CORE_BASE}`) : \"\";\n    origin = `ws://localhost${prefix}`;\n  }\n  const base = `${origin}/activities/session/${sessionId}/stream`;\n  const params: Record<string, string> = {};\n  if (token) params.authToken = token;\n  if (userId) params.userId = userId;\n  const keys = Object.keys(params);\n  if (keys.length === 0) {\n    return base;\n  }\n  const query = keys.map((key) => `${encodeURIComponent(key)}=${encodeURIComponent(params[key])}`).join(\"&\");\n  const glue = base.includes(\"?\") ? (base.endsWith(\"?\") ? \"\" : \"&\") : \"?\";\n  return `${base}${glue}${query}`;\n}\n\nfunction mergeScoreboard(scoreboard: ScoreEntry[], userId: string, score: number): ScoreEntry[] {\n  const existing = new Map(scoreboard.map((entry) => [entry.userId, entry.score]));\n  existing.set(userId, score);\n  return Array.from(existing.entries())\n    .map(([id, total]) => ({ userId: id, score: total }))\n    .sort(compareScoreDesc);\n}\n\nexport function useRockPaperScissorsSession(opts: { sessionId?: string }) {\n  const [state, setState] = useState<RockPaperScissorsState>(initialState);\n  const wsRef = useRef<WebSocket | null>(null);\n  const joinedRef = useRef(false);\n  const sessionIdRef = useRef<string | null>(null);\n  const cleanupRef = useRef<(() => void) | null>(null);\n  const selfIdRef = useRef<string>(getSelf());\n  const outcomeRecordedRef = useRef(false);\n\n  useEffect(() => {\n    selfIdRef.current = getSelf();\n  }, []);\n\n  useEffect(() => {\n    if (!opts.sessionId) {\n      sessionIdRef.current = null;\n      joinedRef.current = false;\n      cleanupRef.current?.();\n      cleanupRef.current = null;\n      const socket = wsRef.current;\n      if (socket) {\n        try {\n          socket.close();\n        } catch {\n          // ignore\n        }\n        wsRef.current = null;\n      }\n      setState(initialState);\n    }\n  }, [opts.sessionId]);\n\n  useEffect(() => {\n    if (!opts.sessionId) return;\n    let cancelled = false;\n    const sessionId = opts.sessionId;\n    sessionIdRef.current = sessionId;\n    joinedRef.current = false;\n    setState((prev) => ({\n      ...initialState,\n      sessionId,\n      phase: \"connecting\",\n      presence: prev.presence,\n    }));\n    const selfId = getSelf();\n    selfIdRef.current = selfId;\n\n    const joinWithRetry = async () => {\n      const maxAttempts = 5;\n      let attempt = 0;\n      let lastError: unknown = null;\n      while (attempt < maxAttempts && !cancelled) {\n        try {\n          await joinSession(sessionId, selfId);\n          joinedRef.current = true;\n          return true;\n        } catch (error) {\n          lastError = error;\n          const message = error instanceof Error ? error.message : \"\";\n          if (message.includes(\"session_not_found\")) {\n            throw new Error(\"session_expired\");\n          }\n          if (!message.includes(\"participant_not_found\") && !message.includes(\"session_state_missing\")) {\n            throw error;\n          }\n          const delay = 200 * Math.pow(2, attempt);\n          await new Promise((resolve) => setTimeout(resolve, delay));\n          attempt += 1;\n        }\n      }\n      if (lastError) {\n        if (lastError instanceof Error && lastError.message.includes(\"session_state_missing\")) {\n          throw new Error(\"session_expired\");\n        }\n        throw lastError;\n      }\n      throw new Error(\"join_failed\");\n    };\n\n    const openStream = async () => {\n      try {\n        await joinWithRetry();\n        if (cancelled) return;\n        const token = readAuthSnapshot()?.access_token;\n        const wsUrl = resolveStreamUrl(sessionId, token, selfId);\n        const socket = new WebSocket(wsUrl);\n        wsRef.current = socket;\n\n        const handleOpen = () => {\n          setState((prev) => ({ ...prev, phase: prev.phase === \"connecting\" ? \"lobby\" : prev.phase }));\n        };\n\n        const handleClose = () => {\n          if (!cancelled) {\n            setState((prev) => ({ ...prev, phase: prev.phase === \"ended\" ? \"ended\" : \"error\", error: prev.error ?? \"Session disconnected\" }));\n          }\n        };\n\n        const handleMessage = (event: MessageEvent) => {\n          try {\n            const payload = JSON.parse(event.data);\n            const type = payload?.type;\n            if (!type) {\n              return;\n            }\n            if (type === \"session.snapshot\") {\n              const snapshot = payload.payload || {};\n              // Convert countdown value (number) to countdown object\n              const countdownValue = snapshot.countdown;\n              const countdownObj = typeof countdownValue === \"number\" && countdownValue > 0\n                ? {\n                  startedAt: Date.now(),\n                  durationMs: countdownValue * 1000,\n                  endsAt: Date.now() + countdownValue * 1000,\n                }\n                : undefined;\n              setState((prev) => ({\n                ...prev,\n                phase:\n                  snapshot.lobbyPhase ?? snapshot.status === \"pending\"\n                    ? \"lobby\"\n                    : snapshot.status === \"countdown\"\n                      ? \"countdown\"\n                      : snapshot.status === \"running\"\n                        ? \"running\"\n                        : snapshot.status === \"ended\"\n                          ? \"ended\"\n                          : prev.phase,\n                presence: snapshot.presence ?? prev.presence,\n                countdown: countdownObj ?? prev.countdown,\n                scoreboard: snapshot.participants\n                  ? snapshot.participants.map((entry: { userId: string; score: number }) => ({\n                    userId: entry.userId,\n                    score: entry.score,\n                  }))\n                  : prev.scoreboard,\n                currentRound: typeof snapshot.currentRoundIndex === \"number\" ? snapshot.currentRoundIndex : prev.currentRound,\n              }));\n              return;\n            }\n\n            if (type === \"activity.session.presence\") {\n              setState((prev) => ({\n                ...prev,\n                presence: payload.payload?.participants ?? prev.presence,\n                lobbyReady: payload.payload?.lobbyReady,\n                phase: prev.phase === \"connecting\" ? \"lobby\" : prev.phase,\n              }));\n              return;\n            }\n\n            if (type === \"activity.session.countdown\") {\n              setState((prev) => ({\n                ...prev,\n                phase: \"countdown\",\n                countdown: payload.payload ? { ...payload.payload } : undefined,\n              }));\n              return;\n            }\n\n            if (type === \"activity.session.countdown.cancelled\") {\n              setState((prev) => ({\n                ...prev,\n                phase: \"lobby\",\n                countdown: undefined,\n              }));\n              return;\n            }\n\n            if (type === \"activity.round.started\") {\n              const roundIndex = payload.payload?.index ?? payload.payload?.round ?? 0;\n              console.log(\"[RPS Hook] Round started:\", roundIndex);\n\n              // Delay clearing round data to give UI time to show the result\n              // The round result was shown when activity.round.ended arrived\n              // We wait 100ms before transitioning to ensure smooth UX\n              setTimeout(() => {\n                setState((prev) => {\n                  // Only clear if we're still on running phase (not ended)\n                  if (prev.phase !== \"running\" && prev.phase !== \"countdown\") {\n                    return prev;\n                  }\n                  return {\n                    ...prev,\n                    phase: \"running\",\n                    currentRound: roundIndex,\n                    countdown: undefined,\n                    submittedMove: null,\n                    // Clear round data so UI shows move selection\n                    lastRoundWinner: undefined,\n                    lastRoundMoves: undefined,\n                    lastRoundReason: undefined,\n                  };\n                });\n              }, 100);\n              return;\n            }\n\n            if (type === \"activity.score.updated\") {\n              const { userId, total } = payload.payload || {};\n              if (typeof userId === \"string\" && typeof total === \"number\") {\n                setState((prev) => ({\n                  ...prev,\n                  scoreboard: mergeScoreboard(prev.scoreboard, userId, total),\n                }));\n              }\n              return;\n            }\n\n            if (type === \"activity.round.ended\") {\n              console.log(\"[RPS Hook] Round ended - winner:\", payload.payload?.winnerUserId, \"moves:\", payload.payload?.moves);\n              const scoreboardPayload = payload.payload?.scoreboard?.participants;\n              setState((prev) => ({\n                ...prev,\n                phase: prev.phase === \"running\" ? \"running\" : prev.phase,\n                scoreboard: Array.isArray(scoreboardPayload)\n                  ? scoreboardPayload.map((entry: ScoreEntry) => ({ userId: entry.userId, score: entry.score })).sort(compareScoreDesc)\n                  : prev.scoreboard,\n                lastRoundWinner: payload.payload?.winnerUserId ?? undefined,\n                lastRoundMoves: payload.payload?.moves ?? prev.lastRoundMoves,\n                lastRoundReason: payload.payload?.reason ?? prev.lastRoundReason,\n                // Clear submitted move so UI can show round result\n                submittedMove: null,\n              }));\n              return;\n            }\n\n            if (type === \"activity.session.ended\") {\n              setState((prev) => ({\n                ...prev,\n                phase: \"ended\",\n                countdown: undefined,\n                winnerUserId: payload.payload?.winnerUserId ?? payload.payload?.finalScoreboard?.winnerUserId,\n                scoreboard: payload.payload?.finalScoreboard?.participants\n                  ? payload.payload.finalScoreboard.participants.map((entry: ScoreEntry) => ({ userId: entry.userId, score: entry.score })).sort(compareScoreDesc)\n                  : prev.scoreboard,\n                leaveReason: resolveLeaveReason(payload.payload?.leaveReason ?? payload.payload?.reason),\n              }));\n              return;\n            }\n\n            if (type === \"error\") {\n              setState((prev) => ({\n                ...prev,\n                phase: \"error\",\n                error: payload.payload?.code ?? \"session_error\",\n              }));\n            }\n          } catch (err) {\n            console.warn(\"rps_ws_message_parse_failed\", err);\n          }\n        };\n\n        socket.addEventListener(\"open\", handleOpen);\n        socket.addEventListener(\"close\", handleClose);\n        socket.addEventListener(\"message\", handleMessage as EventListener);\n\n        cleanupRef.current = () => {\n          socket.removeEventListener(\"open\", handleOpen);\n          socket.removeEventListener(\"close\", handleClose);\n          socket.removeEventListener(\"message\", handleMessage as EventListener);\n        };\n      } catch (error) {\n        console.warn(\"rps_ws_open_failed\", error);\n        if (!cancelled) {\n          setState((prev) => ({ ...prev, phase: \"error\", error: error instanceof Error ? error.message : \"connection_failed\" }));\n        }\n      }\n    };\n\n    void openStream();\n\n    return () => {\n      cancelled = true;\n      cleanupRef.current?.();\n      cleanupRef.current = null;\n      const socket = wsRef.current;\n      if (socket) {\n        try {\n          socket.close();\n        } catch {\n          // ignore\n        }\n        wsRef.current = null;\n      }\n      const currentSession = sessionIdRef.current;\n      if (currentSession && joinedRef.current) {\n        joinedRef.current = false;\n        void leaveSession(currentSession, selfId).catch(() => undefined);\n      }\n    };\n  }, [opts.sessionId]);\n\n  const readyUp = useCallback(async () => {\n    const sessionId = sessionIdRef.current;\n    if (!sessionId) return;\n    try {\n      await setSessionReady(sessionId, selfIdRef.current, true);\n    } catch (error) {\n      console.warn(\"rps_ready_failed\", error);\n      setState((prev) => ({ ...prev, error: error instanceof Error ? error.message : \"ready_failed\" }));\n    }\n  }, []);\n\n  useEffect(() => {\n    resetOutcomeGuard(outcomeRecordedRef);\n  }, [state.sessionId]);\n\n  const unready = useCallback(async () => {\n    const sessionId = sessionIdRef.current;\n    if (!sessionId) return;\n    try {\n      await setSessionReady(sessionId, selfIdRef.current, false);\n    } catch (error) {\n      console.warn(\"rps_unready_failed\", error);\n      setState((prev) => ({ ...prev, error: error instanceof Error ? error.message : \"ready_failed\" }));\n    }\n  }, []);\n\n  const submitMove = useCallback(\n    async (move: RpsChoice) => {\n      const socket = wsRef.current;\n      const sessionId = sessionIdRef.current;\n      if (!socket || socket.readyState !== WebSocket.OPEN || !sessionId) {\n        setState((prev) => ({ ...prev, error: \"connection_closed\" }));\n        return;\n      }\n      try {\n        socket.send(JSON.stringify({ type: \"submit\", payload: { userId: selfIdRef.current, move } }));\n        setState((prev) => ({ ...prev, submittedMove: move }));\n      } catch (error) {\n        console.warn(\"rps_submit_move_failed\", error);\n        setState((prev) => ({ ...prev, error: error instanceof Error ? error.message : \"submit_failed\" }));\n      }\n    },\n    [],\n  );\n\n  const leave = useCallback(async () => {\n    const sessionId = sessionIdRef.current;\n    const selfId = selfIdRef.current;\n    if (!sessionId || !selfId) return;\n\n    // Send leave via WebSocket first for immediate feedback\n    const socket = wsRef.current;\n    if (socket && socket.readyState === WebSocket.OPEN) {\n      socket.send(JSON.stringify({\n        type: 'leave',\n        payload: { userId: selfId }\n      }));\n    }\n\n    // Also call REST API as backup\n    try {\n      await leaveSession(sessionId, selfId);\n    } catch {\n      // Ignore errors, websocket should handle it\n    }\n  }, []);\n\n  const restart = useCallback(() => {\n    const socket = wsRef.current;\n    if (socket && socket.readyState === WebSocket.OPEN) {\n      socket.send(JSON.stringify({ type: 'restart' }));\n    }\n  }, []);\n\n  // NOTE: Game outcome is recorded by the backend activities-core service via WebSocket\n  // Do NOT record from frontend to avoid double-counting stats\n  // The useEffect that called maybeRecordOutcome has been removed\n\n  return useMemo(\n    () => ({\n      state,\n      readyUp,\n      unready,\n      submitMove,\n      leave,\n      restart,\n    }),\n    [state, readyUp, unready, submitMove, leave, restart],\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\features\\activities\\hooks\\useSpeedTypingSession.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'maybeRecordOutcome' is defined but never used.","line":14,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":28}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useCallback, useEffect, useMemo, useRef, useState } from 'react';\r\nimport type { KeyboardEvent } from 'react';\r\n\r\nimport { readAuthSnapshot } from '@/lib/auth-storage';\r\nimport {\r\n\tcreateSession,\r\n\tfetchSessionSnapshot,\r\n\tgetSelf,\r\n\tjoinSession,\r\n\tleaveSession,\r\n\tsetSessionReady,\r\n\tstartSession,\r\n} from '../api/client';\r\nimport { maybeRecordOutcome, resetOutcomeGuard } from './outcome-recorder';\r\n\r\nexport type LobbyParticipant = {\r\n\tuserId: string;\r\n\tjoined: boolean;\r\n\tready: boolean;\r\n\tdisplayName?: string | null;\r\n\thandle?: string | null;\r\n\tavatarUrl?: string | null;\r\n};\r\n\r\nexport type ScoreboardEntry = {\r\n\tuserId: string;\r\n\tscore: number;\r\n\tdisplayName?: string | null;\r\n\thandle?: string | null;\r\n\tavatarUrl?: string | null;\r\n};\r\n\r\ntype ConnectionQuality = 'Good' | 'Fair' | 'Poor';\r\n\r\ntype CountdownState = {\r\n\tstartedAt: number;\r\n\tdurationMs: number;\r\n\tendsAt: number;\r\n\treason?: 'lobby' | 'intermission';\r\n\tnextRoundIndex?: number;\r\n};\r\n\r\nexport type SessionPhase =\r\n\t| 'idle'\r\n\t| 'connecting'\r\n\t| 'lobby'\r\n\t| 'countdown'\r\n\t| 'running'\r\n\t| 'ended'\r\n\t| 'error';\r\n\r\nexport type SessionState = {\r\n\tphase: SessionPhase;\r\n\tsessionId?: string;\r\n\tactivityKey?: 'speed_typing';\r\n\tcurrentRound?: number;\r\n\tscoreboard: ScoreboardEntry[];\r\n\tcountdown?: CountdownState;\r\n\tlobby?: {\r\n\t\tparticipants: LobbyParticipant[];\r\n\t\tready: boolean;\r\n\t\tphase?: 'lobby' | 'countdown' | 'running';\r\n\t};\r\n\twinnerUserId?: string;\r\n\tpenalty?: { message: string; kind?: string } | null;\r\n\tskewEstimateMs?: number;\r\n\trttMs?: number;\r\n\tconnectionQuality?: ConnectionQuality;\r\n\terror?: string;\r\n\tleaveReason?: 'opponent_left' | 'forfeit' | null;\r\n};\r\n\r\nexport type UseSpeedTypingOptions = {\r\n\tsessionId?: string;\r\n\tautoStart?: boolean;\r\n\tpeerId?: string;\r\n};\r\n\r\ntype OutboundMessage =\r\n\t| { type: 'keystroke'; payload: { userId: string; tClientMs: number; len: number; isPaste?: boolean } }\r\n\t| { type: 'submit'; payload: { userId: string; typedText: string; clientMs?: number } }\r\n\t| { type: 'ping'; payload: { tClientMs: number } };\r\n\r\ntype SessionSnapshotPayload = {\r\n\tid: string;\r\n\tstatus: 'pending' | 'running' | 'ended';\r\n\tactivityKey: 'speed_typing';\r\n\tparticipants: Array<{ userId: string; score: number }>;\r\n\tcurrentRoundIndex?: number;\r\n\trounds: Array<{ index: number; state: 'queued' | 'running' | 'done' }>;\r\n\tlobbyReady?: boolean;\r\n\tlobbyPhase?: boolean;\r\n\tpresence?: Array<{ userId: string; joined: boolean; ready: boolean }>;\r\n\tcountdown?: CountdownState | null;\r\n};\r\n\r\ntype RoundStartedPayload = {\r\n\tsessionId: string;\r\n\tindex: number;\r\n\tpayload?: { textSample?: string; timeLimitMs?: number } | null;\r\n};\r\n\r\ntype RoundEndedPayload = {\r\n\tsessionId: string;\r\n\tindex: number;\r\n\tscoreboard: {\r\n\t\tparticipants: Array<{ userId: string; score: number }>;\r\n\t};\r\n};\r\n\r\ntype ScoreUpdatedPayload = {\r\n\tsessionId: string;\r\n\tuserId: string;\r\n\tdelta: number;\r\n\ttotal: number;\r\n};\r\n\r\ntype SessionStartedPayload = {\r\n\tsessionId: string;\r\n\tcurrentRound: number;\r\n};\r\n\r\ntype SessionEndedPayload = {\r\n\tsessionId: string;\r\n\tfinalScoreboard?: {\r\n\t\tparticipants: Array<{ userId: string; score: number }>;\r\n\t\twinnerUserId?: string;\r\n\t};\r\n\twinnerUserId?: string;\r\n\treason?: 'opponent_left' | 'forfeit';\r\n};\r\n\r\ntype PresenceEventPayload = {\r\n\tsessionId: string;\r\n\tparticipants: Array<{ userId: string; joined: boolean; ready: boolean }>;\r\n\tlobbyReady?: boolean;\r\n\tphase?: 'lobby' | 'countdown' | 'running';\r\n};\r\n\r\ntype CountdownEventPayload = {\r\n\tsessionId: string;\r\n\tstartedAt: number;\r\n\tdurationMs: number;\r\n\tendsAt: number;\r\n\treason?: 'lobby' | 'intermission';\r\n\tnextRoundIndex?: number;\r\n};\r\n\r\ntype CountdownCancelledPayload = {\r\n\tsessionId: string;\r\n\treason: string;\r\n};\r\n\r\ntype PenaltyAppliedPayload = {\r\n\tsessionId: string;\r\n\tuserId: string;\r\n\tamount?: number;\r\n\tincidents?: Array<{ type: string;[key: string]: unknown }>;\r\n};\r\n\r\ntype PongPayload = {\r\n\ttServerMs: number;\r\n\tskewEstimateMs?: number;\r\n};\r\n\r\ntype ErrorPayload = {\r\n\tcode?: string;\r\n\tdetails?: unknown;\r\n};\r\n\r\ntype ServerMessage = {\r\n\ttype: string;\r\n\tpayload?: unknown;\r\n};\r\n\r\nconst CORE_BASE = (process.env.NEXT_PUBLIC_ACTIVITIES_CORE_URL || '/api').replace(/\\/$/, '');\r\nconst PING_INTERVAL_MS = 10_000;\r\nconst SHOULD_LOG_WS_EVENTS = process.env.NODE_ENV !== 'production' && process.env.NODE_ENV !== 'test';\r\n\r\nfunction classifyLatency(rtt: number | undefined): ConnectionQuality | undefined {\r\n\tif (rtt == null) {\r\n\t\treturn undefined;\r\n\t}\r\n\tif (rtt < 200) {\r\n\t\treturn 'Good';\r\n\t}\r\n\tif (rtt < 400) {\r\n\t\treturn 'Fair';\r\n\t}\r\n\treturn 'Poor';\r\n}\r\n\r\nfunction resolveStreamUrl(sessionId: string, token?: string, userId?: string): string {\r\n\tconst isAbsolute = CORE_BASE.startsWith('http://') || CORE_BASE.startsWith('https://');\r\n\tlet origin: string;\r\n\tif (isAbsolute) {\r\n\t\torigin = CORE_BASE.replace(/^http:/, 'ws:').replace(/^https:/, 'wss:');\r\n\t} else if (typeof window !== 'undefined') {\r\n\t\tconst { origin: currentOrigin } = window.location;\r\n\t\tconst wsOrigin = currentOrigin.startsWith('https://')\r\n\t\t\t? `wss://${currentOrigin.slice('https://'.length)}`\r\n\t\t\t: currentOrigin.startsWith('http://')\r\n\t\t\t\t? `ws://${currentOrigin.slice('http://'.length)}`\r\n\t\t\t\t: `ws://${currentOrigin}`;\r\n\t\tconst prefix = CORE_BASE ? (CORE_BASE.startsWith('/') ? CORE_BASE : `/${CORE_BASE}`) : '';\r\n\t\torigin = `${wsOrigin}${prefix}`;\r\n\t} else {\r\n\t\torigin = `ws://localhost${CORE_BASE.startsWith('/') ? CORE_BASE : CORE_BASE ? `/${CORE_BASE}` : ''}`;\r\n\t}\r\n\tconst base = `${origin}/activities/session/${sessionId}/stream`;\r\n\tconst params: Record<string, string> = {};\r\n\tif (token) {\r\n\t\tparams.authToken = token;\r\n\t}\r\n\tif (userId) {\r\n\t\tparams.userId = userId;\r\n\t}\r\n\tconst keys = Object.keys(params);\r\n\tif (keys.length === 0) {\r\n\t\treturn base;\r\n\t}\r\n\tconst query = keys.map((k) => `${encodeURIComponent(k)}=${encodeURIComponent(params[k])}`).join('&');\r\n\tconst glue = base.includes('?') ? (base.endsWith('?') ? '' : '&') : '?';\r\n\treturn `${base}${glue}${query}`;\r\n}\r\n\r\nfunction mergeScoreboard(current: ScoreboardEntry[], updates: Array<{ userId: string; score: number }>): ScoreboardEntry[] {\r\n\tconst map = new Map<string, ScoreboardEntry>();\r\n\tfor (const entry of current) {\r\n\t\tmap.set(entry.userId, { ...entry });\r\n\t}\r\n\tfor (const update of updates) {\r\n\t\tconst existing = map.get(update.userId);\r\n\t\tmap.set(update.userId, {\r\n\t\t\tuserId: update.userId,\r\n\t\t\tscore: update.score,\r\n\t\t\tdisplayName: existing?.displayName ?? null,\r\n\t\t\thandle: existing?.handle ?? null,\r\n\t\t\tavatarUrl: existing?.avatarUrl ?? null,\r\n\t\t});\r\n\t}\r\n\treturn Array.from(map.values()).sort((a, b) => b.score - a.score);\r\n}\r\n\r\nexport function useSpeedTypingSession(options: UseSpeedTypingOptions) {\r\n\tconst { sessionId: initialSessionId, autoStart = false, peerId } = options;\r\n\tconst selfUserIdRef = useRef<string>(getSelf());\r\n\r\n\tconst [state, setState] = useState<SessionState>({ phase: 'idle', scoreboard: [], penalty: null });\r\n\tconst [textSample, setTextSample] = useState('');\r\n\tconst [timeLimitMs, setTimeLimitMs] = useState<number | undefined>(undefined);\r\n\tconst [typedText, setTypedText] = useState('');\r\n\tconst [submitted, setSubmitted] = useState(false);\r\n\tconst [countdownTick, setCountdownTick] = useState(0); // drives countdown re-render cadence\r\n\r\n\tconst wsRef = useRef<WebSocket | null>(null);\r\n\tconst sessionIdRef = useRef<string | null>(initialSessionId ?? null);\r\n\tconst joinedRef = useRef(false);\r\n\tconst closingRef = useRef(false);\r\n\tconst countdownIntervalRef = useRef<ReturnType<typeof setInterval> | null>(null);\r\n\tconst toastRef = useRef<{ message: string; timeoutId: ReturnType<typeof setTimeout> | null }>({ message: '', timeoutId: null });\r\n\tconst creatingRef = useRef(false);\r\n\tconst lastPingSentRef = useRef<number>(0);\r\n\tconst autoStartTriggeredRef = useRef(false);\r\n\tconst outcomeRecordedRef = useRef(false);\r\n\r\n\tconst pushToast = useCallback((message: string, ttl = 2500) => {\r\n\t\tif (toastRef.current.timeoutId) {\r\n\t\t\tclearTimeout(toastRef.current.timeoutId);\r\n\t\t}\r\n\t\ttoastRef.current.message = message;\r\n\t\ttoastRef.current.timeoutId = setTimeout(() => {\r\n\t\t\ttoastRef.current.message = '';\r\n\t\t\ttoastRef.current.timeoutId = null;\r\n\t\t}, ttl);\r\n\t}, []);\r\n\r\n\tconst handleSnapshot = useCallback((payload: SessionSnapshotPayload) => {\r\n\t\tsetState((prev) => {\r\n\t\t\tconst nextScoreboard = mergeScoreboard(prev.scoreboard, payload.participants);\r\n\t\t\tconst participants = payload.presence?.map((entry) => {\r\n\t\t\t\tconst existing = prev.lobby?.participants.find((candidate) => candidate.userId === entry.userId);\r\n\t\t\t\treturn {\r\n\t\t\t\t\tuserId: entry.userId,\r\n\t\t\t\t\tjoined: entry.joined,\r\n\t\t\t\t\tready: entry.ready,\r\n\t\t\t\t\tdisplayName: existing?.displayName ?? null,\r\n\t\t\t\t\thandle: existing?.handle ?? null,\r\n\t\t\t\t\tavatarUrl: existing?.avatarUrl ?? null,\r\n\t\t\t\t};\r\n\t\t\t}) ?? prev.lobby?.participants ?? [];\r\n\r\n\t\t\tlet nextPhase: SessionPhase = prev.phase;\r\n\t\t\tif (payload.status === 'ended') {\r\n\t\t\t\tnextPhase = 'ended';\r\n\t\t\t} else if (payload.countdown) {\r\n\t\t\t\tnextPhase = 'countdown';\r\n\t\t\t} else if (payload.status === 'running') {\r\n\t\t\t\tnextPhase = 'running';\r\n\t\t\t} else if (prev.phase === 'idle' || prev.phase === 'connecting') {\r\n\t\t\t\tnextPhase = 'lobby';\r\n\t\t\t}\r\n\r\n\t\t\t// Grace period: avoid a snapshot instantly overwriting an active countdown\r\n\t\t\t// when backend snapshot emission lags the separate countdown event.\r\n\t\t\tconst now = Date.now();\r\n\t\t\tconst countdownActive = prev.phase === 'countdown' && prev.countdown && typeof prev.countdown.endsAt === 'number' && prev.countdown.endsAt > now;\r\n\t\t\tif (!payload.countdown && countdownActive && payload.status !== 'running' && payload.status !== 'ended') {\r\n\t\t\t\tnextPhase = 'countdown';\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\t...prev,\r\n\t\t\t\tphase: nextPhase,\r\n\t\t\t\tsessionId: payload.id,\r\n\t\t\t\tactivityKey: payload.activityKey,\r\n\t\t\t\tcurrentRound: payload.currentRoundIndex,\r\n\t\t\t\tscoreboard: nextScoreboard,\r\n\t\t\t\tcountdown: payload.countdown ?? (nextPhase === 'countdown' ? prev.countdown : undefined),\r\n\t\t\t\tlobby: payload.presence\r\n\t\t\t\t\t? {\r\n\t\t\t\t\t\tparticipants,\r\n\t\t\t\t\t\tready: Boolean(payload.lobbyReady),\r\n\t\t\t\t\t\tphase: payload.countdown || (nextPhase === 'countdown' && countdownActive) ? 'countdown' : nextPhase === 'running' ? 'running' : 'lobby',\r\n\t\t\t\t\t}\r\n\t\t\t\t\t: prev.lobby,\r\n\t\t\t\terror: undefined,\r\n\t\t\t};\r\n\t\t});\r\n\t\tsetSubmitted(false);\r\n\t\tsetTypedText('');\r\n\t\tsetCountdownTick((tick) => tick + 1);\r\n\t}, []);\r\n\r\n\tconst handlePresenceEvent = useCallback((payload: PresenceEventPayload) => {\r\n\t\tsetState((prev) => ({\r\n\t\t\t...prev,\r\n\t\t\tphase: payload.phase ?? prev.phase,\r\n\t\t\tlobby: {\r\n\t\t\t\tparticipants: payload.participants.map((participant) => {\r\n\t\t\t\t\tconst existing = prev.lobby?.participants.find((entry) => entry.userId === participant.userId);\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tuserId: participant.userId,\r\n\t\t\t\t\t\tjoined: participant.joined,\r\n\t\t\t\t\t\tready: participant.ready,\r\n\t\t\t\t\t\tdisplayName: existing?.displayName ?? null,\r\n\t\t\t\t\t\thandle: existing?.handle ?? null,\r\n\t\t\t\t\t\tavatarUrl: existing?.avatarUrl ?? null,\r\n\t\t\t\t\t};\r\n\t\t\t\t}),\r\n\t\t\t\tready: Boolean(payload.lobbyReady),\r\n\t\t\t\tphase: payload.phase ?? prev.lobby?.phase ?? 'lobby',\r\n\t\t\t},\r\n\t\t}));\r\n\t}, []);\r\n\r\n\tconst handleCountdownEvent = useCallback((payload: CountdownEventPayload) => {\r\n\t\tsetState((prev) => ({\r\n\t\t\t...prev,\r\n\t\t\tphase: 'countdown',\r\n\t\t\tcountdown: {\r\n\t\t\t\tstartedAt: payload.startedAt,\r\n\t\t\t\tdurationMs: payload.durationMs,\r\n\t\t\t\tendsAt: payload.endsAt,\r\n\t\t\t\treason: payload.reason,\r\n\t\t\t\tnextRoundIndex: payload.nextRoundIndex,\r\n\t\t\t},\r\n\t\t}));\r\n\t\tsetCountdownTick((tick) => tick + 1);\r\n\t}, []);\r\n\r\n\tconst handleCountdownCancelled = useCallback((payload: CountdownCancelledPayload) => {\r\n\t\tsetState((prev) => ({\r\n\t\t\t...prev,\r\n\t\t\tphase: prev.phase === 'countdown' ? 'lobby' : prev.phase,\r\n\t\t\tcountdown: undefined,\r\n\t\t\terror: payload.reason === 'participant_unready' ? 'Opponent is no longer ready.' : prev.error,\r\n\t\t}));\r\n\t}, []);\r\n\r\n\tconst handleRoundStarted = useCallback((payload: RoundStartedPayload) => {\r\n\t\tsetState((prev) => ({\r\n\t\t\t...prev,\r\n\t\t\tphase: 'running',\r\n\t\t\tcurrentRound: payload.index,\r\n\t\t\tcountdown: undefined,\r\n\t\t\tlobby: undefined,\r\n\t\t}));\r\n\t\tsetSubmitted(false);\r\n\t\tsetTypedText('');\r\n\t\tsetTextSample(payload.payload?.textSample ?? '');\r\n\t\tsetTimeLimitMs(payload.payload?.timeLimitMs ?? undefined);\r\n\t}, []);\r\n\r\n\tconst handleRoundEnded = useCallback((payload: RoundEndedPayload) => {\r\n\t\tsetState((prev) => ({\r\n\t\t\t...prev,\r\n\t\t\tscoreboard: mergeScoreboard(prev.scoreboard, payload.scoreboard.participants),\r\n\t\t}));\r\n\t}, []);\r\n\r\n\tconst handleScoreUpdated = useCallback((payload: ScoreUpdatedPayload) => {\r\n\t\tsetState((prev) => ({\r\n\t\t\t...prev,\r\n\t\t\tscoreboard: mergeScoreboard(prev.scoreboard, [{ userId: payload.userId, score: payload.total }]),\r\n\t\t}));\r\n\t}, []);\r\n\r\n\tconst handleSessionStarted = useCallback((payload: SessionStartedPayload) => {\r\n\t\tsetState((prev) => ({\r\n\t\t\t...prev,\r\n\t\t\tphase: 'running',\r\n\t\t\tcurrentRound: payload.currentRound,\r\n\t\t\tcountdown: undefined,\r\n\t\t}));\r\n\t}, []);\r\n\r\n\tconst handleSessionEnded = useCallback((payload: SessionEndedPayload) => {\r\n\t\tsetState((prev) => ({\r\n\t\t\t...prev,\r\n\t\t\tphase: 'ended',\r\n\t\t\twinnerUserId: payload.winnerUserId ?? payload.finalScoreboard?.winnerUserId,\r\n\t\t\tcountdown: undefined,\r\n\t\t\tlobby: undefined,\r\n\t\t\tscoreboard: payload.finalScoreboard\r\n\t\t\t\t? mergeScoreboard(prev.scoreboard, payload.finalScoreboard.participants)\r\n\t\t\t\t: prev.scoreboard,\r\n\t\t\tleaveReason: payload.reason === 'opponent_left' ? 'opponent_left' : undefined,\r\n\t\t}));\r\n\t}, []);\r\n\r\n\tconst handlePenaltyApplied = useCallback((payload: PenaltyAppliedPayload) => {\r\n\t\tconst labels = payload.incidents?.map((incident) => incident.type).filter(Boolean) ?? [];\r\n\t\tconst message = labels.length > 0 ? labels.join(', ') : 'Penalty applied';\r\n\t\tconst suffix = payload.amount ? ` (-${payload.amount})` : '';\r\n\t\tconst fullMessage = `${message}${suffix}`;\r\n\t\tsetState((prev) => ({\r\n\t\t\t...prev,\r\n\t\t\tpenalty: { message: fullMessage, kind: labels[0] },\r\n\t\t}));\r\n\t\tsetTimeout(() => {\r\n\t\t\tsetState((prev) => (prev.penalty?.message === fullMessage ? { ...prev, penalty: null } : prev));\r\n\t\t}, 1_200);\r\n\t}, []);\r\n\r\n\tconst handlePong = useCallback((payload: PongPayload) => {\r\n\t\tconst now = performance.now();\r\n\t\tconst rtt = now - lastPingSentRef.current;\r\n\t\tsetState((prev) => ({\r\n\t\t\t...prev,\r\n\t\t\tskewEstimateMs: payload.skewEstimateMs,\r\n\t\t\trttMs: rtt,\r\n\t\t\tconnectionQuality: classifyLatency(rtt),\r\n\t\t}));\r\n\t}, []);\r\n\r\n\tconst handleErrorMessage = useCallback((payload: ErrorPayload | undefined) => {\r\n\t\tconst code = payload?.code ?? 'session_error';\r\n\t\tif (typeof window !== 'undefined') {\r\n\t\t\t(window as unknown as { __activitiesLastError?: ErrorPayload | undefined }).__activitiesLastError = payload;\r\n\t\t}\r\n\t\t// Surface detailed payload in the console so we can pinpoint backend failures quickly.\r\n\t\tif (process.env.NODE_ENV !== 'production') {\r\n\t\t\t// eslint-disable-next-line no-console\r\n\t\t\tconsole.error('[speed-typing] session error payload', payload);\r\n\t\t}\r\n\t\tsetState((prev) => ({ ...prev, error: code }));\r\n\t\tconst details = payload && 'details' in payload ? JSON.stringify(payload.details) : undefined;\r\n\t\tpushToast(`Session error: ${code}${details ? ` ΓÇö ${details}` : ''}`);\r\n\t}, [pushToast]);\r\n\r\n\tconst handleServerMessage = useCallback(\r\n\t\t(event: MessageEvent<string>) => {\r\n\t\t\tlet parsed: ServerMessage | null = null;\r\n\t\t\ttry {\r\n\t\t\t\tparsed = JSON.parse(event.data) as ServerMessage;\r\n\t\t\t} catch {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (!parsed || typeof parsed.type !== 'string') {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tswitch (parsed.type) {\r\n\t\t\t\tcase 'session.snapshot':\r\n\t\t\t\t\tif (SHOULD_LOG_WS_EVENTS) {\r\n\t\t\t\t\t\t// eslint-disable-next-line no-console\r\n\t\t\t\t\t\tconsole.debug('[speed-typing] ws snapshot', { sessionId: sessionIdRef.current });\r\n\t\t\t\t\t}\r\n\t\t\t\t\thandleSnapshot(parsed.payload as SessionSnapshotPayload);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'activity.round.started':\r\n\t\t\t\t\tif (SHOULD_LOG_WS_EVENTS) {\r\n\t\t\t\t\t\tconst payload = parsed.payload as RoundStartedPayload | undefined;\r\n\t\t\t\t\t\tif (payload) {\r\n\t\t\t\t\t\t\t// eslint-disable-next-line no-console\r\n\t\t\t\t\t\t\tconsole.debug('[speed-typing] ws round.started', {\r\n\t\t\t\t\t\t\t\tsessionId: payload.sessionId,\r\n\t\t\t\t\t\t\t\tindex: payload.index,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\thandleRoundStarted(parsed.payload as RoundStartedPayload);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'activity.round.ended':\r\n\t\t\t\t\tif (SHOULD_LOG_WS_EVENTS) {\r\n\t\t\t\t\t\tconst payload = parsed.payload as RoundEndedPayload | undefined;\r\n\t\t\t\t\t\tif (payload) {\r\n\t\t\t\t\t\t\t// eslint-disable-next-line no-console\r\n\t\t\t\t\t\t\tconsole.debug('[speed-typing] ws round.ended', {\r\n\t\t\t\t\t\t\t\tsessionId: payload.sessionId,\r\n\t\t\t\t\t\t\t\tindex: payload.index,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\thandleRoundEnded(parsed.payload as RoundEndedPayload);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'activity.session.started':\r\n\t\t\t\t\thandleSessionStarted(parsed.payload as SessionStartedPayload);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'activity.session.ended':\r\n\t\t\t\t\tif (SHOULD_LOG_WS_EVENTS) {\r\n\t\t\t\t\t\tconst payload = parsed.payload as SessionEndedPayload | undefined;\r\n\t\t\t\t\t\tif (payload) {\r\n\t\t\t\t\t\t\t// eslint-disable-next-line no-console\r\n\t\t\t\t\t\t\tconsole.debug('[speed-typing] ws session.ended', {\r\n\t\t\t\t\t\t\t\tsessionId: payload.sessionId,\r\n\t\t\t\t\t\t\t\twinnerUserId: payload.winnerUserId ?? payload.finalScoreboard?.winnerUserId,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\thandleSessionEnded(parsed.payload as SessionEndedPayload);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'activity.session.presence':\r\n\t\t\t\t\thandlePresenceEvent(parsed.payload as PresenceEventPayload);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'activity.session.countdown':\r\n\t\t\t\t\tif (SHOULD_LOG_WS_EVENTS) {\r\n\t\t\t\t\t\tconst payload = parsed.payload as CountdownEventPayload | undefined;\r\n\t\t\t\t\t\tif (payload) {\r\n\t\t\t\t\t\t\tconst secondsRemaining =\r\n\t\t\t\t\t\t\t\ttypeof payload.endsAt === 'number'\r\n\t\t\t\t\t\t\t\t\t? Math.max(Math.round((payload.endsAt - Date.now()) / 1000), 0)\r\n\t\t\t\t\t\t\t\t\t: undefined;\r\n\t\t\t\t\t\t\t// eslint-disable-next-line no-console\r\n\t\t\t\t\t\t\tconsole.debug('[speed-typing] ws session.countdown', {\r\n\t\t\t\t\t\t\t\tsessionId: payload.sessionId,\r\n\t\t\t\t\t\t\t\treason: payload.reason,\r\n\t\t\t\t\t\t\t\tnextRoundIndex: payload.nextRoundIndex,\r\n\t\t\t\t\t\t\t\tsecondsRemaining,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\thandleCountdownEvent(parsed.payload as CountdownEventPayload);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'activity.session.countdown.cancelled':\r\n\t\t\t\t\thandleCountdownCancelled(parsed.payload as CountdownCancelledPayload);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'activity.score.updated':\r\n\t\t\t\t\thandleScoreUpdated(parsed.payload as ScoreUpdatedPayload);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'activity.penalty.applied':\r\n\t\t\t\t\thandlePenaltyApplied(parsed.payload as PenaltyAppliedPayload);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'ack': {\r\n\t\t\t\t\t// After submission acknowledgement, request fresh participants for scoreboard merge.\r\n\t\t\t\t\tconst id = sessionIdRef.current;\r\n\t\t\t\t\tif (id) {\r\n\t\t\t\t\t\tvoid fetchSessionSnapshot(id)\r\n\t\t\t\t\t\t\t.then((snap) => {\r\n\t\t\t\t\t\t\t\tif (!snap) return;\r\n\t\t\t\t\t\t\t\tconst participants = Array.isArray((snap as { participants?: Array<{ userId: string; score: number }> }).participants)\r\n\t\t\t\t\t\t\t\t\t? (snap as { participants: Array<{ userId: string; score: number }> }).participants\r\n\t\t\t\t\t\t\t\t\t: [];\r\n\t\t\t\t\t\t\t\tsetState((prev) => ({\r\n\t\t\t\t\t\t\t\t\t...prev,\r\n\t\t\t\t\t\t\t\t\tscoreboard: mergeScoreboard(prev.scoreboard, participants),\r\n\t\t\t\t\t\t\t\t}));\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.catch(() => undefined);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tcase 'pong':\r\n\t\t\t\t\thandlePong(parsed.payload as PongPayload);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'error':\r\n\t\t\t\t\thandleErrorMessage(parsed.payload as ErrorPayload);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t},\r\n\t\t[\r\n\t\t\thandleCountdownCancelled,\r\n\t\t\thandleCountdownEvent,\r\n\t\t\thandleErrorMessage,\r\n\t\t\thandlePenaltyApplied,\r\n\t\t\thandlePong,\r\n\t\t\thandlePresenceEvent,\r\n\t\t\thandleRoundEnded,\r\n\t\t\thandleRoundStarted,\r\n\t\t\thandleScoreUpdated,\r\n\t\t\thandleSessionEnded,\r\n\t\t\thandleSessionStarted,\r\n\t\t\thandleSnapshot,\r\n\t\t],\r\n\t);\r\n\r\n\tconst disconnectSocket = useCallback(() => {\r\n\t\tconst socket = wsRef.current;\r\n\t\tif (!socket) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tclosingRef.current = true;\r\n\t\ttry {\r\n\t\t\tsocket.close(1000, 'component_disposed');\r\n\t\t} catch {\r\n\t\t\t/* ignore close errors */\r\n\t\t}\r\n\t\twsRef.current = null;\r\n\t}, []);\r\n\r\n\tconst connectStream = useCallback(\r\n\t\t(id: string) => {\r\n\t\t\tif (typeof window === 'undefined') {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst auth = readAuthSnapshot();\r\n\t\t\tconst token = auth?.access_token;\r\n\t\t\tconst selfId = selfUserIdRef.current;\r\n\t\t\tconst url = resolveStreamUrl(id, token, selfId);\r\n\t\t\tif (process.env.NODE_ENV !== 'production') {\r\n\t\t\t\t// eslint-disable-next-line no-console\r\n\t\t\t\tconsole.debug('[speed-typing] opening stream', url);\r\n\t\t\t}\r\n\t\t\tconst socket = new WebSocket(url);\r\n\t\t\twsRef.current = socket;\r\n\t\t\tclosingRef.current = false;\r\n\r\n\t\t\tsocket.addEventListener('open', () => {\r\n\t\t\t\tsetState((prev) => ({ ...prev, phase: prev.phase === 'idle' ? 'connecting' : prev.phase }));\r\n\t\t\t});\r\n\r\n\t\t\tsocket.addEventListener('message', handleServerMessage);\r\n\r\n\t\t\tsocket.addEventListener('close', (event) => {\r\n\t\t\t\tif (process.env.NODE_ENV !== 'production') {\r\n\t\t\t\t\t// eslint-disable-next-line no-console\r\n\t\t\t\t\tconsole.warn('[speed-typing] stream closed', { code: event.code, reason: event.reason });\r\n\t\t\t\t}\r\n\t\t\t\tif (wsRef.current === socket) {\r\n\t\t\t\t\twsRef.current = null;\r\n\t\t\t\t}\r\n\t\t\t\t// Fallback: if we missed 'session.ended', try a final snapshot to resolve winner/scoreboard\r\n\t\t\t\tconst currentId = sessionIdRef.current;\r\n\t\t\t\tif (currentId && !closingRef.current) {\r\n\t\t\t\t\tvoid fetchSessionSnapshot(currentId)\r\n\t\t\t\t\t\t.then((snap) => {\r\n\t\t\t\t\t\t\tif (!snap) return;\r\n\t\t\t\t\t\t\tconst participants = Array.isArray(snap.participants) ? snap.participants : [];\r\n\t\t\t\t\t\t\tconst roundsHolder = (snap as unknown as { rounds?: Array<{ state: string }> });\r\n\t\t\t\t\t\t\tconst rounds = Array.isArray(roundsHolder.rounds) ? roundsHolder.rounds : [];\r\n\t\t\t\t\t\t\tconst allDone = rounds.length > 0 && rounds.every((r) => r.state === 'done');\r\n\t\t\t\t\t\t\tconst statusHolder = snap as unknown as { status?: string };\r\n\t\t\t\t\t\t\tif (allDone || statusHolder.status === 'ended') {\r\n\t\t\t\t\t\t\t\tsetState((prev) => {\r\n\t\t\t\t\t\t\t\t\tconst merged = mergeScoreboard(prev.scoreboard, participants);\r\n\t\t\t\t\t\t\t\t\tconst winnerId = merged[0]?.userId;\r\n\t\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t\t...prev,\r\n\t\t\t\t\t\t\t\t\t\tphase: 'ended',\r\n\t\t\t\t\t\t\t\t\t\twinnerUserId: winnerId ?? prev.winnerUserId,\r\n\t\t\t\t\t\t\t\t\t\tscoreboard: merged,\r\n\t\t\t\t\t\t\t\t\t\tconnectionQuality: undefined,\r\n\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// Not ended; mark as error unless already ended\r\n\t\t\t\t\t\t\tsetState((prev) => ({ ...prev, phase: prev.phase === 'ended' ? prev.phase : 'error', connectionQuality: undefined }));\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch(() => {\r\n\t\t\t\t\t\t\tsetState((prev) => ({ ...prev, phase: prev.phase === 'ended' ? prev.phase : 'error', connectionQuality: undefined }));\r\n\t\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetState((prev) => ({ ...prev, phase: prev.phase === 'ended' ? prev.phase : 'error', connectionQuality: undefined }));\r\n\t\t\t\t}\r\n\t\t\t\tclosingRef.current = false;\r\n\t\t\t});\r\n\r\n\t\t\tsocket.addEventListener('error', (event) => {\r\n\t\t\t\tif (process.env.NODE_ENV !== 'production') {\r\n\t\t\t\t\t// eslint-disable-next-line no-console\r\n\t\t\t\t\tconsole.error('[speed-typing] stream error', event);\r\n\t\t\t\t}\r\n\t\t\t\tsetState((prev) => ({ ...prev, phase: prev.phase === 'ended' ? prev.phase : 'error' }));\r\n\t\t\t});\r\n\t\t},\r\n\t\t[handleServerMessage],\r\n\t);\r\n\r\n\tconst sendSocketMessage = useCallback((message: OutboundMessage) => {\r\n\t\tconst socket = wsRef.current;\r\n\t\tif (socket && socket.readyState === WebSocket.OPEN) {\r\n\t\t\tsocket.send(JSON.stringify(message));\r\n\t\t}\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\t// Capture the current timeout id so cleanup doesn't rely on a potentially changed ref\r\n\t\tconst activeTimeout = toastRef.current.timeoutId;\r\n\t\treturn () => {\r\n\t\t\tif (activeTimeout) {\r\n\t\t\t\tclearTimeout(activeTimeout);\r\n\t\t\t}\r\n\t\t};\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (state.countdown && !countdownIntervalRef.current) {\r\n\t\t\tcountdownIntervalRef.current = setInterval(() => {\r\n\t\t\t\tsetCountdownTick((tick) => tick + 1);\r\n\t\t\t}, 150);\r\n\t\t} else if (!state.countdown && countdownIntervalRef.current) {\r\n\t\t\tclearInterval(countdownIntervalRef.current);\r\n\t\t\tcountdownIntervalRef.current = null;\r\n\t\t}\r\n\t}, [state.countdown]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (typeof window === 'undefined') {\r\n\t\t\treturn () => undefined;\r\n\t\t}\r\n\r\n\t\t// Capture the current self user id at effect start to use in async flows and cleanup\r\n\t\tconst selfIdStable = selfUserIdRef.current;\r\n\r\n\t\tlet cancelled = false;\r\n\r\n\t\tconst initialise = async () => {\r\n\t\t\tconst selfId = selfIdStable;\r\n\t\t\tsetState((prev) => ({ ...prev, phase: 'connecting', error: undefined }));\r\n\r\n\t\t\ttry {\r\n\t\t\t\tlet targetSessionId = initialSessionId;\r\n\t\t\t\tif (!targetSessionId) {\r\n\t\t\t\t\tif (!peerId) {\r\n\t\t\t\t\t\tthrow new Error('peer_required');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (creatingRef.current) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcreatingRef.current = true;\r\n\t\t\t\t\tconst created = await createSession('speed_typing', [selfId, peerId]);\r\n\t\t\t\t\ttargetSessionId = created.sessionId;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (cancelled || !targetSessionId) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsessionIdRef.current = targetSessionId;\r\n\r\n\t\t\t\tconst sessionToJoin = targetSessionId;\r\n\t\t\t\tif (!sessionToJoin) {\r\n\t\t\t\t\tthrow new Error(\"missing_session\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst waitForRoster = async () => {\r\n\t\t\t\t\tif (typeof fetchSessionSnapshot !== 'function') {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst maxChecks = 6;\r\n\t\t\t\t\tfor (let attempt = 0; attempt < maxChecks; attempt += 1) {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tconst snapshot = await fetchSessionSnapshot(sessionToJoin);\r\n\t\t\t\t\t\t\tconst participants = snapshot?.participants ?? [];\r\n\t\t\t\t\t\t\tconst presence = snapshot?.presence ?? [];\r\n\t\t\t\t\t\t\tconst exists = participants.some((entry) => entry.userId === selfId) || presence.some((entry) => entry.userId === selfId);\r\n\t\t\t\t\t\t\tif (exists) {\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} catch {\r\n\t\t\t\t\t\t\t// Ignore snapshot fetch errors and retry; join retry handles hard failures.\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconst delay = 200 * Math.pow(2, attempt);\r\n\t\t\t\t\t\tawait new Promise((resolve) => setTimeout(resolve, delay));\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t};\r\n\r\n\t\t\t\tconst joinWithRetry = async () => {\r\n\t\t\t\t\tconst maxAttempts = 5;\r\n\t\t\t\t\tlet attempt = 0;\r\n\t\t\t\t\tlet lastError: unknown = null;\r\n\t\t\t\t\twhile (attempt < maxAttempts) {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tawait joinSession(sessionToJoin, selfId);\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\t\tlastError = error;\r\n\t\t\t\t\t\t\tconst message = error instanceof Error ? error.message : \"\";\r\n\t\t\t\t\t\t\tif (!message.includes(\"participant_not_found\")) {\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tconst delay = 200 * Math.pow(2, attempt);\r\n\t\t\t\t\t\t\tawait new Promise((resolve) => setTimeout(resolve, delay));\r\n\t\t\t\t\t\t\tattempt += 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthrow lastError ?? new Error(\"join_failed\");\r\n\t\t\t\t};\r\n\r\n\t\t\t\tconst rosterReady = await waitForRoster();\r\n\t\t\t\tif (cancelled) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (!rosterReady) {\r\n\t\t\t\t\tthrow new Error('participant_not_registered');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tawait joinWithRetry();\r\n\t\t\t\tif (cancelled) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tjoinedRef.current = true;\r\n\t\t\t\tconnectStream(targetSessionId);\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconst message = error instanceof Error ? error.message : 'session_init_failed';\r\n\t\t\t\tif (!cancelled) {\r\n\t\t\t\t\tsetState((prev) => ({ ...prev, phase: 'error', error: message }));\r\n\t\t\t\t\tpushToast(`Unable to join session: ${message}`);\r\n\t\t\t\t}\r\n\t\t\t} finally {\r\n\t\t\t\tcreatingRef.current = false;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tdisconnectSocket();\r\n\t\tif (countdownIntervalRef.current) {\r\n\t\t\tclearInterval(countdownIntervalRef.current);\r\n\t\t\tcountdownIntervalRef.current = null;\r\n\t\t}\r\n\r\n\t\tvoid initialise();\r\n\r\n\t\treturn () => {\r\n\t\t\tcancelled = true;\r\n\t\t\tdisconnectSocket();\r\n\t\t\tif (countdownIntervalRef.current) {\r\n\t\t\t\tclearInterval(countdownIntervalRef.current);\r\n\t\t\t\tcountdownIntervalRef.current = null;\r\n\t\t\t}\r\n\t\t\tconst currentId = sessionIdRef.current;\r\n\t\t\t// Guard: only attempt leave if we still have an active session id\r\n\t\t\t// and we previously joined. Once leave reports that the session is\r\n\t\t\t// ended, clear local state so we don't reuse stale IDs.\r\n\t\t\tif (currentId && joinedRef.current) {\r\n\t\t\t\tjoinedRef.current = false;\r\n\t\t\t\tvoid leaveSession(currentId, selfIdStable)\r\n\t\t\t\t\t.then((result) => {\r\n\t\t\t\t\t\tif (result === 'session_ended') {\r\n\t\t\t\t\t\t\tpushToast('Session ended, start a new session to play again.');\r\n\t\t\t\t\t\t\t// Clear client-side session tracking so no further /leave or\r\n\t\t\t\t\t\t\t// /ready calls are made with a stale id.\r\n\t\t\t\t\t\t\tsessionIdRef.current = null;\r\n\t\t\t\t\t\t\tsetState((prev) => ({\r\n\t\t\t\t\t\t\t\t...prev,\r\n\t\t\t\t\t\t\t\tphase: 'idle',\r\n\t\t\t\t\t\t\t\tsessionId: undefined,\r\n\t\t\t\t\t\t\t}));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(() => undefined);\r\n\t\t\t}\r\n\t\t};\r\n\t}, [connectStream, disconnectSocket, initialSessionId, peerId, pushToast, selfUserIdRef]);\r\n\r\n\tconst markReady = useCallback(\r\n\t\tasync (ready: boolean) => {\r\n\t\t\tconst id = sessionIdRef.current;\r\n\t\t\tif (!id) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\ttry {\r\n\t\t\t\tawait setSessionReady(id, selfUserIdRef.current, ready);\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconst message = error instanceof Error ? error.message : 'ready_failed';\r\n\t\t\t\tpushToast(message);\r\n\t\t\t}\r\n\t\t},\r\n\t\t[pushToast],\r\n\t);\r\n\r\n\tconst recordKeystroke = useCallback(\r\n\t\t(len: number, isPaste?: boolean) => {\r\n\t\t\tconst now = performance.now();\r\n\t\t\tif (now - lastPingSentRef.current > PING_INTERVAL_MS) {\r\n\t\t\t\tlastPingSentRef.current = now;\r\n\t\t\t\tsendSocketMessage({ type: 'ping', payload: { tClientMs: Date.now() } });\r\n\t\t\t}\r\n\t\t\tsendSocketMessage({\r\n\t\t\t\ttype: 'keystroke',\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\tuserId: selfUserIdRef.current,\r\n\t\t\t\t\ttClientMs: Date.now(),\r\n\t\t\t\t\tlen,\r\n\t\t\t\t\tisPaste,\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t},\r\n\t\t[sendSocketMessage],\r\n\t);\r\n\r\n\tconst onChangeText = useCallback(\r\n\t\t(value: string) => {\r\n\t\t\tsetTypedText(value);\r\n\t\t\trecordKeystroke(value.length);\r\n\t\t},\r\n\t\t[recordKeystroke],\r\n\t);\r\n\r\n\tconst submit = useCallback(() => {\r\n\t\tif (submitted || state.phase !== 'running') {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsendSocketMessage({\r\n\t\t\ttype: 'submit',\r\n\t\t\tpayload: {\r\n\t\t\t\tuserId: selfUserIdRef.current,\r\n\t\t\t\ttypedText,\r\n\t\t\t\tclientMs: Date.now(),\r\n\t\t\t},\r\n\t\t});\r\n\t\tsetSubmitted(true);\r\n\t}, [sendSocketMessage, state.phase, submitted, typedText]);\r\n\r\n\tconst onKeyDown = useCallback(\r\n\t\t(event: KeyboardEvent<HTMLTextAreaElement>) => {\r\n\t\t\tif ((event.ctrlKey || event.metaKey) && (event.key === 'v' || event.key === 'V')) {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tpushToast('Paste blocked');\r\n\t\t\t\trecordKeystroke(typedText.length, true);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (event.shiftKey && event.key === 'Insert') {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tpushToast('Paste blocked');\r\n\t\t\t\trecordKeystroke(typedText.length, true);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (event.key === 'Enter' && textSample && typedText.length >= textSample.length) {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tsubmit();\r\n\t\t\t}\r\n\t\t},\r\n\t\t[pushToast, recordKeystroke, submit, textSample, typedText.length],\r\n\t);\r\n\r\n\tconst markPasteDetected = useCallback(() => {\r\n\t\trecordKeystroke(typedText.length, true);\r\n\t}, [recordKeystroke, typedText.length]);\r\n\r\n\tconst readyUp = useCallback(async () => {\r\n\t\tawait markReady(true);\r\n\t}, [markReady]);\r\n\r\n\tconst unready = useCallback(async () => {\r\n\t\tawait markReady(false);\r\n\t}, [markReady]);\r\n\r\n\tconst leave = useCallback(async () => {\r\n\t\tconst id = sessionIdRef.current;\r\n\t\tconst selfId = selfUserIdRef.current;\r\n\t\tif (!id || !selfId) return;\r\n\r\n\t\t// Send leave via WebSocket first for immediate feedback\r\n\t\tconst ws = wsRef.current;\r\n\t\tif (ws && ws.readyState === WebSocket.OPEN) {\r\n\t\t\tws.send(JSON.stringify({\r\n\t\t\t\ttype: 'leave',\r\n\t\t\t\tpayload: { userId: selfId }\r\n\t\t\t}));\r\n\t\t}\r\n\r\n\t\t// Also call REST API as backup\r\n\t\ttry {\r\n\t\t\tawait leaveSession(id, selfId);\r\n\t\t} catch {\r\n\t\t\t// Ignore errors, websocket should handle it\r\n\t\t}\r\n\t}, []);\r\n\r\n\tconst startCountdown = useCallback(async () => {\r\n\t\tconst id = sessionIdRef.current;\r\n\t\tif (!id) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\ttry {\r\n\t\t\tawait startSession(id);\r\n\t\t} catch (error) {\r\n\t\t\tconst message = error instanceof Error ? error.message : 'start_failed';\r\n\t\t\tsetState((prev) => ({ ...prev, error: message }));\r\n\t\t\tpushToast(`Unable to start session: ${message}`);\r\n\t\t}\r\n\t}, [pushToast]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (state.phase === 'lobby') {\r\n\t\t\tautoStartTriggeredRef.current = false;\r\n\t\t}\r\n\t\tif (state.phase === 'lobby' && autoStart && !autoStartTriggeredRef.current) {\r\n\t\t\tautoStartTriggeredRef.current = true;\r\n\t\t\tconst id = sessionIdRef.current;\r\n\t\t\tif (!id) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvoid startSession(id).catch((error: unknown) => {\r\n\t\t\t\tconst message = error instanceof Error ? error.message : 'start_failed';\r\n\t\t\t\tsetState((prev) => ({ ...prev, error: message }));\r\n\t\t\t\tpushToast(`Unable to start session: ${message}`);\r\n\t\t\t});\r\n\t\t}\r\n\t}, [autoStart, pushToast, state.phase]);\r\n\r\n\tuseEffect(() => {\r\n\t\tresetOutcomeGuard(outcomeRecordedRef);\r\n\t}, [state.sessionId]);\r\n\r\n\t// NOTE: Game outcome is recorded by the backend activities-core service via WebSocket\r\n\t// Do NOT record from frontend to avoid double-counting stats\r\n\t// The useEffect that called maybeRecordOutcome has been removed\r\n\r\n\tconst remainingMs = useMemo(() => {\r\n\t\t// include countdownTick to drive updates at ~150ms cadence while countdown is active\r\n\t\tvoid countdownTick;\r\n\t\tif (!state.countdown) {\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\treturn Math.max(0, state.countdown.endsAt - Date.now());\r\n\t}, [state.countdown, countdownTick]);\r\n\r\n\tconst remainingSeconds = remainingMs != null ? Math.ceil(remainingMs / 1000) : undefined;\r\n\tconst countdownFinal = Boolean(remainingMs !== undefined && remainingMs <= 4000);\r\n\r\n\tconst progress = useMemo(() => {\r\n\t\tif (!textSample || state.phase !== 'running') {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\treturn Math.min(1, typedText.length / textSample.length);\r\n\t}, [state.phase, textSample, typedText.length]);\r\n\r\n\tconst wpm = useMemo(() => {\r\n\t\tif (state.phase !== 'running') {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\tconst minutes = timeLimitMs ? timeLimitMs / 60000 : 0.5;\r\n\t\treturn minutes > 0 ? (typedText.length / 5) / minutes : 0;\r\n\t}, [state.phase, timeLimitMs, typedText.length]);\r\n\r\n\tconst accuracy = useMemo(() => {\r\n\t\tif (state.phase !== 'running' || !textSample) {\r\n\t\t\treturn 1;\r\n\t\t}\r\n\t\tlet matches = 0;\r\n\t\tconst bound = Math.min(textSample.length, typedText.length);\r\n\t\tfor (let index = 0; index < bound; index += 1) {\r\n\t\t\tif (textSample[index] === typedText[index]) {\r\n\t\t\t\tmatches += 1;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn textSample.length === 0 ? 1 : matches / textSample.length;\r\n\t}, [state.phase, textSample, typedText]);\r\n\r\n\treturn {\r\n\t\tstate,\r\n\t\ttypedText,\r\n\t\tsetTypedText: onChangeText,\r\n\t\tsubmit,\r\n\t\tonKeyDown,\r\n\t\tmarkPasteDetected,\r\n\t\treadyUp,\r\n\t\tunready,\r\n\t\tleave,\r\n\t\tstartCountdown,\r\n\t\ttextSample,\r\n\t\ttimeLimitMs,\r\n\t\tmetrics: {\r\n\t\t\twpm,\r\n\t\t\taccuracy,\r\n\t\t\tprogress,\r\n\t\t},\r\n\t\tsubmitted,\r\n\t\ttoast: toastRef.current.message,\r\n\t\tconnection: {\r\n\t\t\trttMs: state.rttMs,\r\n\t\t\tquality: state.connectionQuality,\r\n\t\t},\r\n\t\tcountdown: {\r\n\t\t\tseconds: remainingSeconds,\r\n\t\t\tremainingMs,\r\n\t\t\tfinalCountdown: countdownFinal,\r\n\t\t\treason: state.countdown?.reason,\r\n\t\t\tnextRoundIndex: state.countdown?.nextRoundIndex,\r\n\t\t},\r\n\t\tselfUserId: selfUserIdRef.current,\r\n\t};\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\features\\activities\\hooks\\useStoryBuilderSession.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\features\\activities\\hooks\\useStorySession.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\features\\activities\\hooks\\useTicTacToeSession.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\features\\activities\\utils\\levenshtein.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\features\\moderation\\ReportButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\features\\moderation\\ReportDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\features\\moderation\\ReportProvider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\features\\moderation\\useReport.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\features\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\join\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\leaderboards\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\lib\\flags\\keys.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\lib\\flags\\useFlags.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\lib\\flags\\withFlag.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\lib\\guards\\requireFlag.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\lib\\http\\client.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\lib\\http\\errors.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\lib\\http\\retry.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\lib\\metrics\\clientMetrics.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\lib\\safety\\kinds.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\lib\\safety\\reporting.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\lib\\socket\\base.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\lib\\socket\\chat.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\lib\\socket\\presence.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\lib\\socket\\rooms.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\lib\\socket\\useStatus.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\me\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\meetups\\[id]\\page.tsx","messages":[],"suppressedMessages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":433,"column":23,"nodeType":"JSXOpeningElement","endLine":433,"endColumn":152,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\meetups\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Image' is defined but never used.","line":10,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":13}],"suppressedMessages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":796,"column":29,"nodeType":"JSXOpeningElement","endLine":800,"endColumn":31,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/* eslint-disable @next/next/no-img-element */\n\"use client\";\n\nimport { useCallback, useEffect, useMemo, useState } from \"react\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/navigation\";\nimport dynamic from \"next/dynamic\";\nimport { CheckCircle2, Loader2, Calendar } from \"lucide-react\";\n\nimport Image from \"next/image\";\nimport { useStoryInviteState } from \"@/components/providers/story-invite-provider\";\nimport { useTypingDuelInviteState } from \"@/components/providers/typing-duel-invite-provider\";\nimport { useTicTacToeInviteState } from \"@/components/providers/tictactoe-invite-provider\";\nimport { useQuickTriviaInviteState } from \"@/components/providers/quick-trivia-invite-provider\";\nimport { useRockPaperScissorsInviteState } from \"@/components/providers/rock-paper-scissors-invite-provider\";\nimport { useDeferredFeatures } from \"@/components/providers/deferred-features-provider\";\nimport { useCampuses } from \"@/components/providers/campus-provider\";\nimport { usePresence } from \"@/hooks/presence/use-presence\";\nimport { useMeetupNotifications } from \"@/hooks/use-meetup-notifications\";\nimport { fetchDiscoveryFeed } from \"@/lib/discovery\";\nimport { fetchMySummary } from \"@/lib/leaderboards\";\nimport { clearAuthSnapshot, onAuthChange, readAuthUser, type AuthUser } from \"@/lib/auth-storage\";\nimport { fetchFriends } from \"@/lib/social\";\nimport { listMeetups, type MeetupResponse } from \"@/lib/meetups\";\nimport type { FriendRow } from \"@/lib/types\";\nimport { LeaderboardPreview } from \"@/components/LeaderboardPreview\";\n\nconst iconClassName = \"h-4 w-4 flex-none\";\n\nconst DiscoveryIcon = () => (\n  <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1.6\" className={iconClassName} aria-hidden>\n    <circle cx=\"12\" cy=\"12\" r=\"9\" />\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"m16 8-1.6 6.6L8 16l1.6-6.6Z\" />\n    <circle cx=\"12\" cy=\"12\" r=\"1.2\" />\n  </svg>\n);\n\nconst UsersIcon = () => (\n  <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1.6\" className={iconClassName} aria-hidden>\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M17 21v-2a4 4 0 0 0-4-4H7a4 4 0 0 0-4 4v2\" />\n    <circle cx=\"9\" cy=\"7\" r=\"3\" />\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M23 21v-2a4 4 0 0 0-3-3.87\" />\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M16 3.13a4 4 0 0 1 0 7.75\" />\n  </svg>\n);\n\nconst ChatIcon = () => (\n  <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1.6\" className={iconClassName} aria-hidden>\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z\" />\n  </svg>\n);\n\nconst ActivityIcon = () => (\n  <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1.6\" className={iconClassName} aria-hidden>\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M13 2L3 14h9l-1 8 10-12h-9l1-8z\" />\n  </svg>\n);\n\nconst ProfileIcon = () => (\n  <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1.6\" className={iconClassName} aria-hidden>\n    <circle cx=\"12\" cy=\"7\" r=\"4\" />\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M5 21v-2a5 5 0 0 1 5-5h4a5 5 0 0 1 5 5v2\" />\n  </svg>\n);\n\n// HeartIcon removed (unused)\nconst BrandLogo = dynamic(() => import(\"@/components/BrandLogo\"), {\n  loading: () => (\n    <div className=\"flex h-32 w-32 items-center justify-center\">\n      <div className=\"h-28 w-28 animate-pulse bg-slate-200 rounded-2xl\" />\n    </div>\n  ),\n  ssr: false,\n});\n\nconst ProfileSettingsInline = dynamic(\n  () => import(\"@/components/ProfileSettingsEmbed\"),\n  {\n    ssr: false,\n    loading: () => (\n      <div className=\"rounded-3xl border border-slate-200 bg-white/90 p-6 text-sm text-slate-600 shadow-sm\">\n        Loading profile...\n      </div>\n    ),\n  },\n);\n\nconst DiscoveryFeed = dynamic(() => import(\"@/components/DiscoveryFeed\"), {\n  ssr: false,\n  loading: () => (\n    <div className=\"flex h-96 items-center justify-center rounded-3xl border border-slate-200 bg-slate-50\">\n      <Loader2 className=\"h-8 w-8 animate-spin text-slate-400\" />\n    </div>\n  ),\n});\n\nconst activityPreviews = [\n  {\n    key: \"speed_typing\",\n    title: \"Speed Typing Duel\",\n    description: \"Race head-to-head to finish the sample with accuracy.\",\n    href: \"/activities/speed_typing\",\n    image: \"/activities/speedtyping.svg\",\n  },\n  {\n    key: \"quick_trivia\",\n    title: \"Quick Trivia\",\n    description: \"Rapid questions. Earn points for correctness and speed.\",\n    href: \"/activities/quick_trivia\",\n    image: \"/activities/trivia.svg\",\n  },\n  {\n    key: \"rps\",\n    title: \"Rock / Paper / Scissors\",\n    description: \"Real-time duel game used in earlier calibration labs.\",\n    href: \"/activities/rock_paper_scissors\",\n    image: \"/activities/rps.svg\",\n  },\n  {\n    key: \"story\",\n    title: \"Story Builder\",\n    description: \"Collaborative romance story. You write one part, they write the next.\",\n    href: \"/activities/story\",\n    image: \"/activities/story.svg\",\n  },\n  {\n    key: \"tictactoe\",\n    title: \"Tic Tac Toe\",\n    description: \"The classic game of X's and O's. Challenge a friend.\",\n    href: \"/activities/tictactoe\",\n    image: \"/activities/tictactoe.svg\",\n  },\n];\n\ntype FriendPreview = {\n  userId: string;\n  name: string;\n  detail: string;\n  status: string;\n  major: string;\n  year: \"freshman\" | \"sophomore\" | \"junior\" | \"senior\" | \"grad\";\n  campus: string;\n  avatarColor: string;\n  imageUrl?: string | null;\n  distance?: number | null;\n  gallery?: string[] | null;\n  campusId?: string | null;\n  passions?: string[];\n  courses?: string[];\n  isFriend?: boolean;\n  isFriendOfFriend?: boolean;\n  compatibilityScore?: number;\n};\n\ntype ChatPreview = {\n  name: string;\n  handle: string;\n  snippet: string;\n  time: string;\n  status: \"online\" | \"away\";\n  unread?: number;\n  accent: string;\n};\n\nconst CHAT_ACCENTS = [\n  \"from-rose-200 via-amber-100 to-white\",\n  \"from-sky-200 via-blue-100 to-white\",\n  \"from-amber-200 via-rose-100 to-white\",\n  \"from-emerald-200 via-teal-100 to-white\",\n];\n\nconst HERO_GRADIENTS = [\n  \"bg-gradient-to-r from-rose-500 via-rose-600 to-pink-600\",\n  \"bg-gradient-to-r from-violet-500 via-purple-600 to-indigo-600\",\n  \"bg-gradient-to-r from-cyan-500 via-blue-600 to-indigo-600\",\n  \"bg-gradient-to-r from-emerald-500 via-teal-600 to-cyan-600\",\n  \"bg-gradient-to-r from-amber-500 via-orange-600 to-rose-600\",\n];\n\nfunction formatChatTime(iso: string | null | undefined): string {\n  if (!iso) return \"\";\n  const date = new Date(iso);\n  if (Number.isNaN(date.getTime())) return \"\";\n  const now = new Date();\n  const diffMs = now.getTime() - date.getTime();\n  const diffMinutes = Math.floor(diffMs / 60000);\n  if (diffMinutes < 1) return \"Just now\";\n  if (diffMinutes < 60) return `${diffMinutes}m ago`;\n  const diffHours = Math.floor(diffMinutes / 60);\n  if (diffHours < 24) return `${diffHours}h ago`;\n  return date.toLocaleDateString(undefined, { month: \"short\", day: \"numeric\" });\n}\n\ntype NavKey = \"dashboard\" | \"network\" | \"messages\" | \"games\" | \"profile\" | \"discovery\" | \"meetups\" | \"friends\";\nconst NAV_SECTIONS: NavKey[] = [\"dashboard\", \"network\", \"games\", \"profile\", \"discovery\", \"meetups\"];\nexport default function HomePage() {\n  const [authUser, setAuthUser] = useState<AuthUser | null>(null);\n  const [authHydrated, setAuthHydrated] = useState(false);\n  const [activeSection, setActiveSection] = useState<NavKey>(\"dashboard\");\n  const [heroGradientIndex, setHeroGradientIndex] = useState(0);\n\n  useEffect(() => {\n    const updateGradient = () => {\n      const minutes = Math.floor(Date.now() / 1000 / 60);\n      const index = Math.floor(minutes / 5) % HERO_GRADIENTS.length;\n      setHeroGradientIndex(index);\n    };\n\n    updateGradient();\n    const interval = setInterval(updateGradient, 10000); // Check every 10s\n    return () => clearInterval(interval);\n  }, []);\n\n  // Restore active section from localStorage after hydration\n  useEffect(() => {\n    const savedSection = window.localStorage.getItem(\"divan.home.activeSection\") as NavKey | null;\n    const savedUser = window.localStorage.getItem(\"divan.home.activeSectionUser\") ?? \"\";\n    const auth = readAuthUser();\n    if (auth?.userId && savedUser === auth.userId && savedSection && NAV_SECTIONS.includes(savedSection)) {\n      setActiveSection(savedSection);\n    }\n  }, []);\n\n  const persistActiveSection = useCallback((section: NavKey, userId?: string | null) => {\n    setActiveSection(section);\n    if (typeof window !== \"undefined\") {\n      window.localStorage.setItem(\"divan.home.activeSection\", section);\n      window.localStorage.setItem(\"divan.home.activeSectionUser\", userId ?? \"\");\n    }\n  }, []);\n\n  const [cardIndex, setCardIndex] = useState(0);\n\n  const [recentFriends, setRecentFriends] = useState<FriendRow[]>([]);\n  const [allFriends, setAllFriends] = useState<FriendRow[]>([]);\n  const [friendCount, setFriendCount] = useState(0);\n  const [recentMeetups, setRecentMeetups] = useState<MeetupResponse[]>([]);\n  const [joinedMeetups, setJoinedMeetups] = useState<MeetupResponse[]>([]);\n  const [meetupsLoading, setMeetupsLoading] = useState(true);\n\n  // Meetup notifications\n  const { hasNewMeetups, notifications: meetupNotifications, markAsSeen: markMeetupsSeen } = useMeetupNotifications();\n\n  // Use deferred features for heavy hooks (chat, social) to reduce TBT\n  const {\n    inboundPending,\n    hasFriendAcceptanceNotification,\n    chatUnreadCount,\n    chatRosterEntries,\n    chatRosterLoading,\n  } = useDeferredFeatures();\n\n  const { hasPending: hasStoryInvite, dismissLatest: dismissStory } = useStoryInviteState();\n  const { hasPending: hasTypingInvite, dismissLatest: dismissTyping } = useTypingDuelInviteState();\n  const { hasPending: hasTicTacToeInvite, dismissLatest: dismissTicTacToe } = useTicTacToeInviteState();\n  const { hasPending: hasQuickTriviaInvite, dismissLatest: dismissQuickTrivia } = useQuickTriviaInviteState();\n  const { hasPending: hasRPSInvite, dismissLatest: dismissRPS } = useRockPaperScissorsInviteState();\n\n\n\n  useEffect(() => {\n    const hydrate = () => {\n      setAuthUser(readAuthUser());\n      setAuthHydrated(true);\n    };\n    hydrate();\n    const unsubscribe = onAuthChange(hydrate);\n    return () => unsubscribe();\n  }, []);\n\n  useEffect(() => {\n    if (!authHydrated) return;\n    persistActiveSection(\"dashboard\", authUser?.userId ?? null);\n  }, [authUser?.userId, authHydrated, persistActiveSection]);\n\n  const [discoverPeople, setDiscoverPeople] = useState<FriendPreview[]>([]);\n  const rosterPeerIds = useMemo(() => chatRosterEntries.map((entry) => entry.peerId), [chatRosterEntries]);\n  const discoverPeerIds = useMemo(() => discoverPeople.map((p) => p.userId), [discoverPeople]);\n  const recentFriendPeerIds = useMemo(() => allFriends.map((row) => row.friend_id), [allFriends]);\n  const { presence: rosterPresence } = usePresence(rosterPeerIds);\n  const { presence: discoverPresence } = usePresence(discoverPeerIds);\n  const { presence: recentFriendsPresence } = usePresence(recentFriendPeerIds);\n\n  const { getCampus } = useCampuses();\n\n\n  useEffect(() => {\n    let cancelled = false;\n    const palette = [\n      \"from-rose-300 via-amber-200 to-emerald-200\",\n      \"from-indigo-300 via-sky-200 to-emerald-200\",\n      \"from-amber-200 via-rose-200 to-blue-200\",\n      \"from-emerald-200 via-teal-200 to-cyan-200\",\n      \"from-purple-200 via-rose-200 to-amber-200\",\n    ];\n    const normalizeYear = (value: string | undefined): FriendPreview[\"year\"] | \"all\" => {\n      const lower = value?.toLowerCase?.() ?? \"\";\n      if ([\"freshman\", \"first year\", \"first-year\"].includes(lower)) return \"freshman\";\n      if ([\"sophomore\", \"second year\", \"second-year\"].includes(lower)) return \"sophomore\";\n      if ([\"junior\", \"third year\", \"third-year\"].includes(lower)) return \"junior\";\n      if ([\"senior\", \"fourth year\", \"fourth-year\"].includes(lower)) return \"senior\";\n      if ([\"grad\", \"graduate\"].includes(lower)) return \"grad\";\n      return \"all\";\n    };\n    const load = async () => {\n      try {\n        const userId = authUser?.userId;\n        const campusId = authUser?.campusId;\n        if (!userId || !campusId) {\n          if (!cancelled) {\n            setDiscoverPeople([]);\n          }\n          return;\n        }\n        const payload = await fetchDiscoveryFeed(userId, campusId, { limit: 50 });\n        const items = Array.isArray(payload?.items) ? payload.items : [];\n        const mapped: FriendPreview[] = items.map((raw, idx) => {\n          const graduationYear = (raw as { graduation_year?: number | string }).graduation_year;\n          const rawName = (raw.display_name || raw.handle || \"\").toString().trim();\n          const uuidLike = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(rawName);\n          const passions =\n            Array.isArray((raw as { passions?: string[] }).passions)\n              ? (raw as { passions?: string[] }).passions?.filter((item): item is string => typeof item === \"string\" && item.trim().length > 0) ?? []\n              : [];\n          const courses =\n            Array.isArray((raw as { courses?: string[] }).courses)\n              ? (raw as { courses?: string[] }).courses?.filter((item): item is string => typeof item === \"string\" && item.trim().length > 0) ?? []\n              : [];\n          const galleryUrls =\n            (raw as { gallery?: Array<{ url?: string }> }).gallery\n              ?.map((entry) => entry.url)\n              .filter((url): url is string => Boolean(url)) ?? [];\n          const campusId = (raw as { campus_id?: string | null }).campus_id ?? authUser?.campusId ?? null;\n          const campusName =\n            (raw as { campus_name?: string | null }).campus_name ??\n            (campusId ? getCampus(campusId)?.name : undefined);\n          const campusLabel =\n            campusName ??\n            (campusId && authUser?.campusId && campusId === authUser.campusId ? \"Your campus\" : \"Campus peer\");\n          const isFriend = Boolean((raw as { is_friend?: boolean }).is_friend);\n          const isFriendOfFriend = Boolean((raw as { is_friend_of_friend?: boolean }).is_friend_of_friend);\n          const year = normalizeYear(graduationYear ? String(graduationYear) : undefined);\n          return {\n            userId: raw.user_id,\n            name: uuidLike ? raw.handle || \"Classmate\" : rawName || raw.handle || \"Classmate\",\n            detail: raw.handle ? `@${raw.handle}` : passions[0] ?? \"Nearby classmate\",\n            status: isFriend ? \"Online\" : \"Away\",\n            major: raw.major ?? \"Undeclared\",\n            year: year === \"all\" ? \"freshman\" : year,\n            campus: campusLabel,\n            campusId,\n            avatarColor: palette[idx % palette.length],\n            imageUrl: raw.avatar_url ?? null,\n            distance: typeof raw.distance_m === \"number\" ? raw.distance_m : null,\n            gallery: galleryUrls,\n            passions,\n            courses,\n            isFriend,\n            isFriendOfFriend,\n          };\n        });\n        if (!cancelled) {\n          setDiscoverPeople(mapped.filter((p) => !!p.imageUrl));\n        }\n      } catch (err) {\n        if (!cancelled) {\n          console.error(\"Unable to load nearby people\", err);\n        }\n      }\n    };\n    void load();\n    return () => {\n      cancelled = true;\n    };\n  }, [authUser?.campusId, authUser?.userId, getCampus]);\n\n  const [activitySnapshot, setActivitySnapshot] = useState<{\n    totalGames: number;\n    wins: number;\n    socialScore: number;\n    rank: number | null;\n    loading: boolean;\n    error: string | null;\n  }>({\n    totalGames: 0,\n    wins: 0,\n    socialScore: 0,\n    rank: null,\n    loading: true,\n    error: null,\n  });\n\n  useEffect(() => {\n    const controller = new AbortController();\n    const load = async () => {\n      setActivitySnapshot((prev) => ({ ...prev, loading: true, error: null }));\n      try {\n        const summary = await fetchMySummary({\n          userId: authUser?.userId,\n          campusId: authUser?.campusId ?? undefined,\n          signal: controller.signal,\n        });\n        // Use raw counts if available, otherwise fallback to scores (which are weighted)\n        const totalGames = summary.counts?.games_played ?? Math.max(0, Math.round(summary.scores.engagement ?? 0));\n        const wins = summary.counts?.wins ?? Math.max(0, Math.round(summary.scores.overall ?? 0));\n        const socialScore = Math.max(0, Math.round(summary.scores.social ?? 0));\n        const rank = summary.ranks.overall ?? null;\n        setActivitySnapshot({ totalGames, wins, socialScore, rank, loading: false, error: null });\n      } catch (err) {\n        if (controller.signal.aborted) return;\n        const message = err instanceof Error ? err.message : \"Unable to load activity snapshot\";\n        setActivitySnapshot((prev) => ({ ...prev, loading: false, error: message }));\n      }\n    };\n    if (authHydrated) {\n      void load();\n    }\n    return () => controller.abort();\n  }, [authHydrated, authUser?.campusId, authUser?.userId]);\n\n  useEffect(() => {\n    const loadFriends = async () => {\n      if (!authUser?.userId || !authUser?.campusId) return;\n      try {\n        const friends = await fetchFriends(authUser.userId, authUser.campusId, \"accepted\");\n        setFriendCount(friends.length);\n        setAllFriends(friends);\n        // Sort by created_at desc\n        const sorted = friends.sort((a, b) => new Date(b.created_at).getTime() - new Date(a.created_at).getTime());\n        setRecentFriends(sorted.slice(0, 5));\n      } catch (err) {\n        console.error(\"Failed to load recent friends\", err);\n      }\n    };\n    if (authHydrated) {\n      void loadFriends();\n    }\n  }, [authHydrated, authUser?.campusId, authUser?.userId]);\n\n  useEffect(() => {\n    const loadMeetups = async () => {\n      if (!authUser?.campusId || !authUser?.userId) {\n        setMeetupsLoading(false);\n        return;\n      }\n      try {\n        const data = await listMeetups(authUser.campusId);\n\n        // For Recent Activity: joined meetups\n        const joined = data.filter(m => m.is_joined);\n        setJoinedMeetups(joined);\n\n        // Filter for user's own meetups (created by them) - upcoming/active\n        const myMeetups = data\n          .filter(m => m.creator_user_id === authUser.userId && (m.status === \"ACTIVE\" || m.status === \"UPCOMING\"))\n          .sort((a, b) => new Date(a.start_at).getTime() - new Date(b.start_at).getTime())\n          .slice(0, 3);\n        setRecentMeetups(myMeetups);\n      } catch (err) {\n        console.error(\"Failed to load meetups\", err);\n      } finally {\n        setMeetupsLoading(false);\n      }\n    };\n    if (authHydrated) {\n      void loadMeetups();\n    }\n  }, [authHydrated, authUser?.campusId, authUser?.userId]);\n\n\n\n  type ActivityItem =\n    | { type: \"friend\"; date: Date; id: string; data: FriendRow }\n    | { type: \"meetup\"; date: Date; id: string; data: MeetupResponse; action: \"joined\" | \"created\" };\n\n  const combinedActivity = useMemo<ActivityItem[]>(() => {\n    const activities: ActivityItem[] = [];\n\n    recentFriends.forEach(f => {\n      activities.push({\n        type: 'friend',\n        date: new Date(f.created_at),\n        id: `friend-${f.friend_id}`,\n        data: f\n      });\n    });\n\n    // Add joined meetups (excluding ones user created)\n    joinedMeetups\n      .filter(m => m.creator_user_id !== authUser?.userId)\n      .forEach(m => {\n        activities.push({\n          type: 'meetup',\n          date: new Date(m.created_at),\n          id: `meetup-joined-${m.id}`,\n          data: m,\n          action: 'joined'\n        });\n      });\n\n    // Add created meetups\n    recentMeetups.forEach(m => {\n      activities.push({\n        type: 'meetup',\n        date: new Date(m.created_at),\n        id: `meetup-created-${m.id}`,\n        data: m,\n        action: 'created'\n      });\n    });\n\n    return activities.sort((a, b) => b.date.getTime() - a.date.getTime()).slice(0, 5);\n  }, [recentFriends, joinedMeetups, authUser?.userId, recentMeetups]);\n\n  const friendPreviewList = useMemo(() => discoverPeople, [discoverPeople]);\n\n\n  const visibleFriendPreviewList = useMemo(() => friendPreviewList, [friendPreviewList]);\n  const discoveryPreviewList = useMemo<FriendPreview[]>(() => {\n    return visibleFriendPreviewList.slice(0, 4).map((p) => ({\n      ...p,\n      status: discoverPresence[p.userId]?.online ? \"Online\" : \"Offline\",\n    }));\n  }, [visibleFriendPreviewList, discoverPresence]);\n\n\n  const chatPreviewCards = useMemo<ChatPreview[]>(() => {\n    if (!chatRosterEntries.length) {\n      return [];\n    }\n    return chatRosterEntries.map((entry, index) => ({\n      name: entry.displayName,\n      handle: entry.handle ? `@${entry.handle}` : entry.peerId.slice(0, 12),\n      snippet: entry.lastMessageSnippet ?? \"Tap to start the conversation.\",\n      time: formatChatTime(entry.lastMessageAt),\n      status: rosterPresence[entry.peerId]?.online ? \"online\" : \"away\",\n      unread: entry.unreadCount ?? 0,\n      accent: CHAT_ACCENTS[index % CHAT_ACCENTS.length],\n    }));\n  }, [chatRosterEntries, rosterPresence]);\n\n\n\n  useEffect(() => {\n    if (cardIndex >= visibleFriendPreviewList.length) {\n      setCardIndex(Math.max(visibleFriendPreviewList.length - 1, 0));\n    }\n  }, [visibleFriendPreviewList.length, cardIndex]);\n\n  useEffect(() => {\n    if (cardIndex >= visibleFriendPreviewList.length) {\n      setCardIndex(Math.max(visibleFriendPreviewList.length - 1, 0));\n    }\n  }, [visibleFriendPreviewList.length, cardIndex]);\n\n  const topRightDisplayName = useMemo(() => {\n    if (!authUser) {\n      return null;\n    }\n    const handle = authUser.handle?.trim();\n    const name = authUser.displayName?.trim();\n    // Skip handle/displayName if it looks like a default user_id (starts with user_ or matches userId)\n    const isHandleDefault = handle && (handle.startsWith(\"user_\") || handle === authUser.userId);\n    const isNameDefault = name && (name.startsWith(\"user_\") || name === authUser.userId);\n    const effectiveHandle = isHandleDefault ? undefined : handle;\n    const effectiveName = isNameDefault ? undefined : name;\n    return effectiveHandle || effectiveName || \"\";\n  }, [authUser]);\n\n  const router = useRouter();\n  const handleSignOut = useCallback(() => {\n    clearAuthSnapshot();\n    setAuthUser(null);\n    // Force hard redirect to clear memory and prevent back-navigation\n    window.location.replace(\"/login\");\n  }, []);\n\n\n\n\n\n  const navItems = useMemo(\n    () => {\n      const hasAnyInvite = hasStoryInvite || hasTypingInvite || hasTicTacToeInvite || hasQuickTriviaInvite || hasRPSInvite;\n      return [\n        { key: \"dashboard\" as const, label: \"Dashboard\", icon: <DiscoveryIcon />, badge: null },\n        {\n          key: \"network\" as const,\n          label: \"Network\",\n          icon: <UsersIcon />,\n          badge: inboundPending > 0 ? inboundPending : (hasFriendAcceptanceNotification ? \"New\" : null),\n        },\n        {\n          key: \"messages\" as const,\n          label: \"Messages\",\n          icon: <ChatIcon />,\n          badge: chatUnreadCount > 0 ? chatUnreadCount : null,\n        },\n        {\n          key: \"games\" as const,\n          label: \"Games\",\n          icon: <ActivityIcon />,\n          badge: hasAnyInvite ? \"Live\" : null,\n        },\n        {\n          key: \"profile\" as const,\n          label: \"Profile\",\n          icon: <ProfileIcon />,\n          badge: null,\n        },\n      ];\n    },\n    [inboundPending, hasFriendAcceptanceNotification, chatUnreadCount, hasStoryInvite, hasTypingInvite, hasTicTacToeInvite, hasQuickTriviaInvite, hasRPSInvite],\n  );\n\n  const handleNavClick = (key: NavKey) => {\n    if (key === \"meetups\") {\n      router.push(\"/meetups\");\n      return;\n    }\n    if (key === \"friends\") {\n      router.push(\"/friends\");\n      return;\n    }\n    if (key === \"messages\") {\n      router.push(\"/chat\");\n      return;\n    }\n    persistActiveSection(key, authUser?.userId ?? null);\n  };\n  const renderSection = () => {\n    switch (activeSection) {\n      case \"dashboard\":\n        // Helper to check if a name is a default user_* pattern\n        const isDefaultName = (name?: string) => name && (name.startsWith(\"user_\") || name === authUser?.userId);\n        const welcomeName = (!isDefaultName(authUser?.displayName) && authUser?.displayName)\n          || (!isDefaultName(authUser?.handle) && authUser?.handle)\n          || \"Student\";\n        return (\n          <div className=\"space-y-8\">\n            {/* Header */}\n            <header className=\"flex flex-col gap-2 md:flex-row md:items-center md:justify-between\">\n              <div>\n                <h1 className=\"text-3xl font-bold tracking-tight text-slate-900\">\n                  Welcome{\" \"}\n                  <button\n                    type=\"button\"\n                    onClick={() => handleNavClick(\"profile\")}\n                    className=\"text-rose-600 hover:text-rose-700 hover:underline decoration-2 underline-offset-4 transition-colors\"\n                  >\n                    {welcomeName}\n                  </button>\n                </h1>\n                <p className=\"text-slate-600\">Here&apos;s your campus snapshot for today.</p>\n              </div>\n            </header>\n\n            {/* Social Score Hero Card */}\n            <section className={`relative overflow-hidden rounded-3xl ${HERO_GRADIENTS[heroGradientIndex]} p-8 shadow-xl transition-colors duration-1000`}>\n              <div className=\"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxnIGZpbGw9IiNmZmYiIGZpbGwtb3BhY2l0eT0iMC4xIj48cGF0aCBkPSJNMzYgMzRjMC0yIDItNCAyLTRzMiAyIDIgNC0yIDQtMiA0LTItMi0yLTR6bS0xMiAwYzAtMiAyLTQgMi00czIgMiAyIDQtMiA0LTIgNC0yLTItMi00eiIvPjwvZz48L2c+PC9zdmc+')] opacity-30\" />\n              <div className=\"absolute top-0 right-0 -mt-8 -mr-8 h-32 w-32 rounded-full bg-white/10 blur-2xl\" />\n              <div className=\"absolute bottom-0 left-0 -mb-8 -ml-8 h-32 w-32 rounded-full bg-white/10 blur-2xl\" />\n\n              <div className=\"relative z-10 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-6\">\n                <div className=\"flex items-center gap-6\">\n                  <div className=\"flex h-20 w-20 items-center justify-center rounded-2xl bg-white/20 backdrop-blur-sm shadow-lg ring-2 ring-white/30\">\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"currentColor\" className=\"h-10 w-10 text-white\">\n                      <path d=\"M11.645 20.91l-.007-.003-.022-.012a15.247 15.247 0 01-.383-.218 25.18 25.18 0 01-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0112 5.052 5.5 5.5 0 0116.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 01-4.244 3.17 15.247 15.247 0 01-.383.219l-.022.012-.007.004-.003.001a.752.752 0 01-.704 0l-.003-.001z\" />\n                    </svg>\n                  </div>\n                  <div>\n                    <p className=\"text-sm font-semibold text-rose-100 uppercase tracking-wider\">Your Social Score</p>\n                    <p className=\"mt-1 text-5xl font-black text-white tracking-tight\">\n                      {activitySnapshot.loading ? \"...\" : activitySnapshot.socialScore}\n                    </p>\n                  </div>\n                </div>\n\n                <div className=\"flex flex-col items-start sm:items-end gap-2\">\n                  <div className=\"flex items-center gap-2 rounded-full bg-white/20 backdrop-blur-sm px-4 py-2 text-sm font-bold text-white shadow-lg\">\n                    <span className=\"text-lg\">Γ¡É</span>\n                    <span>{activitySnapshot.socialScore >= 100 ? \"Campus Star!\" : activitySnapshot.socialScore >= 50 ? \"Rising Star\" : \"New Explorer\"}</span>\n                  </div>\n                  <p className=\"text-xs text-rose-200\">\n                    Earn points by playing, connecting & attending meetups\n                  </p>\n                </div>\n              </div>\n            </section>\n\n            {/* Stats Overview Row */}\n            <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-3\">\n              {/* Friends Stat */}\n              <div className=\"relative overflow-hidden rounded-3xl border border-slate-200 bg-white p-6 shadow-sm transition hover:shadow-md\">\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <p className=\"text-sm font-medium text-slate-500 uppercase tracking-wider\">Friends</p>\n                    <p className=\"mt-2 text-3xl font-bold text-slate-900\">{friendCount}</p>\n                  </div>\n                  <div className=\"flex h-12 w-12 items-center justify-center rounded-full bg-rose-50 text-rose-600\">\n                    <UsersIcon />\n                  </div>\n                </div>\n                <div className=\"mt-4 flex items-center gap-2 text-xs font-medium text-emerald-600\">\n                  <span className=\"flex h-5 w-5 items-center justify-center rounded-full bg-emerald-100\">\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\" className=\"h-3 w-3\">\n                      <path fillRule=\"evenodd\" d=\"M12 7a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0V8.414l-4.293 4.293a1 1 0 01-1.414 0L8 10.414l-4.293 4.293a1 1 0 01-1.414-1.414l5-5a1 1 0 011.414 0L11 11.586 15.293 7.293A1 1 0 0115 7h-3z\" clipRule=\"evenodd\" />\n                    </svg>\n                  </span>\n                  <span>Growing network</span>\n                </div>\n              </div>\n\n              {/* Invites Stat */}\n              <button\n                onClick={() => handleNavClick(\"friends\")}\n                className=\"relative overflow-hidden rounded-3xl border border-slate-200 bg-white p-6 shadow-sm transition hover:shadow-md text-left group\"\n              >\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <p className=\"text-sm font-medium text-slate-500 uppercase tracking-wider\">Pending Invites</p>\n                    <p className=\"mt-2 text-3xl font-bold text-slate-900\">{inboundPending}</p>\n                  </div>\n                  <div className={`flex h-12 w-12 items-center justify-center rounded-full transition ${inboundPending > 0 ? \"bg-amber-100 text-amber-600 animate-pulse\" : \"bg-slate-50 text-slate-400\"}`}>\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" className=\"h-6 w-6\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M19 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zM4 19.235v-.11a6.375 6.375 0 0112.75 0v.109A12.318 12.318 0 019.374 21c-2.331 0-4.512-.645-6.374-1.766z\" />\n                    </svg>\n                  </div>\n                </div>\n                <div className=\"mt-4 text-xs font-medium text-slate-500 group-hover:text-rose-600 transition-colors\">\n                  {inboundPending > 0 ? \"Review requests ΓåÆ\" : \"All caught up\"}\n                </div>\n              </button>\n\n              {/* Games Played Stat */}\n              <button\n                onClick={() => setActiveSection(\"games\")}\n                className=\"relative overflow-hidden rounded-3xl border border-slate-200 bg-white p-6 shadow-sm transition hover:shadow-md group text-left w-full\"\n              >\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <p className=\"text-sm font-medium text-slate-500 uppercase tracking-wider\">Games Played</p>\n                    <p className=\"mt-2 text-3xl font-bold text-slate-900\">\n                      {activitySnapshot.loading ? \"...\" : activitySnapshot.totalGames}\n                    </p>\n                  </div>\n                  <div className=\"flex h-12 w-12 items-center justify-center rounded-full bg-indigo-50 text-indigo-600\">\n                    <ActivityIcon />\n                  </div>\n                </div>\n                <div className=\"mt-4 flex items-center gap-2 text-xs font-medium text-indigo-600\">\n                  <span className=\"flex h-5 w-5 items-center justify-center rounded-full bg-indigo-100\">\n                    ≡ƒÄ«\n                  </span>\n                  <span className=\"group-hover:text-indigo-700 transition-colors\">\n                    {activitySnapshot.wins > 0 ? `${activitySnapshot.wins} wins` : \"Play to earn points\"}\n                  </span>\n                </div>\n              </button>\n            </div>\n\n            {/* Leaderboard Preview */}\n            <div className=\"grid grid-cols-1 gap-4 md:grid-cols-2\">\n              <LeaderboardPreview />\n\n              {/* Compact Live Discovery */}\n              <section className=\"relative overflow-hidden rounded-3xl border border-indigo-100 bg-gradient-to-br from-indigo-50/50 via-white to-rose-50/50 p-6 shadow-sm transition-all hover:shadow-md hover:border-indigo-200\">\n                <div className=\"absolute top-0 right-0 -mt-16 -mr-16 h-40 w-40 rounded-full bg-gradient-to-br from-rose-400/20 to-amber-300/20 blur-3xl\" />\n                <div className=\"absolute bottom-0 left-0 -mb-16 -ml-16 h-40 w-40 rounded-full bg-gradient-to-tr from-indigo-400/20 to-emerald-300/20 blur-3xl\" />\n\n                <div className=\"relative z-10 flex items-center justify-between mb-6\">\n                  <div>\n                    <h2 className=\"text-lg font-bold text-slate-900 flex items-center gap-2\">\n                      Live on Campus\n                      <span className=\"relative flex h-2.5 w-2.5\">\n                        <span className=\"animate-ping absolute inline-flex h-full w-full rounded-full bg-rose-400 opacity-75\"></span>\n                        <span className=\"relative inline-flex rounded-full h-2.5 w-2.5 bg-rose-500\"></span>\n                      </span>\n                    </h2>\n                    <p className=\"text-xs text-slate-500\">See who&apos;s active right now</p>\n                  </div>\n                  <Link href=\"/discovery\" className=\"group flex items-center gap-1 rounded-full bg-white/80 px-3 py-1.5 text-xs font-bold text-indigo-600 shadow-sm ring-1 ring-slate-200 transition hover:bg-white hover:text-indigo-700 hover:ring-indigo-200\">\n                    View Map\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\" className=\"h-3 w-3 transition-transform group-hover:translate-x-0.5\">\n                      <path fillRule=\"evenodd\" d=\"M3 10a.75.75 0 01.75-.75h10.638L10.23 5.29a.75.75 0 111.04-1.08l5.5 5.25a.75.75 0 010 1.08l-5.5 5.25a.75.75 0 11-1.04-1.08l4.158-3.96H3.75A.75.75 0 013 10z\" clipRule=\"evenodd\" />\n                    </svg>\n                  </Link>\n                </div>\n                <div className=\"relative z-10 flex gap-4 overflow-x-auto pb-2 scrollbar-hide mask-linear-fade\">\n                  {/* Live Peers */}\n                  {discoveryPreviewList.map((person) => (\n                    <div key={person.userId} className=\"flex flex-col items-center gap-2 min-w-[72px]\">\n                      <div className={`relative h-16 w-16 rounded-full p-[3px] bg-gradient-to-tr ${person.status === \"Online\" ? \"from-rose-400 to-amber-400\" : \"from-slate-200 to-slate-300\"}`}>\n                        <div className=\"h-full w-full rounded-full bg-white p-1\">\n                          <div className=\"h-full w-full rounded-full bg-slate-100 overflow-hidden\">\n                            <img\n                              src={person.imageUrl || \"\"}\n                              alt={person.name}\n                              className=\"h-full w-full object-cover\"\n                            />\n                          </div>\n                        </div>\n                      </div>\n                      <span className=\"text-xs font-medium text-slate-600 truncate w-16 text-center\">{person.name.split(\" \")[0]}</span>\n                    </div>\n                  ))}\n                </div>\n              </section>\n            </div>\n\n\n\n            {/* Recent Activity (Full Width) */}\n            <section className=\"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm\">\n              <div className=\"flex items-center justify-between mb-6\">\n                <h3 className=\"text-lg font-bold text-slate-900\">Recent Activity</h3>\n              </div>\n              <div className=\"space-y-4\">\n                {combinedActivity.length === 0 ? (\n                  <div className=\"flex flex-col items-center justify-center py-8 text-center\">\n                    <div className=\"h-12 w-12 rounded-full bg-slate-50 flex items-center justify-center text-slate-400 mb-3\">\n                      <ActivityIcon />\n                    </div>\n                    <p className=\"text-sm text-slate-500\">No recent activity.</p>\n                    <p className=\"text-xs text-slate-400\">Connect with friends or join meetups to see updates.</p>\n                  </div>\n                ) : (\n                  combinedActivity.map((item) => {\n                    if (item.type === 'friend') {\n                      const friend = item.data as FriendRow;\n                      return (\n                        <div key={item.id} className=\"flex items-center gap-4 p-3 rounded-2xl hover:bg-slate-50 transition\">\n                          <div className=\"h-12 w-12 rounded-full bg-emerald-100 flex items-center justify-center text-emerald-600 flex-shrink-0\">\n                            <CheckCircle2 className=\"h-6 w-6\" />\n                          </div>\n                          <div className=\"flex-1 min-w-0\">\n                            <p className=\"text-sm font-bold text-slate-900 truncate\">\n                              New Connection\n                            </p>\n                            <p className=\"text-xs text-slate-500 truncate\">\n                              You are now friends with <span className=\"font-medium text-slate-700\">{friend.friend_display_name || friend.friend_handle}</span>\n                            </p>\n                          </div>\n                          <span className=\"text-xs text-slate-400 whitespace-nowrap\">\n                            {item.date.toLocaleDateString()}\n                          </span>\n                        </div>\n                      );\n                    } else if (item.type === 'meetup') {\n                      const meetup = item.data as MeetupResponse;\n                      const isCreated = (item as { action?: string }).action === 'created';\n                      return (\n                        <div key={item.id} className=\"flex items-center gap-4 p-3 rounded-2xl hover:bg-slate-50 transition\">\n                          <div className={`h-12 w-12 rounded-full flex items-center justify-center flex-shrink-0 ${isCreated\n                            ? 'bg-violet-100 text-violet-600'\n                            : 'bg-indigo-100 text-indigo-600'\n                            }`}>\n                            <Calendar className=\"h-6 w-6\" />\n                          </div>\n                          <div className=\"flex-1 min-w-0\">\n                            <p className=\"text-sm font-bold text-slate-900 truncate\">\n                              {isCreated ? 'Created Meetup' : 'Joined Meetup'}\n                            </p>\n                            <p className=\"text-xs text-slate-500 truncate\">\n                              You {isCreated ? 'created' : 'joined'} <span className=\"font-medium text-slate-700\">{meetup.title}</span>\n                            </p>\n                          </div>\n                          <span className=\"text-xs text-slate-400 whitespace-nowrap\">\n                            {item.date.toLocaleDateString()}\n                          </span>\n                        </div>\n                      );\n                    }\n                    return null;\n                  })\n                )}\n              </div>\n            </section>\n          </div>\n        );\n      case \"network\":\n        return (\n          <div className=\"space-y-8\">\n            <header>\n              <h2 className=\"text-3xl font-bold tracking-tight text-slate-900\">Network</h2>\n              <p className=\"text-sm text-slate-500\">Your social hub on campus.</p>\n            </header>\n            <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-3\">\n              {/* Chats Card */}\n              <div className=\"col-span-1 md:col-span-2 lg:col-span-2 rounded-3xl border border-slate-200 bg-white p-6 shadow-sm flex flex-col\">\n                <div className=\"flex items-center justify-between mb-6\">\n                  <div className=\"flex items-center gap-3\">\n                    <div className=\"flex h-10 w-10 items-center justify-center rounded-full bg-rose-50 text-rose-600\">\n                      <ChatIcon />\n                    </div>\n                    <div>\n                      <h3 className=\"text-lg font-bold text-slate-900\">Messages</h3>\n                      <p className=\"text-xs text-slate-500\">Recent conversations</p>\n                    </div>\n                  </div>\n                  <Link href=\"/chat\" className=\"text-sm font-semibold text-rose-600 hover:text-rose-700\">\n                    Open Inbox\n                  </Link>\n                </div>\n\n                <div className=\"flex-1 space-y-4\">\n                  {chatRosterLoading ? (\n                    <div className=\"space-y-3\">\n                      <div className=\"h-16 animate-pulse rounded-2xl bg-slate-50\" />\n                      <div className=\"h-16 animate-pulse rounded-2xl bg-slate-50\" />\n                    </div>\n                  ) : chatPreviewCards.length > 0 ? (\n                    <div className=\"grid gap-4 sm:grid-cols-2\">\n                      {chatPreviewCards.slice(0, 4).map((chat) => (\n                        <Link\n                          key={chat.handle}\n                          href=\"/chat\"\n                          className=\"group flex items-center gap-4 rounded-2xl border border-slate-100 bg-slate-50/50 p-4 transition hover:bg-white hover:shadow-md hover:border-rose-100\"\n                        >\n                          <div className=\"relative\">\n                            <div className=\"flex h-12 w-12 items-center justify-center rounded-full bg-white text-sm font-bold text-slate-700 shadow-sm\">\n                              {chat.name.slice(0, 2).toUpperCase()}\n                            </div>\n                            {chat.status === \"online\" && (\n                              <span className=\"absolute bottom-0 right-0 h-3 w-3 rounded-full bg-emerald-500 border-2 border-white\" />\n                            )}\n                          </div>\n                          <div className=\"min-w-0 flex-1\">\n                            <div className=\"flex justify-between\">\n                              <p className=\"truncate font-bold text-slate-900\">{chat.name}</p>\n                              {chat.unread ? (\n                                <span className=\"h-2 w-2 rounded-full bg-rose-500\" />\n                              ) : null}\n                            </div>\n                            <p className=\"truncate text-xs text-slate-500\">{chat.snippet}</p>\n                          </div>\n                        </Link>\n                      ))}\n                    </div>\n                  ) : (\n                    <div className=\"flex flex-col items-center justify-center py-8 text-center\">\n                      <p className=\"text-sm text-slate-400\">No active chats.</p>\n                      <Link href=\"/chat\" className=\"mt-2 text-xs font-bold text-slate-900 hover:underline\">Start a conversation</Link>\n                    </div>\n                  )}\n                </div>\n              </div>\n\n              {/* Friends Card */}\n              <div className=\"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm flex flex-col\">\n                <div className=\"flex items-center justify-between mb-6\">\n                  <div className=\"flex items-center gap-3\">\n                    <div className=\"flex h-10 w-10 items-center justify-center rounded-full bg-emerald-50 text-emerald-600\">\n                      <UsersIcon />\n                    </div>\n                    <div>\n                      <h3 className=\"text-lg font-bold text-slate-900\">Friends</h3>\n                      <p className=\"text-xs text-slate-500\">{friendCount} connections</p>\n                    </div>\n                  </div>\n                  <Link href=\"/friends\" className=\"text-sm font-semibold text-rose-600 hover:text-rose-700\">\n                    Manage\n                  </Link>\n                </div>\n\n                <div className=\"flex-1 flex flex-col justify-center gap-4\">\n                  <div className=\"flex items-center justify-between rounded-2xl bg-slate-50 p-4\">\n                    <span className=\"text-sm font-medium text-slate-600\">Online Now</span>\n                    <span className=\"text-xl font-bold text-emerald-600\">\n                      {allFriends.filter((f) => recentFriendsPresence[f.friend_id]?.online).length}\n                    </span>\n                  </div>\n                  <div className=\"flex items-center justify-between rounded-2xl bg-slate-50 p-4\">\n                    <span className=\"text-sm font-medium text-slate-600\">Pending Requests</span>\n                    <span className={`text-xl font-bold ${inboundPending > 0 ? \"text-rose-600\" : \"text-slate-400\"}`}>\n                      {inboundPending}\n                    </span>\n                  </div>\n                  <Link\n                    href=\"/discovery\"\n                    className=\"mt-auto flex w-full items-center justify-center gap-2 rounded-xl bg-slate-900 py-3 text-sm font-bold text-white transition hover:bg-slate-800\"\n                  >\n                    Find New Friends\n                  </Link>\n                </div>\n              </div>\n\n              {/* Meetups Card */}\n              <div className=\"col-span-1 md:col-span-2 lg:col-span-3 rounded-3xl border border-slate-200 bg-white p-6 shadow-sm flex flex-col\">\n                <div className=\"flex items-center justify-between mb-6\">\n                  <div className=\"flex items-center gap-3\">\n                    <div className=\"relative flex h-10 w-10 items-center justify-center rounded-full bg-indigo-50 text-indigo-600\">\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" className=\"h-5 w-5\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5\" />\n                      </svg>\n                      {hasNewMeetups && (\n                        <span className=\"absolute -top-1 -right-1 h-4 w-4 rounded-full bg-rose-500 flex items-center justify-center\">\n                          <span className=\"text-[10px] font-bold text-white\">{meetupNotifications.length}</span>\n                        </span>\n                      )}\n                    </div>\n                    <div>\n                      <h3 className=\"text-lg font-bold text-slate-900\">My Meetups</h3>\n                      <p className=\"text-xs text-slate-500\">Events you&apos;re hosting</p>\n                    </div>\n                  </div>\n                  <div className=\"flex items-center gap-3\">\n                    {hasNewMeetups && (\n                      <div className=\"flex items-center gap-2 rounded-full bg-rose-50 px-3 py-1\">\n                        <span className=\"h-2 w-2 rounded-full bg-rose-500 animate-pulse\" />\n                        <span className=\"text-xs font-bold text-rose-600\">New meetups available!</span>\n                      </div>\n                    )}\n                    <Link\n                      href=\"/meetups\"\n                      className=\"text-sm font-semibold text-rose-600 hover:text-rose-700\"\n                      onClick={markMeetupsSeen}\n                    >\n                      View All\n                    </Link>\n                  </div>\n                </div>\n\n                <div className=\"flex-1\">\n                  {meetupsLoading ? (\n                    <div className=\"grid gap-4 sm:grid-cols-2 lg:grid-cols-3\">\n                      {[1, 2, 3].map((i) => (\n                        <div key={i} className=\"h-32 animate-pulse rounded-2xl bg-slate-50\" />\n                      ))}\n                    </div>\n                  ) : recentMeetups.length > 0 ? (\n                    <div className=\"grid gap-4 sm:grid-cols-2 lg:grid-cols-3\">\n                      {recentMeetups.map((meetup) => {\n                        const date = new Date(meetup.start_at);\n                        const isToday = date.toDateString() === new Date().toDateString();\n                        const timeStr = date.toLocaleTimeString([], { hour: 'numeric', minute: '2-digit' });\n                        const dateStr = isToday ? \"Today\" : date.toLocaleDateString(undefined, { month: 'short', day: 'numeric' });\n\n                        return (\n                          <Link\n                            key={meetup.id}\n                            href={`/meetups/${meetup.id}`}\n                            className=\"group flex flex-col justify-between rounded-2xl border border-indigo-200 bg-gradient-to-br from-indigo-50/50 to-white p-4 transition hover:shadow-md hover:border-indigo-300 ring-1 ring-indigo-100\"\n                          >\n                            <div>\n                              <div className=\"flex items-start justify-between\">\n                                <div className=\"flex items-center gap-2\">\n                                  <span className=\"rounded-full bg-indigo-600 px-2 py-0.5 text-[10px] font-bold uppercase tracking-wide text-white\">\n                                    HOST\n                                  </span>\n                                  <span className={`rounded-full px-2 py-0.5 text-[10px] font-bold uppercase tracking-wide ${meetup.category === 'study' ? 'bg-blue-100 text-blue-700' :\n                                    meetup.category === 'social' ? 'bg-rose-100 text-rose-700' :\n                                      meetup.category === 'game' ? 'bg-purple-100 text-purple-700' :\n                                        'bg-slate-100 text-slate-700'\n                                    }`}>\n                                    {meetup.category}\n                                  </span>\n                                </div>\n                                {meetup.status === \"ACTIVE\" && (\n                                  <span className=\"h-2 w-2 rounded-full bg-emerald-500 animate-pulse\" />\n                                )}\n                              </div>\n                              <h4 className=\"mt-2 font-bold text-slate-900 line-clamp-1 group-hover:text-indigo-600\">{meetup.title}</h4>\n                              <p className=\"mt-1 text-xs text-slate-500 line-clamp-2\">{meetup.description || \"No description\"}</p>\n                            </div>\n                            <div className=\"mt-4 flex items-center gap-3 text-xs font-medium text-slate-400\">\n                              <div className=\"flex items-center gap-1\">\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\" className=\"h-3.5 w-3.5\">\n                                  <path fillRule=\"evenodd\" d=\"M5.75 2a.75.75 0 01.75.75V4h7V2.75a.75.75 0 011.5 0V4h.25A2.75 2.75 0 0118 6.75v8.5A2.75 2.75 0 0115.25 18H4.75A2.75 2.75 0 012 15.25v-8.5A2.75 2.75 0 014.75 4H5V2.75A.75.75 0 015.75 2zm-1 5.5c-.69 0-1.25.56-1.25 1.25v6.5c0 .69.56 1.25 1.25 1.25h10.5c.69 0 1.25-.56 1.25-1.25v-6.5c0-.69-.56-1.25-1.25-1.25H4.75z\" clipRule=\"evenodd\" />\n                                </svg>\n                                {dateStr} ΓÇó {timeStr}\n                              </div>\n                              <div className=\"flex items-center gap-1\">\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\" className=\"h-3.5 w-3.5\">\n                                  <path d=\"M10 9a3 3 0 100-6 3 3 0 000 6zM6 8a2 2 0 11-4 0 2 2 0 014 0zM1.49 15.326a.78.78 0 01-.358-.442 3 3 0 014.308-3.516 6.484 6.484 0 00-1.905 3.959c-.023.222-.014.442.025.654a4.97 4.97 0 01-2.07-.655zM16.44 15.98a4.97 4.97 0 002.07-.654.78.78 0 00.358-.442 3 3 0 00-4.308-3.516 6.484 6.484 0 011.905 3.959c.023.222.014.442-.025.654zM9 12a4 4 0 014 4v.5a.5.5 0 01-.5.5h-7a.5.5 0 01-.5-.5V16a4 4 0 014-4z\" />\n                                </svg>\n                                {meetup.participants_count}\n                              </div>\n                            </div>\n                          </Link>\n                        );\n                      })}\n                    </div>\n                  ) : (\n                    <div className=\"flex flex-col items-center justify-center py-8 text-center rounded-2xl border border-dashed border-slate-200 bg-slate-50\">\n                      <div className=\"mb-3 rounded-full bg-indigo-50 p-3 text-indigo-500\">\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" className=\"h-6 w-6\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5\" />\n                        </svg>\n                      </div>\n                      <h3 className=\"text-sm font-bold text-slate-900\">No meetups yet</h3>\n                      <p className=\"mt-1 text-xs text-slate-500 max-w-xs\">\n                        You haven&apos;t created any meetups. Host a study group or hangout!\n                      </p>\n                      <Link\n                        href=\"/meetups\"\n                        className=\"mt-4 rounded-xl bg-indigo-600 px-4 py-2 text-xs font-bold text-white shadow-sm hover:bg-indigo-700\"\n                      >\n                        Create Meetup\n                      </Link>\n                    </div>\n                  )}\n                </div>\n              </div>\n            </div>\n          </div>\n        );\n      case \"games\": {\n\n        return (\n          <div className=\"space-y-8\">\n            {/* Header */}\n            <div>\n              <h1 className=\"text-3xl font-bold tracking-tight text-slate-900\">Play Games</h1>\n              <p className=\"text-slate-600\">Play games and challenge yourself with friends.</p>\n            </div>\n\n            {/* Minimal Stats Row */}\n            <div className=\"flex w-full flex-col gap-4 rounded-3xl border border-slate-100 bg-white p-6 shadow-sm md:flex-row md:items-center md:justify-around text-center\">\n              {/* Game Points */}\n              <div className=\"flex flex-1 flex-col items-center gap-1\">\n                <span className=\"text-3xl font-extrabold tracking-tight text-slate-900\">\n                  {activitySnapshot.loading ? \"-\" : (activitySnapshot.totalGames * 50) + (activitySnapshot.wins * 150)}\n                </span>\n                <span className=\"text-xs font-bold uppercase tracking-wider text-slate-400\">Game Points</span>\n              </div>\n\n              <div className=\"hidden h-12 w-px bg-slate-100 md:block\" />\n\n              {/* Games Played */}\n              <div className=\"flex flex-1 flex-col items-center gap-1\">\n                <span className=\"text-3xl font-extrabold tracking-tight text-slate-900\">\n                  {activitySnapshot.loading ? \"-\" : activitySnapshot.totalGames}\n                </span>\n                <span className=\"text-xs font-bold uppercase tracking-wider text-slate-400\">Played</span>\n              </div>\n\n              <div className=\"hidden h-12 w-px bg-slate-100 md:block\" />\n\n              {/* Wins */}\n              <div className=\"flex flex-1 flex-col items-center gap-1\">\n                <span className=\"text-3xl font-extrabold tracking-tight text-slate-900\">\n                  {activitySnapshot.loading ? \"-\" : activitySnapshot.wins}\n                </span>\n                <span className=\"text-xs font-bold uppercase tracking-wider text-slate-400\">Wins</span>\n              </div>\n            </div>\n            <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\n              {activityPreviews.map((game) => {\n                const highlight =\n                  (game.key === \"speed_typing\" && hasTypingInvite) ||\n                  (game.key === \"story\" && hasStoryInvite) ||\n                  (game.key === \"tictactoe\" && hasTicTacToeInvite) ||\n                  (game.key === \"quick_trivia\" && hasQuickTriviaInvite) ||\n                  (game.key === \"rps\" && hasRPSInvite);\n                return (\n                  <Link\n                    key={game.key}\n                    href={game.href}\n                    className=\"group relative flex flex-col overflow-hidden rounded-3xl border border-[#191b2c] bg-gradient-to-br from-[#1f2336] via-[#14182b] to-[#070910] text-white shadow-[0_25px_60px_rgba(7,9,16,0.55)] transition hover:-translate-y-1 hover:shadow-[0_35px_80px_rgba(7,9,16,0.65)]\"\n                  >\n                    <div className=\"flex items-center gap-2 border-b border-white/10 bg-white/5 px-5 py-3 text-[10px] font-semibold uppercase tracking-[0.35em] text-white/70\">\n                      <span className=\"flex gap-1\">\n                        <span className=\"h-2.5 w-2.5 rounded-full bg-rose-400\" />\n                        <span className=\"h-2.5 w-2.5 rounded-full bg-amber-300\" />\n                        <span className=\"h-2.5 w-2.5 rounded-full bg-emerald-300\" />\n                      </span>\n                      <span>Preview</span>\n                    </div>\n                    <div\n                      className=\"relative h-48 overflow-hidden\"\n                      style={\n                        game.image\n                          ? {\n                            backgroundImage: `linear-gradient(120deg, rgba(255,255,255,0.05), rgba(6,7,15,0.92)), url(${game.image})`,\n                            backgroundSize: \"cover\",\n                            backgroundPosition: \"center\",\n                          }\n                          : undefined\n                      }\n                    >\n                      {game.image ? <div className=\"absolute inset-0 bg-gradient-to-t from-[#04060f] via-transparent to-transparent\" /> : null}\n                    </div>\n                    <div className=\"flex flex-1 flex-col gap-3 px-5 py-5\">\n                      <div>\n                        <p className=\"text-sm text-white/70\">{game.description}</p>\n                      </div>\n                      <div className=\"flex items-center gap-2 text-[11px] text-white/80\">\n                        <span className=\"grid h-7 w-7 place-items-center rounded-full bg-white/10 font-semibold text-white\">You</span>\n                        <span className=\"text-white/50\">+</span>\n                        <span className=\"grid h-7 w-7 place-items-center rounded-full bg-emerald-500/20 font-semibold text-emerald-100\">Friend</span>\n                        <span className=\"ml-auto rounded-full bg-white/10 px-2 py-0.5 text-[10px] font-semibold text-white/80 ring-1 ring-white/15\">\n                          2 players\n                        </span>\n                      </div>\n                      <div className=\"pt-1 flex gap-2\">\n                        <span className={`inline-flex flex-1 items-center justify-center rounded-xl px-4 py-2 text-sm font-semibold text-white shadow-lg transition ${highlight ? \"bg-emerald-500 shadow-emerald-500/30 group-hover:bg-emerald-600\" : \"bg-[#ff5f72] shadow-[#ff5f72]/30 group-hover:bg-[#ff4b61]\"}`}>\n                          {highlight ? \"Join pending session\" : \"Open game window\"}\n                        </span>\n                        {highlight && (\n                          <button\n                            onClick={(e) => {\n                              e.preventDefault();\n                              e.stopPropagation();\n                              if (game.key === \"story\") dismissStory();\n                              if (game.key === \"speed_typing\") dismissTyping();\n                              if (game.key === \"tictactoe\") dismissTicTacToe();\n                              if (game.key === \"quick_trivia\") dismissQuickTrivia();\n                              if (game.key === \"rps\") dismissRPS();\n                            }}\n                            className=\"inline-flex items-center justify-center rounded-xl bg-white/10 px-3 py-2 text-sm font-semibold text-white hover:bg-white/20\"\n                          >\n                            Dismiss\n                          </button>\n                        )}\n                      </div>\n                    </div>\n                  </Link>\n                );\n              })}\n            </div>\n          </div>\n        );\n      }\n      case \"profile\":\n        return (\n          <div className=\"rounded-3xl border border-slate-200 bg-white/95 p-2 shadow-xl\">\n            <ProfileSettingsInline />\n          </div>\n        );\n      case \"discovery\":\n        return (\n          <div className=\"-mx-6 -my-12 md:-mx-10\">\n            <DiscoveryFeed />\n          </div>\n        );\n\n    }\n  };\n  return (\n    <main className=\"min-h-screen bg-gradient-to-r from-white via-rose-50 to-white dark:from-slate-950 dark:via-slate-900 dark:to-slate-950 text-base md:text-lg\">\n      <div className=\"flex min-h-screen w-full gap-8 px-0\">\n        <aside className=\"hidden md:flex w-64 flex-col border-r border-rose-100 dark:border-slate-800 bg-white/90 dark:bg-slate-900/90 px-4 py-4 text-slate-700 dark:text-slate-300 shadow-xl\">\n          <div className=\"flex items-center justify-center rounded-2xl bg-white/95 p-2 shadow-sm ring-1 ring-rose-100\">\n            <BrandLogo\n              withWordmark={false}\n              className=\"flex items-center justify-center\"\n              logoClassName=\"!h-28 !w-28 object-contain\"\n              backgroundTone=\"light\"\n              logoWidth={112}\n              logoHeight={112}\n              asLink={false}\n              disableMixBlend={true}\n            />\n          </div>\n          <nav aria-label=\"Primary\" className=\"mt-4 flex flex-col gap-1.5\">\n            {navItems.map((item) => (\n              <button\n                key={item.key}\n                type=\"button\"\n                onClick={() => handleNavClick(item.key)}\n                aria-current={activeSection === item.key ? \"page\" : undefined}\n                className={`flex items-center justify-between rounded-2xl px-4 py-3 text-left text-sm md:text-base font-semibold transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-[#f05656] ${activeSection === item.key ? \"bg-[#f05656] text-white shadow-lg\" : \"text-slate-700 hover:bg-rose-50\"\n                  }`}\n              >\n                <span className=\"flex items-center gap-3\">\n                  {item.icon}\n                  <span>{item.label}</span>\n                </span>\n                {item.badge ? (\n                  <span\n                    className={`rounded-full px-2 py-0.5 text-xs font-bold ${item.key === \"network\" && inboundPending > 0\n                      ? activeSection === item.key\n                        ? \"bg-white text-rose-600 shadow-sm\"\n                        : \"bg-rose-600 text-white shadow-sm\"\n                      : activeSection === item.key\n                        ? \"bg-white/20 text-white\"\n                        : \"bg-slate-900 text-white\"\n                      }`}\n                  >\n                    {item.badge}\n                  </span>\n                ) : null}\n              </button>\n            ))}\n          </nav>\n          <div className=\"mt-8\">\n            {!authHydrated ? (\n              <div className=\"animate-pulse rounded-2xl border border-slate-200 bg-white/70 p-4\">\n                <div className=\"h-3 w-20 rounded-full bg-slate-200\" />\n                <div className=\"mt-3 h-5 w-3/4 rounded-full bg-slate-200\" />\n                <div className=\"mt-4 flex gap-2\">\n                  <div className=\"h-9 flex-1 rounded-xl bg-slate-200\" />\n                  <div className=\"h-9 flex-1 rounded-xl bg-slate-200\" />\n                </div>\n              </div>\n            ) : authUser ? (\n              <div className=\"rounded-2xl border border-rose-100 bg-white/85 p-4 shadow-sm\">\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"flex h-10 w-10 items-center justify-center rounded-full bg-rose-100 text-sm font-semibold text-rose-600\">\n                    {topRightDisplayName?.slice(0, 1).toUpperCase() ?? \"U\"}\n                  </div>\n                  <p className=\"truncate text-sm font-semibold text-slate-900\" title={topRightDisplayName ?? undefined}>\n                    {topRightDisplayName}\n                  </p>\n                </div>\n                <div className=\"mt-4\">\n                  <button\n                    type=\"button\"\n                    onClick={handleSignOut}\n                    className=\"flex w-full items-center justify-center gap-2 rounded-xl border border-rose-200 px-3 py-2 text-sm font-semibold text-rose-600 transition hover:bg-rose-50\"\n                  >\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1.5\" className=\"h-4 w-4\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M16 17l5-5-5-5m5 5H9m4 5v1a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1\" />\n                    </svg>\n                    Sign out\n                  </button>\n                </div>\n              </div>\n            ) : (\n              <div className=\"rounded-2xl border border-slate-200 bg-white p-5 text-slate-900 shadow-sm\">\n                <Link\n                  href=\"/onboarding\"\n                  className=\"inline-flex w-full items-center justify-center rounded-2xl bg-slate-900 px-4 py-2 text-sm font-semibold text-white shadow transition hover:bg-slate-800\"\n                >\n                  Join Campus\n                </Link>\n                <Link\n                  href=\"/login\"\n                  className=\"mt-3 inline-flex w-full items-center justify-center rounded-2xl border border-slate-300 px-4 py-2 text-xs font-semibold uppercase tracking-[0.3em] text-slate-700 transition hover:border-slate-400 hover:text-slate-900\"\n                >\n                  Sign in\n                </Link>\n              </div>\n            )}\n          </div>\n        </aside>\n        <section className=\"flex-1 px-6 py-12 md:px-10\">\n          {/* Mobile logo header */}\n          <div className=\"mb-8 flex justify-center md:hidden\">\n            <BrandLogo\n              withWordmark={false}\n              className=\"flex items-center justify-center\"\n              logoClassName=\"!h-24 !w-24 object-contain\"\n              backgroundTone=\"light\"\n              logoWidth={96}\n              logoHeight={96}\n              asLink={false}\n              disableMixBlend={true}\n            />\n          </div>\n          <div className=\"mx-auto max-w-6xl space-y-8\">{renderSection()}</div>\n        </section>\n      </div>\n    </main>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\proximity\\components\\NearbyList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\search\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\app\\verify-email\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\AppChrome.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\AuthenticatedAppChrome.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\AvatarUploader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\BrandLogo.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\ChatConversationView.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\ChatWindow.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'onSendAudio' is defined but never used.","line":67,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":67,"endColumn":14,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\ConsentViewer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\ContactDiscoveryOptIn.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\DiscoveryFeed.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\EducationTimeline.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\EmailChangeFlow.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\FlagEditor.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\FriendList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\GameInviteCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\HeavyFeaturesProvider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\InlineChatShell.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\InterestPicker.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\InviteInbox.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\LeaderboardPreview.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\LeaderboardTable.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\LinkEditor.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\LinkedAccounts.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\MatchFiltersForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\MatchingResults.tsx","messages":[],"suppressedMessages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":27,"column":7,"nodeType":"JSXOpeningElement","endLine":31,"endColumn":9,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\MessageItem.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\NetworkProgressCircle.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\NotificationToggles.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\PasskeyManager.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\PhoneNumberForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\PrivacyForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\ProfileForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\ProfileGalleryManager.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\ProfileSettingsEmbed.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\PublicProfileHeader.tsx","messages":[],"suppressedMessages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":32,"column":6,"nodeType":"JSXOpeningElement","endLine":36,"endColumn":8,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\PublicProfileView.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\RPSBoard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\RecoveryCodes.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\ReviewDecisionDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\ReviewQueueTable.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\RolesTable.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\RoomChat.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\RoomHeader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\RoomResultCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\RoomRoster.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\SearchBar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\SessionList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\SiteFooter.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\SiteHeader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\SkillEditor.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\SocialLinksForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\StoryBoard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\StreakBadge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\TriviaBoard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\TwoFASetup.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\TypingDots.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\TypingPrompt.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\UploadStudentCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\UserResultCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\VerificationWizard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\WebsiteSettings.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\admin\\AdminSidebar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\auth\\FeatureShowcase.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\avatar-creator\\AvatarCanvas.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\avatar-creator\\AvatarCreator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\avatar-creator\\assets.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\avatar-creator\\types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\avatar-creator\\utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\chat-roster-context.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\communities\\comments\\comment-composer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\communities\\comments\\comment-item.tsx","messages":[],"suppressedMessages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":125,"column":15,"nodeType":"JSXOpeningElement","endLine":125,"endColumn":110,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\communities\\comments\\comment-thread.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\communities\\empty-state.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\communities\\error-boundary.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\communities\\events-soon.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\communities\\events\\attendees-panel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\communities\\events\\calendar-toolbar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\communities\\events\\calendar-view.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\communities\\events\\day-drawer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\communities\\events\\event-card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\communities\\events\\event-detail.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\communities\\events\\events-explorer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\communities\\events\\events-list.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\communities\\events\\filters-bar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\communities\\events\\group-events-board.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\communities\\events\\ics-button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\communities\\events\\reminder-toggle.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\communities\\events\\rsvp-panel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\communities\\events\\skeletons.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\communities\\events\\venue-block.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\communities\\explore-quick.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\communities\\feed\\feed-view.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\communities\\group\\about-panel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\communities\\group\\context.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\communities\\group\\header.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\communities\\group\\locked-banner.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\communities\\group\\members-panel.tsx","messages":[],"suppressedMessages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":103,"column":11,"nodeType":"JSXOpeningElement","endLine":103,"endColumn":142,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\communities\\group\\post-attachment-grid.tsx","messages":[],"suppressedMessages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":41,"column":9,"nodeType":"JSXOpeningElement","endLine":41,"endColumn":109,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\communities\\group\\post-card.tsx","messages":[],"suppressedMessages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":126,"column":7,"nodeType":"JSXOpeningElement","endLine":126,"endColumn":99,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\communities\\group\\post-composer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\communities\\group\\post-list.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\communities\\group\\posts-view.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\communities\\group\\skeletons.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\communities\\group\\tabs.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\communities\\group\\tag-selector.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\communities\\page-header.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\communities\\post\\emoji-picker.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\communities\\post\\reaction-bar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\communities\\post\\reaction-chip.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\communities\\search\\event-result-card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\communities\\search\\facets-panel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\communities\\search\\filters-bar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\communities\\search\\group-result-card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\communities\\search\\highlighted-text.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\communities\\search\\post-result-card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\communities\\search\\rate-limit-notice.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\communities\\search\\result-list-virtual.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\communities\\search\\search-input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\communities\\search\\search-layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\communities\\sidebar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\communities\\skeletons.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\communities\\topbar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\ghost-mode\\GhostModeSelector.tsx","messages":[],"suppressedMessages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":54,"column":29,"nodeType":"JSXOpeningElement","endLine":58,"endColumn":31,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\audit\\diff-view.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\audit\\explorer-filters.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\audit\\explorer-table.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\audit\\export-bar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\audit\\meta-pretty.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\audit\\row.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\audit\\saved-searches.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\audit\\stats-strip.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\case-appeal\\panel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\case-appeal\\resolve-dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\case-appeal\\revertor-preview.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\case-detail\\appeal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\case-detail\\header.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\case-detail\\reporters.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\case-detail\\reputation.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\case-detail\\subject.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\case-detail\\tabs.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\case-detail\\timeline.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\case-detail\\view.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\cases\\actions-bar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\cases\\bulk-actions.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\cases\\filters.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\cases\\row.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\cases\\table-virtual.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\jobs\\detail-panel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\jobs\\list.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\linkage\\filters.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\linkage\\graph.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\linkage\\legend.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\linkage\\table.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\quarantine\\batch-bar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\quarantine\\card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\quarantine\\filters.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\quarantine\\grid-virtual.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\safety\\decision-bar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\safety\\hash-import-wizard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\safety\\hash-table.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\safety\\ocr-drawer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\safety\\quarantine-detail.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\safety\\score-bars.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\safety\\signals-panel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\safety\\thresholds-editor.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\safety\\thresholds-sim-result.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\safety\\url-rep-table.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\shell\\breadcrumb.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\shell\\sidebar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\shell\\topbar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\tools\\bundle-export-form.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\tools\\bundle-import-wizard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\tools\\bundle-progress-detail.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\tools\\bundle-progress-list.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\tools\\catalog-table.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\tools\\create-action-dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\tools\\home-cards.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\tools\\macro-form.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\tools\\plan-preview.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\tools\\revert-form.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\tools\\selector-builder.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\tools\\tool-job-detail.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\tools\\tool-job-list.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\tools\\unshadow-form.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\triage\\canned-actions.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\triage\\case-drawer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\triage\\keyboard-help.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\triage\\queue-table.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\triage\\queues-sidebar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\triage\\quick-note.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\triage\\row.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\triage\\sla-badge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\user\\adjust-score.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\user\\events-table.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\user\\new-restriction-dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\user\\reputation-header.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\user\\restrictions-panel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\mod\\user\\score-card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\notifications\\empty.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\notifications\\notification-item.tsx","messages":[],"suppressedMessages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":56,"column":11,"nodeType":"JSXOpeningElement","endLine":60,"endColumn":13,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\notifications\\notification-row.tsx","messages":[],"suppressedMessages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":44,"column":13,"nodeType":"JSXOpeningElement","endLine":48,"endColumn":15,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\notifications\\notifications-bell.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\notifications\\notifications-center.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\notifications\\utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\photo-adjuster\\Controls.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\photo-adjuster\\ImageCanvas.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\photo-adjuster\\PhotoAdjuster.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\photo-adjuster\\types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\photo-adjuster\\utils.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\photo-adjuster\\utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\providers\\activity-acceptance-provider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\providers\\campus-provider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\providers\\deferred-features-provider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\providers\\query-provider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\providers\\quick-trivia-invite-provider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\providers\\rock-paper-scissors-invite-provider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\providers\\socket-provider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\providers\\staff-provider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\providers\\story-invite-provider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\providers\\tictactoe-invite-provider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\providers\\toast-provider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\providers\\typing-duel-invite-provider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\proximity\\GoLiveStrip.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\proximity\\Radar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\social\\FriendsSnapshot.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\social\\SocialHubShell.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'authUser' is assigned a value but never used.","line":34,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":34,"endColumn":18}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport Link from \"next/link\";\nimport { usePathname } from \"next/navigation\";\nimport { useMemo, useState, useEffect, type ReactNode } from \"react\";\nimport BrandLogo from \"@/components/BrandLogo\";\n\nimport { readAuthUser, onAuthChange, type AuthUser } from \"@/lib/auth-storage\";\n\n\nconst PRIMARY_LINKS = [\n  { href: \"/social\", label: \"Overview\" },\n  { href: \"/social/nearby\", label: \"Nearby\" },\n  { href: \"/social/friends\", label: \"Friends\" },\n  { href: \"/social/invitations\", label: \"Invitations\" },\n];\n\nconst SECONDARY_LINKS = [\n  { href: \"/match\", label: \"Smart matching\" },\n  { href: \"/search\", label: \"Discovery search\" },\n  { href: \"/\", label: \"Live radar dashboard\" },\n];\n\nfunction isActive(pathname: string, href: string) {\n  if (href === \"/social\") {\n    return pathname === \"/social\";\n  }\n  return pathname === href || pathname.startsWith(`${href}/`);\n}\n\nexport function SocialHubShell({ children }: { children: ReactNode }) {\n  const pathname = usePathname();\n  const [mobileNavOpen, setMobileNavOpen] = useState(false);\n  const [authUser, setAuthUser] = useState<AuthUser | null>(null);\n\n  useEffect(() => {\n    setAuthUser(readAuthUser());\n    return onAuthChange(() => setAuthUser(readAuthUser()));\n  }, []);\n\n\n  const activeMap = useMemo(() => {\n    return PRIMARY_LINKS.reduce<Record<string, boolean>>((acc, link) => {\n      acc[link.href] = isActive(pathname ?? \"/social\", link.href);\n      return acc;\n    }, {});\n  }, [pathname]);\n\n  const mobileLinks = PRIMARY_LINKS.map((link) => (\n    <Link\n      key={`mobile-${link.href}`}\n      href={link.href}\n      onClick={() => setMobileNavOpen(false)}\n      className={`whitespace-nowrap rounded-full px-4 py-2 text-sm font-medium transition ${activeMap[link.href]\n        ? \"bg-midnight text-white shadow-soft\"\n        : \"text-navy hover:bg-warm-sand/90 hover:text-midnight\"\n        }`}\n    >\n      {link.label}\n    </Link>\n  ));\n\n  const desktopLinks = PRIMARY_LINKS.map((link) => (\n    <Link\n      key={link.href}\n      href={link.href}\n      className={`rounded-full px-3 py-2 text-sm font-medium transition ${activeMap[link.href]\n        ? \"bg-midnight text-white shadow-soft\"\n        : \"text-navy hover:bg-warm-sand/80 hover:text-midnight\"\n        }`}\n    >\n      {link.label}\n    </Link>\n  ));\n\n  return (\n    <main className=\"relative mx-auto flex w-full max-w-6xl flex-col gap-6 px-4 py-10 text-navy md:flex-row md:gap-10\">\n      <div className=\"pointer-events-none absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(129,140,248,0.18)_0%,_rgba(255,255,255,0)_65%)]\" />\n      <div className=\"pointer-events-none absolute inset-0 bg-[radial-gradient(circle_at_bottom,_rgba(255,138,101,0.16)_0%,_rgba(255,255,255,0)_70%)]\" />\n      <div className=\"relative md:hidden\">\n        <button\n          type=\"button\"\n          onClick={() => setMobileNavOpen((prev) => !prev)}\n          className=\"flex w-full items-center justify-between rounded-3xl border border-warm-sand bg-glass px-4 py-3 text-left text-sm font-semibold shadow-soft\"\n        >\n          <span>Social Hub</span>\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 20 20\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n            strokeWidth={1.75}\n            className={`h-4 w-4 transition ${mobileNavOpen ? \"rotate-180\" : \"rotate-0\"}`}\n          >\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"m6 8 4 4 4-4\" />\n          </svg>\n        </button>\n        {mobileNavOpen ? (\n          <nav className=\"mt-3 flex flex-wrap gap-2 rounded-3xl border border-warm-sand bg-glass p-3 shadow-soft\">\n            {mobileLinks}\n          </nav>\n        ) : null}\n      </div>\n\n      <aside className=\"relative hidden w-full max-w-xs shrink-0 flex-col gap-6 rounded-3xl border border-warm-sand bg-glass p-6 shadow-soft md:flex\">\n        <header className=\"flex flex-col items-center gap-4 text-center\">\n          <div className=\"flex flex-col items-center gap-2\">\n            <BrandLogo\n              withWordmark\n              className=\"text-navy\"\n              logoClassName=\"h-[46px] w-[46px]\"\n              wordmarkTitleClassName=\"text-xl\"\n              tagline=\"Social hub\"\n              taglineClassName=\"text-navy/60\"\n            />\n          </div>\n          <div>\n            <h1 className=\"text-2xl font-semibold text-navy\">Stay close to your campus circle</h1>\n          </div>\n          <p className=\"text-sm text-navy/70\">\n            Switch between the live radar, friends, and invites without leaving the hub. Each module keeps\n            collaboration stress-free.\n          </p>\n        </header>\n        <nav className=\"flex flex-col gap-1\">{desktopLinks}</nav>\n        <div className=\"mt-auto space-y-2 border-t border-warm-sand/60 pt-4\">\n          <p className=\"text-xs font-semibold uppercase tracking-[0.3em] text-navy/50\">More tools</p>\n          <nav className=\"flex flex-col gap-1\">\n            {SECONDARY_LINKS.map((link) => (\n              <Link\n                key={link.href}\n                href={link.href}\n                className=\"rounded-full px-3 py-2 text-sm font-medium text-navy/70 transition hover:bg-warm-sand/70 hover:text-midnight\"\n              >\n                {link.label}\n              </Link>\n            ))}\n          </nav>\n        </div>\n      </aside>\n\n      <section className=\"relative flex-1\">\n        {pathname !== \"/social\" ? null : (\n          <header className=\"relative hidden flex-col gap-2 rounded-3xl border border-warm-sand bg-glass p-6 text-center shadow-soft md:hidden\">\n            <p className=\"text-xs font-semibold uppercase tracking-[0.3em] text-navy/60\">Social hub</p>\n            <h1 className=\"text-xl font-semibold text-navy\">Stay close to your campus circle</h1>\n            <p className=\"text-sm text-navy/70\">\n              Switch between proximity, friends, and invites without leaving the hub.\n            </p>\n          </header>\n        )}\n        {children}\n      </section>\n    </main>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\components\\ui\\badge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\lib\\account.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\lib\\activities.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\lib\\admin-guard.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\lib\\analytics.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\lib\\api-mod.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\lib\\api.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\lib\\auth-guard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\lib\\auth-refresh.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\lib\\auth-storage.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\lib\\chat.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\lib\\chat\\unread-manager.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\lib\\communities.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\lib\\community-search.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\lib\\consent.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\lib\\diff.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\lib\\discovery.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\lib\\download.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\lib\\env.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\lib\\flags.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\lib\\friends-events.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\lib\\geo.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\lib\\identity.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\lib\\json-schema-helpers.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\lib\\leaderboards.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\lib\\meetups.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\lib\\notifications.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\lib\\obs\\safety.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\lib\\obs\\webvitals.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\lib\\passkeys.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\lib\\performance\\api-interceptor.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\lib\\performance\\index.ts","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":117,"column":57,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":117,"endColumn":77,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":138,"column":49,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":138,"endColumn":69,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":143,"column":29,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":143,"endColumn":61,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":154,"column":41,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":154,"endColumn":69,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":162,"column":37,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":162,"endColumn":65,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":168,"column":35,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":168,"endColumn":55,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":179,"column":37,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":179,"endColumn":57,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\lib\\performance\\privacy.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\lib\\performance\\tracing.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\lib\\performance\\web-vitals-reporter.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\lib\\presence.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\lib\\presence\\api.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\lib\\privacy.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\lib\\profiles.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\lib\\query.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\lib\\rbac.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\lib\\redact-meta.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\lib\\rooms.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\lib\\search.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\lib\\security.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\lib\\social.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\lib\\socket.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\lib\\sockets-staff.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\lib\\staff-auth-guard.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\lib\\types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\lib\\utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shahb\\OneDrive\\Desktop\\uniHood\\frontend\\lib\\verification.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
